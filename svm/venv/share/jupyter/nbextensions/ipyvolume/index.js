define(["three","@jupyter-widgets/base"],function(t,n){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=46)}([function(e,n){e.exports=t},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function _(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EPSILON=1e-6,e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random,e.setMatrixArrayType=function(t){e.ARRAY_TYPE=t};const r=Math.PI/180;e.toRadian=function(t){return t*r},e.equals=function(t,n){return Math.abs(t-n)<=e.EPSILON*Math.max(1,Math.abs(t),Math.abs(n))}},function(t,e,n){var r=n(15),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){var r;(function(){var n=this,i=n._,o=Array.prototype,a=Object.prototype,s=Function.prototype,u=o.push,c=o.slice,l=a.toString,h=a.hasOwnProperty,f=Array.isArray,d=Object.keys,p=s.bind,_=Object.create,m=function(){},v=function(t){return t instanceof v?t:this instanceof v?void(this._wrapped=t):new v(t)};void 0!==t&&t.exports&&(e=t.exports=v),e._=v,v.VERSION="1.8.3";var g=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},y=function(t,e,n){return null==t?v.identity:v.isFunction(t)?g(t,e,n):v.isObject(t)?v.matcher(t):v.property(t)};v.iteratee=function(t,e){return y(t,e,1/0)};var b=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,u=0;u<s;u++){var c=a[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}},w=function(t){if(!v.isObject(t))return{};if(_)return _(t);m.prototype=t;var e=new m;return m.prototype=null,e},x=function(t){return function(e){return null==e?void 0:e[t]}},M=Math.pow(2,53)-1,E=x("length"),S=function(t){var e=E(t);return"number"==typeof e&&e>=0&&e<=M};function A(t){return function(e,n,r,i){n=g(n,i,4);var o=!S(e)&&v.keys(e),a=(o||e).length,s=t>0?0:a-1;return arguments.length<3&&(r=e[o?o[s]:s],s+=t),function(e,n,r,i,o,a){for(;o>=0&&o<a;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}(e,n,r,o,s,a)}}v.each=v.forEach=function(t,e,n){var r,i;if(e=g(e,n),S(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=v.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},v.map=v.collect=function(t,e,n){e=y(e,n);for(var r=!S(t)&&v.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},v.reduce=v.foldl=v.inject=A(1),v.reduceRight=v.foldr=A(-1),v.find=v.detect=function(t,e,n){var r;if(void 0!==(r=S(t)?v.findIndex(t,e,n):v.findKey(t,e,n))&&-1!==r)return t[r]},v.filter=v.select=function(t,e,n){var r=[];return e=y(e,n),v.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},v.reject=function(t,e,n){return v.filter(t,v.negate(y(e)),n)},v.every=v.all=function(t,e,n){e=y(e,n);for(var r=!S(t)&&v.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},v.some=v.any=function(t,e,n){e=y(e,n);for(var r=!S(t)&&v.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},v.contains=v.includes=v.include=function(t,e,n,r){return S(t)||(t=v.values(t)),("number"!=typeof n||r)&&(n=0),v.indexOf(t,e,n)>=0},v.invoke=function(t,e){var n=c.call(arguments,2),r=v.isFunction(e);return v.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},v.pluck=function(t,e){return v.map(t,v.property(e))},v.where=function(t,e){return v.filter(t,v.matcher(e))},v.findWhere=function(t,e){return v.find(t,v.matcher(e))},v.max=function(t,e,n){var r,i,o=-1/0,a=-1/0;if(null==e&&null!=t)for(var s=0,u=(t=S(t)?t:v.values(t)).length;s<u;s++)(r=t[s])>o&&(o=r);else e=y(e,n),v.each(t,function(t,n,r){((i=e(t,n,r))>a||i===-1/0&&o===-1/0)&&(o=t,a=i)});return o},v.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t)for(var s=0,u=(t=S(t)?t:v.values(t)).length;s<u;s++)(r=t[s])<o&&(o=r);else e=y(e,n),v.each(t,function(t,n,r){((i=e(t,n,r))<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},v.shuffle=function(t){for(var e,n=S(t)?t:v.values(t),r=n.length,i=Array(r),o=0;o<r;o++)(e=v.random(0,o))!==o&&(i[o]=i[e]),i[e]=n[o];return i},v.sample=function(t,e,n){return null==e||n?(S(t)||(t=v.values(t)),t[v.random(t.length-1)]):v.shuffle(t).slice(0,Math.max(0,e))},v.sortBy=function(t,e,n){return e=y(e,n),v.pluck(v.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var k=function(t){return function(e,n,r){var i={};return n=y(n,r),v.each(e,function(r,o){var a=n(r,o,e);t(i,r,a)}),i}};v.groupBy=k(function(t,e,n){v.has(t,n)?t[n].push(e):t[n]=[e]}),v.indexBy=k(function(t,e,n){t[n]=e}),v.countBy=k(function(t,e,n){v.has(t,n)?t[n]++:t[n]=1}),v.toArray=function(t){return t?v.isArray(t)?c.call(t):S(t)?v.map(t,v.identity):v.values(t):[]},v.size=function(t){return null==t?0:S(t)?t.length:v.keys(t).length},v.partition=function(t,e,n){e=y(e,n);var r=[],i=[];return v.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},v.first=v.head=v.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:v.initial(t,t.length-e)},v.initial=function(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},v.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:v.rest(t,Math.max(0,t.length-e))},v.rest=v.tail=v.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},v.compact=function(t){return v.filter(t,v.identity)};var T=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=E(t);a<s;a++){var u=t[a];if(S(u)&&(v.isArray(u)||v.isArguments(u))){e||(u=T(u,e,n));var c=0,l=u.length;for(i.length+=l;c<l;)i[o++]=u[c++]}else n||(i[o++]=u)}return i};function O(t){return function(e,n,r){n=y(n,r);for(var i=E(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function C(t,e,n){return function(r,i,o){var a=0,s=E(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(c.call(r,a,s),v.isNaN))>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(r[o]===i)return o;return-1}}v.flatten=function(t,e){return T(t,e,!1)},v.without=function(t){return v.difference(t,c.call(arguments,1))},v.uniq=v.unique=function(t,e,n,r){v.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=y(n,r));for(var i=[],o=[],a=0,s=E(t);a<s;a++){var u=t[a],c=n?n(u,a,t):u;e?(a&&o===c||i.push(u),o=c):n?v.contains(o,c)||(o.push(c),i.push(u)):v.contains(i,u)||i.push(u)}return i},v.union=function(){return v.uniq(T(arguments,!0,!0))},v.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=E(t);r<i;r++){var o=t[r];if(!v.contains(e,o)){for(var a=1;a<n&&v.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},v.difference=function(t){var e=T(arguments,!0,!0,1);return v.filter(t,function(t){return!v.contains(e,t)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(t){for(var e=t&&v.max(t,E).length||0,n=Array(e),r=0;r<e;r++)n[r]=v.pluck(t,r);return n},v.object=function(t,e){for(var n={},r=0,i=E(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},v.findIndex=O(1),v.findLastIndex=O(-1),v.sortedIndex=function(t,e,n,r){for(var i=(n=y(n,r,1))(e),o=0,a=E(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},v.indexOf=C(1,v.findIndex,v.sortedIndex),v.lastIndexOf=C(-1,v.findLastIndex),v.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var R=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=w(t.prototype),a=t.apply(o,i);return v.isObject(a)?a:o};v.bind=function(t,e){if(p&&t.bind===p)return p.apply(t,c.call(arguments,1));if(!v.isFunction(t))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2),r=function(){return R(t,r,e,this,n.concat(c.call(arguments)))};return r},v.partial=function(t){var e=c.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;a<i;a++)o[a]=e[a]===v?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return R(t,n,this,this,o)};return n},v.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)t[n=arguments[e]]=v.bind(t[n],t);return t},v.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return v.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},v.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},v.defer=v.partial(v.delay,v,1),v.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:v.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var c=v.now();s||!1!==n.leading||(s=c);var l=e-(c-s);return r=this,i=arguments,l<=0||l>e?(a&&(clearTimeout(a),a=null),s=c,o=t.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(u,l)),o}},v.debounce=function(t,e,n){var r,i,o,a,s,u=function(){var c=v.now()-a;c<e&&c>=0?r=setTimeout(u,e-c):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=v.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(s=t.apply(o,i),o=i=null),s}},v.wrap=function(t,e){return v.partial(e,t)},v.negate=function(t){return function(){return!t.apply(this,arguments)}},v.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},v.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},v.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},v.once=v.partial(v.before,2);var j=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function P(t,e){var n=N.length,r=t.constructor,i=v.isFunction(r)&&r.prototype||a,o="constructor";for(v.has(t,o)&&!v.contains(e,o)&&e.push(o);n--;)(o=N[n])in t&&t[o]!==i[o]&&!v.contains(e,o)&&e.push(o)}v.keys=function(t){if(!v.isObject(t))return[];if(d)return d(t);var e=[];for(var n in t)v.has(t,n)&&e.push(n);return j&&P(t,e),e},v.allKeys=function(t){if(!v.isObject(t))return[];var e=[];for(var n in t)e.push(n);return j&&P(t,e),e},v.values=function(t){for(var e=v.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},v.mapObject=function(t,e,n){e=y(e,n);for(var r,i=v.keys(t),o=i.length,a={},s=0;s<o;s++)a[r=i[s]]=e(t[r],r,t);return a},v.pairs=function(t){for(var e=v.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},v.invert=function(t){for(var e={},n=v.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},v.functions=v.methods=function(t){var e=[];for(var n in t)v.isFunction(t[n])&&e.push(n);return e.sort()},v.extend=b(v.allKeys),v.extendOwn=v.assign=b(v.keys),v.findKey=function(t,e,n){e=y(e,n);for(var r,i=v.keys(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r},v.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;v.isFunction(e)?(i=v.allKeys(a),r=g(e,n)):(i=T(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,u=i.length;s<u;s++){var c=i[s],l=a[c];r(l,c,a)&&(o[c]=l)}return o},v.omit=function(t,e,n){if(v.isFunction(e))e=v.negate(e);else{var r=v.map(T(arguments,!1,!1,1),String);e=function(t,e){return!v.contains(r,e)}}return v.pick(t,e,n)},v.defaults=b(v.allKeys,!0),v.create=function(t,e){var n=w(t);return e&&v.extendOwn(n,e),n},v.clone=function(t){return v.isObject(t)?v.isArray(t)?t.slice():v.extend({},t):t},v.tap=function(t,e){return e(t),t},v.isMatch=function(t,e){var n=v.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var I=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof v&&(t=t._wrapped),e instanceof v&&(e=e._wrapped);var i=l.call(t);if(i!==l.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(v.isFunction(a)&&a instanceof a&&v.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if((u=t.length)!==e.length)return!1;for(;u--;)if(!I(t[u],e[u],n,r))return!1}else{var c,h=v.keys(t);if(u=h.length,v.keys(e).length!==u)return!1;for(;u--;)if(c=h[u],!v.has(e,c)||!I(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0};v.isEqual=function(t,e){return I(t,e)},v.isEmpty=function(t){return null==t||(S(t)&&(v.isArray(t)||v.isString(t)||v.isArguments(t))?0===t.length:0===v.keys(t).length)},v.isElement=function(t){return!(!t||1!==t.nodeType)},v.isArray=f||function(t){return"[object Array]"===l.call(t)},v.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){v["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),v.isArguments(arguments)||(v.isArguments=function(t){return v.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(t){return"function"==typeof t||!1}),v.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},v.isNaN=function(t){return v.isNumber(t)&&t!==+t},v.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},v.isNull=function(t){return null===t},v.isUndefined=function(t){return void 0===t},v.has=function(t,e){return null!=t&&h.call(t,e)},v.noConflict=function(){return n._=i,this},v.identity=function(t){return t},v.constant=function(t){return function(){return t}},v.noop=function(){},v.property=x,v.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},v.matcher=v.matches=function(t){return t=v.extendOwn({},t),function(e){return v.isMatch(e,t)}},v.times=function(t,e,n){var r=Array(Math.max(0,t));e=g(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},v.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},v.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=v.invert(L),U=function(t){var e=function(e){return t[e]},n="(?:"+v.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};v.escape=U(L),v.unescape=U(z),v.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),v.isFunction(r)?r.call(t):r};var q=0;v.uniqueId=function(t){var e=++q+"";return t?t+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\u2028|\u2029/g,H=function(t){return"\\"+F[t]};v.template=function(t,e,n){!e&&n&&(e=n),e=v.defaults({},e,v.templateSettings);var r=RegExp([(e.escape||D).source,(e.interpolate||D).source,(e.evaluate||D).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(B,H),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var s=function(t){return a.call(this,t,v)},u=e.variable||"obj";return s.source="function("+u+"){\n"+o+"}",s},v.chain=function(t){var e=v(t);return e._chain=!0,e};var Y=function(t,e){return t._chain?v(e).chain():e};v.mixin=function(t){v.each(v.functions(t),function(e){var n=v[e]=t[e];v.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),Y(this,n.apply(v,t))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];v.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],Y(this,n)}}),v.each(["concat","join","slice"],function(t){var e=o[t];v.prototype[t]=function(){return Y(this,e.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},void 0===(r=function(){return v}.apply(e,[]))||(t.exports=r)}).call(this)},function(t,e,n){var r="~"+n(25).version,i=n(66);t.exports={is_typedarray:function(t){return i(t)},is_arraybuffer:function(t){return ArrayBuffer.isView(t)},get_array_dimension:function(t){for(var e=0;void 0!==t[0];)t=t[0],e+=1;return e},semver_range:r}},function(t,e,n){"use strict";var r=n(11),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var o=n(12);o.inherits=n(5);var a=n(32),s=n(36);o.inherits(h,a);for(var u=i(s.prototype),c=0;c<u.length;c++){var l=u[c];h.prototype[l]||(h.prototype[l]=s.prototype[l])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r(d,this)}function d(t){t.end()}Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),r(e,t)}},function(t,e){t.exports=n},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,a,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(o(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(c=n.slice()).length,u=0;u<a;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var a;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,o,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}:t.exports=e.nextTick}).call(this,n(1))},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(15).Buffer)},function(t,e,n){var r=n(6),i=(n(7),n(0)),o=n(9),a=n(17);var s={int8:Int8Array,int16:Int16Array,int32:Int32Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,float32:Float32Array,float64:Float64Array},u={Int8Array:"int8",Int16Array:"int16",Int32Array:"int32",Uint8Array:"uint8",Uint16Array:"uint16",Uint32Array:"uint32",Float32Array:"float32",Float64Array:"float64"};function c(t,e){var n=s[t.dtype];return null==t&&console.log("data is null"),t.data||console.log("data.data is null"),t.data.buffer||console.log("data.data.buffer is null"),new n(t.data.buffer)}function l(t,e){if(null==t)return null;var n=null;return r.isNumber(t)?t:((n=r.map(t,function(t){return c(t)})).original_data=t,n)}function h(t,e){if(null==t)return null;var n=null;function o(t){for(var e=new Float32Array(3*t.length),n=0;n<t.length;n++){var r=new i.Color(t[n]);e[3*n+0]=r.r,e[3*n+1]=r.g,e[3*n+2]=r.b}return e}return"string"==typeof t?n=t:void 0!==t[0].dtype?n=r.map(t,function(t){return c(t)}):1==dimension&&"string"==typeof t[0]?n=o(t):2==dimension&&"string"==typeof t[0][0]?n=r.map(t,o):console.error("don't understand color type"),n.original_data=t,n}function f(t,e){return r.isNumber(t)?t:null!=t?void 0===t.original_data?t:t.original_data:null}window.ndarray=a,t.exports={texture:{deserialize:function(t,e){return"string"==typeof t&&t.startsWith("IPY_MODEL_")?o.unpack_models(t,e):t},serialize:function(t,e){return t}},serialize_array_or_json:f,deserialize_array_or_json:l,deserialize_color_or_json:h,array_or_json:{deserialize:l,serialize:f},color_or_json:{deserialize:h,serialize:f},ndarray:{deserialize:function(t,e){return null===t?null:a(c(t),t.shape)},serialize:function(t,e){if(null===t)return null;var i=t;r.isArray(t)&&!t.data&&(i=n(27)(t));return{data:i.data.buffer,dtype:u[i.data.constructor.name],shape:i.shape}}}}},function(t,e,n){(e=t.exports=n(32)).Stream=e,e.Readable=e,e.Writable=n(36),e.Duplex=n(8),e.Transform=n(38),e.PassThrough=n(102)},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(95),i=n(96),o=n(33);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return D(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(t).length;default:if(r)return D(t).length;e=(""+e).toLowerCase(),r=!0}}function _(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){h=!1;break}if(h)return o}return-1}function g(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function y(t,e,n,r){return B(D(e,t.length-n),t,n,r)}function b(t,e,n,r){return B(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return b(t,e,n,r)}function x(t,e,n,r){return B(F(e),t,n,r)}function M(t,e,n,r){return B(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return k(this,e,n);case"latin1":case"binary":return T(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,a=n-e,s=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),h=0;h<s;++h)if(c[h]!==l[h]){o=c[h],a=l[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return g(this,t,e,n);case"utf8":case"utf-8":return y(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function k(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function O(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=q(t[o]);return i}function C(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function N(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function P(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function I(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,o){return o||I(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function z(t,e,n,r,o){return o||I(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||j(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||j(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);j(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);j(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return z(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return z(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:D(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function q(t){return t<16?"0"+t.toString(16):t.toString(16)}function D(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function F(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(2))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);e.textAlign={center:new r.Vector2(0,0),left:new r.Vector2(1,0),topLeft:new r.Vector2(1,-1),topRight:new r.Vector2(-1,-1),right:new r.Vector2(-1,0),bottomLeft:new r.Vector2(1,1),bottomRight:new r.Vector2(-1,1)};var i={};e.getFontHeight=function(t){var e=i[t];if(!e){var n=document.getElementsByTagName("body")[0],r=document.createElement("div"),o=document.createTextNode("MÉq");r.appendChild(o),r.setAttribute("style","font:"+t+";position:absolute;top:0;left:0"),n.appendChild(r),e=r.offsetHeight,i[t]=e,n.removeChild(r)}return e}},function(t,e,n){var r=n(68),i=n(69),o="undefined"!=typeof Float64Array;function a(t,e){return t[0]-e[0]}function s(){var t,e=this.stride,n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=[Math.abs(e[t]),t];n.sort(a);var r=new Array(n.length);for(t=0;t<r.length;++t)r[t]=n[t][1];return r}function u(t,e){var n=["View",e,"d",t].join("");e<0&&(n="View_Nil"+t);var i="generic"===t;if(-1===e){var o="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(o)()}if(0===e){o="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return new Function("TrivialArray",o)(c[t][0])}o=["'use strict'"];var a=r(e),u=a.map(function(t){return"i"+t}),l="this.offset+"+a.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),h=a.map(function(t){return"b"+t}).join(","),f=a.map(function(t){return"c"+t}).join(",");o.push("function "+n+"(a,"+h+","+f+",d){this.data=a","this.shape=["+h+"]","this.stride=["+f+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),o.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+a.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===e?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),e<4?(o.push("function "+n+"_order(){"),2===e?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+n+"_set("+u.join(",")+",v){"),i?o.push("return this.data.set("+l+",v)}"):o.push("return this.data["+l+"]=v}"),o.push("proto.get=function "+n+"_get("+u.join(",")+"){"),i?o.push("return this.data.get("+l+")}"):o.push("return this.data["+l+"]}"),o.push("proto.index=function "+n+"_index(",u.join(),"){return "+l+"}"),o.push("proto.hi=function "+n+"_hi("+u.join(",")+"){return new "+n+"(this.data,"+a.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+a.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var d=a.map(function(t){return"a"+t+"=this.shape["+t+"]"}),p=a.map(function(t){return"c"+t+"=this.stride["+t+"]"});o.push("proto.lo=function "+n+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+p.join(","));for(var _=0;_<e;++_)o.push("if(typeof i"+_+"==='number'&&i"+_+">=0){d=i"+_+"|0;b+=c"+_+"*d;a"+_+"-=d}");o.push("return new "+n+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"c"+t}).join(",")+",b)}"),o.push("proto.step=function "+n+"_step("+u.join(",")+"){var "+a.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+a.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(_=0;_<e;++_)o.push("if(typeof i"+_+"==='number'){d=i"+_+"|0;if(d<0){c+=b"+_+"*(a"+_+"-1);a"+_+"=ceil(-a"+_+"/d)}else{a"+_+"=ceil(a"+_+"/d)}b"+_+"*=d}");o.push("return new "+n+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"b"+t}).join(",")+",c)}");var m=new Array(e),v=new Array(e);for(_=0;_<e;++_)m[_]="a[i"+_+"]",v[_]="b[i"+_+"]";o.push("proto.transpose=function "+n+"_transpose("+u+"){"+u.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+m.join(",")+","+v.join(",")+",this.offset)}"),o.push("proto.pick=function "+n+"_pick("+u+"){var a=[],b=[],c=this.offset");for(_=0;_<e;++_)o.push("if(typeof i"+_+"==='number'&&i"+_+">=0){c=(c+this.stride["+_+"]*i"+_+")|0}else{a.push(this.shape["+_+"]);b.push(this.stride["+_+"])}");return o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+a.map(function(t){return"shape["+t+"]"}).join(",")+","+a.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",o.join("\n"))(c[t],s)}var c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=function(t,e,n,r){if(void 0===t)return(0,c.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var a=e.length;if(void 0===n){n=new Array(a);for(var s=a-1,l=1;s>=0;--s)n[s]=l,l*=e[s]}if(void 0===r)for(r=0,s=0;s<a;++s)n[s]<0&&(r-=(e[s]-1)*n[s]);for(var h=function(t){if(i(t))return"buffer";if(o)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}(t),f=c[h];f.length<=a+1;)f.push(u(h,f.length-1));return(0,f[a+1])(t,e,n,r)}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";var r=n(117),i=n(119);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=y,e.resolve=function(t,e){return y(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?y(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=y(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),h=["%","/","?",";","#"].concat(l),f=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=n(120);function y(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(s);c[0]=c[0].replace(/\\/g,"/");var y=t=c.join(s);if(y=y.trim(),!n&&1===t.split("#").length){var b=u.exec(y);if(b)return this.path=y,this.href=y,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?g.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=a.exec(y);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,y=y.substr(w.length)}if(n||w||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var M="//"===y.substr(0,2);!M||w&&m[w]||(y=y.substr(2),this.slashes=!0)}if(!m[w]&&(M||w&&!v[w])){for(var E,S,A=-1,k=0;k<f.length;k++){-1!==(T=y.indexOf(f[k]))&&(-1===A||T<A)&&(A=T)}-1!==(S=-1===A?y.lastIndexOf("@"):y.lastIndexOf("@",A))&&(E=y.slice(0,S),y=y.slice(S+1),this.auth=decodeURIComponent(E)),A=-1;for(k=0;k<h.length;k++){var T;-1!==(T=y.indexOf(h[k]))&&(-1===A||T<A)&&(A=T)}-1===A&&(A=y.length),this.host=y.slice(0,A),y=y.slice(A),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var C=this.hostname.split(/\./),R=(k=0,C.length);k<R;k++){var j=C[k];if(j&&!j.match(d)){for(var N="",P=0,I=j.length;P<I;P++)j.charCodeAt(P)>127?N+="x":N+=j[P];if(!N.match(d)){var L=C.slice(0,k),z=C.slice(k+1),U=j.match(p);U&&(L.push(U[1]),z.unshift(U[2])),z.length&&(y="/"+z.join(".")+y),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=r.toASCII(this.hostname));var q=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+q,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!_[x])for(k=0,R=l.length;k<R;k++){var F=l[k];if(-1!==y.indexOf(F)){var B=encodeURIComponent(F);B===F&&(B=escape(F)),y=y.split(F).join(B)}}var H=y.indexOf("#");-1!==H&&(this.hash=y.substr(H),y=y.slice(0,H));var Y=y.indexOf("?");if(-1!==Y?(this.search=y.substr(Y),this.query=y.substr(Y+1),e&&(this.query=g.parse(this.query)),y=y.slice(0,Y)):e&&(this.search="",this.query={}),y&&(this.pathname=y),v[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){q=this.pathname||"";var V=this.search||"";this.path=q+V}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=g.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=t[l])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!v[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var d=h[f];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||m[t.protocol])n.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var _=n.pathname||"",g=n.search||"";n.path=_+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||y||n.host&&t.pathname,x=w,M=n.pathname&&n.pathname.split("/")||[],E=(p=t.pathname&&t.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===M[0]?M[0]=n.host:M.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),w=w&&(""===p[0]||""===M[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,M=p;else if(p.length)M||(M=[]),M.pop(),M=M.concat(p),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(E)n.hostname=n.host=M.shift(),(O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift());return n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!M.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=M.slice(-1)[0],A=(n.host||t.host||M.length>1)&&("."===S||".."===S)||""===S,k=0,T=M.length;T>=0;T--)"."===(S=M[T])?M.splice(T,1):".."===S?(M.splice(T,1),k++):k&&(M.splice(T,1),k--);if(!w&&!x)for(;k--;k)M.unshift("..");!w||""===M[0]||M[0]&&"/"===M[0].charAt(0)||M.unshift(""),A&&"/"!==M.join("/").substr(-1)&&M.push("");var O,C=""===M[0]||M[0]&&"/"===M[0].charAt(0);E&&(n.hostname=n.host=C?"":M.length?M.shift():"",(O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift()));return(w=w||n.host&&M.length)&&!C&&M.unshift(""),M.length?n.pathname=M.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){"use strict";var r=n(124);t.exports=function(t,e){var n;function i(r){e.rejectUnauthorized&&t.emit("error",r),n.end()}return e.port=e.port||8883,e.host=e.hostname||e.host||"localhost",e.rejectUnauthorized=!1!==e.rejectUnauthorized,delete e.path,(n=r.connect(e)).on("secureConnect",function(){e.rejectUnauthorized&&!n.authorized?n.emit("error",new Error("TLS not authorized")):n.removeListener("error",i)}),n.on("error",i),n}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(16),a=n(50),s=function(t){function e(e,n){void 0===e&&(e=""),void 0===n&&(n={});var r=t.call(this)||this;return r._font=n.font||"30px Arial",r._fillStyle=n.fillStyle||"#FFFFFF",r._shadowColor=n.shadowColor||"rgba(0, 0, 0, 0)",r._shadowBlur=n.shadowBlur||0,r._shadowOffsetX=n.shadowOffsetX||0,r._shadowOffsetY=n.shadowOffsetY||0,r.canvas=new a.CanvasText,r.align=n.align||o.textAlign.center,r.side=n.side||i.DoubleSide,r.antialias=void 0===n.antialias||n.antialias,r.text=e,r}return r(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.textHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text!==t&&(this._text=t,this.updateText())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this._font},set:function(t){this._font!==t&&(this._font=t,this.updateText())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillStyle",{get:function(){return this._fillStyle},set:function(t){this._fillStyle!==t&&(this._fillStyle=t,this.updateText())},enumerable:!0,configurable:!0}),e.prototype.cleanUp=function(){this.texture&&this.texture.dispose()},e.prototype.applyAntiAlias=function(){!1===this.antialias&&(this.texture.magFilter=i.NearestFilter,this.texture.minFilter=i.LinearMipMapLinearFilter)},e}(i.Object3D);e.Text2D=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);function i(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=n[0],d=n[1],p=n[2],_=n[3],m=n[4],v=n[5],g=n[6],y=n[7],b=n[8];return t[0]=f*r+d*a+p*c,t[1]=f*i+d*s+p*l,t[2]=f*o+d*u+p*h,t[3]=_*r+m*a+v*c,t[4]=_*i+m*s+v*l,t[5]=_*o+m*u+v*h,t[6]=g*r+y*a+b*c,t[7]=g*i+y*s+b*l,t[8]=g*o+y*u+b*h,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}e.create=function(){let t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){let e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,i,o,a,s,u,c){let l=new r.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=i,l[4]=o,l[5]=a,l[6]=s,l[7]=u,l[8]=c,l},e.set=function(t,e,n,r,i,o,a,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){let n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=l*a-s*c,f=-l*o+s*u,d=c*o-a*u,p=n*h+r*f+i*d;return p?(p=1/p,t[0]=h*p,t[1]=(-l*r+i*c)*p,t[2]=(s*r-i*a)*p,t[3]=f*p,t[4]=(l*n-i*u)*p,t[5]=(-s*n+i*o)*p,t[6]=d*p,t[7]=(-c*n+r*u)*p,t[8]=(a*n-r*o)*p,t):null},e.adjoint=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=a*l-s*c,t[1]=i*c-r*l,t[2]=r*s-i*a,t[3]=s*u-o*l,t[4]=n*l-i*u,t[5]=i*o-n*s,t[6]=o*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*o,t},e.determinant=function(t){let e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+n*(-c*i+a*s)+r*(u*i-o*s)},e.multiply=i,e.translate=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=n[0],d=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=f*r+d*a+c,t[7]=f*i+d*s+l,t[8]=f*o+d*u+h,t},e.rotate=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=Math.sin(n),d=Math.cos(n);return t[0]=d*r+f*a,t[1]=d*i+f*s,t[2]=d*o+f*u,t[3]=d*a-f*r,t[4]=d*s-f*i,t[5]=d*u-f*o,t[6]=c,t[7]=l,t[8]=h,t},e.scale=function(t,e,n){let r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,h=r*s,f=i*a,d=i*s,p=i*u,_=o*a,m=o*s,v=o*u;return t[0]=1-h-p,t[3]=l-v,t[6]=f+m,t[1]=l+v,t[4]=1-c-p,t[7]=d-_,t[2]=f-m,t[5]=d+_,t[8]=1-c-h,t},e.normalFromMat4=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],p=e[12],_=e[13],m=e[14],v=e[15],g=n*s-r*a,y=n*u-i*a,b=n*c-o*a,w=r*u-i*s,x=r*c-o*s,M=i*c-o*u,E=l*_-h*p,S=l*m-f*p,A=l*v-d*p,k=h*m-f*_,T=h*v-d*_,O=f*v-d*m,C=g*O-y*T+b*k+w*A-x*S+M*E;return C?(C=1/C,t[0]=(s*O-u*T+c*k)*C,t[1]=(u*A-a*O-c*S)*C,t[2]=(a*T-s*A+c*E)*C,t[3]=(i*T-r*O-o*k)*C,t[4]=(n*O-i*A+o*S)*C,t[5]=(r*A-n*T-o*E)*C,t[6]=(_*M-m*x+v*w)*C,t[7]=(m*b-p*M-v*y)*C,t[8]=(p*x-_*b+v*g)*C,t):null},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=o,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){let n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=e[0],d=e[1],p=e[2],_=e[3],m=e[4],v=e[5],g=e[6],y=e[7],b=e[8];return Math.abs(n-f)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-d)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-p)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-_)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-m)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-v)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-g)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-y)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(h-b)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(b))},e.mul=i,e.sub=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);function i(){let t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function o(t){let e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function a(t,e,n){let i=new r.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=n,i}function s(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function u(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function c(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function l(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function h(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function f(t){let e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function d(t,e){let n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function p(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}e.create=i,e.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=o,e.fromValues=a,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=s,e.multiply=u,e.divide=c,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=l,e.squaredDistance=h,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=d,e.dot=p,e.cross=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},e.lerp=function(t,e,n,r){let i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t},e.hermite=function(t,e,n,r,i,o){let a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*l,t},e.bezier=function(t,e,n,r,i,o){let a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,h=3*u*a,f=u*o;return t[0]=e[0]*c+n[0]*l+r[0]*h+i[0]*f,t[1]=e[1]*c+n[1]*l+r[1]*h+i[1]*f,t[2]=e[2]*c+n[2]*l+r[2]*h+i[2]*f,t},e.random=function(t,e){e=e||1;let n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=i*e,t},e.transformMat4=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t},e.transformMat3=function(t,e,n){let r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},e.transformQuat=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,h=c*i+u*r-a*o,f=c*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=l*c+d*-a+h*-u-f*-s,t[1]=h*c+d*-s+f*-a-l*-u,t[2]=f*c+d*-u+l*-s-h*-a,t},e.rotateX=function(t,e,n,r){let i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateY=function(t,e,n,r){let i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateZ=function(t,e,n,r){let i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.angle=function(t,e){let n=a(t[0],t[1],t[2]),r=a(e[0],e[1],e[2]);d(n,n),d(r,r);let i=p(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){let n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))},e.sub=s,e.mul=u,e.div=c,e.dist=l,e.sqrDist=h,e.len=o,e.sqrLen=f,e.forEach=function(){let t=i();return function(e,n,r,i,o,a){let s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);function i(){let t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function a(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function u(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function c(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)}function l(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function h(t){let e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}function f(t){let e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function d(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t}e.create=i,e.clone=function(t){let e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,n,i){let o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=o,e.multiply=a,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=u,e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.distance=c,e.squaredDistance=l,e.length=h,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=d,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,n,r){let i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t},e.random=function(t,e){return e=e||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),d(t,t),u(t,t,e),t},e.transformMat4=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t},e.transformQuat=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,h=c*i+u*r-a*o,f=c*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=l*c+d*-a+h*-u-f*-s,t[1]=h*c+d*-s+f*-a-l*-u,t[2]=f*c+d*-u+l*-s-h*-a,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let n=t[0],i=t[1],o=t[2],a=t[3],s=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))},e.sub=o,e.mul=a,e.div=s,e.dist=c,e.sqrDist=l,e.len=h,e.sqrLen=f,e.forEach=function(){let t=i();return function(e,n,r,i,o,a){let s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}()},function(t){t.exports={name:"ipyvolume",version:"0.5.1",description:"IPython widget for rendering 3d volumes",author:"Maarten A. Breddels",main:"lib/index.js",repository:{type:"git",url:"https://github.com/maartenbreddels/ipyvolume.git"},keywords:["jupyter","widgets","ipython","ipywidgets"],scripts:{prepublish:"webpack ","install-test":"npm install && karma start --single-run",test:"karma start --single-run","build:lib":"tsc --project .",prepare:"npm run build:lib",watch:"npm-run-all -p watch:*","watch:lib":"tsc -w --project .","watch:nbextension":"webpack --watch"},jupyterlab:{extension:"lib/labplugin"},devDependencies:{"@types/chai":"^4.1.4","@types/expect.js":"^0.3.29","@types/mocha":"^2.2.41","@types/requirejs":"^2.1.31","@types/three":"^0.92.4","babel-loader":"7.1.1","babel-preset-es2015":"^6.24.1","babel-preset-es2015-without-strict":"0.0.4","cache-loader":"^1.2.2",chai:"^4.1.2","json-loader":"^0.5.4",karma:"^2.0.5","karma-chai":"^0.1.0","karma-chrome-launcher":"^2.0.0","karma-mocha":"^1.3.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-typescript":"^3.0.12","karma-typescript-es6-transform":"^1.0.4","karma-webpack":"^2.0.3",mocha:"^3.5.3","npm-run-all":"^4.1.3","raw-loader":"^0.5.1",sinon:"^2.4.1","sinon-chai":"^2.11.0","thread-loader":"^1.2.0","ts-loader":"^4.4.2",typescript:"~3.0.0","url-loader":"^0.5.7",webpack:"^4.16.1","webpack-cli":"^3.0.8"},dependencies:{"@jupyter-widgets/base":"^1.0.0","css-loader":"^0.28.4",d3:"~4.6.0","gl-matrix":"^2.0.0","is-typedarray":"~1.0.0",jquery:"^3.1.1",mqtt:"^2.11.0",mustache:"^2.3.1",ndarray:"~1.0.18","ndarray-pack":"^1.2.1",screenfull:"^3.3.1","style-loader":"^0.18.2",three:"^0.91.0","three-text2d":"~0.4.1",underscore:"^1.8.3","webrtc-adapter":"^4.2.2"},files:["dist/","css/","src/","lib/","data/","glsl/"]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(9),o=n(0),a=n(13);const s=n(28);var u=n(7).semver_range,c=n(75),l=i.WidgetView.extend({render:function(){this.renderer=this.options.parent,this.previous_values={},this.attributes_changed={},window.last_scatter=this,this.texture_loader=new o.TextureLoader,this.textures=null,this.model.get("texture")&&this._load_textures(),this.geo_diamond=new o.SphereGeometry(1,2,2),this.geo_sphere=new o.SphereGeometry(.5,12,12),this.geo_box=new o.BoxGeometry(1,1,1),this.geo_cat=new o.Geometry;for(var t=0;t<c.vertices.length;t++){var e=new o.Vector3(c.vertices[t][1],c.vertices[t][2],c.vertices[t][0]);this.geo_cat.vertices.push(e)}for(t=0;t<c.indices.length;){for(var n=[],r=0,i=!1;!i;)n.push(c.indices[t]),r++,c.indices[t]<0&&(i=!0),t++;n[r-1]=-1-n[r-1];for(var a=0;a<n.length-2;a++){var s=new o.Face3(n[0],n[1+a],n[2+a]);this.geo_cat.faces.push(s)}}this.geo_square_2d=new o.PlaneGeometry(2,2,1,1),this.geo_point_2d=new o.PlaneGeometry(.1,.1,1,1),this.geo_triangle_2d=new o.CircleGeometry(1,3,Math.PI/2),this.geo_circle_2d=new o.CircleGeometry(1,32,Math.PI/2),this.geo_arrow=new o.CylinderGeometry(0,.2,1),this.geos={diamond:this.geo_diamond,box:this.geo_box,arrow:this.geo_arrow,sphere:this.geo_sphere,cat:this.geo_cat,square_2d:this.geo_square_2d,point_2d:this.geo_point_2d,circle_2d:this.geo_circle_2d,triangle_2d:this.geo_triangle_2d},this.uniforms={xlim:{type:"2f",value:[0,1]},ylim:{type:"2f",value:[0,1]},zlim:{type:"2f",value:[0,1]},animation_time_x:{type:"f",value:1},animation_time_y:{type:"f",value:1},animation_time_z:{type:"f",value:1},animation_time_vx:{type:"f",value:1},animation_time_vy:{type:"f",value:1},animation_time_vz:{type:"f",value:1},animation_time_size:{type:"f",value:1},animation_time_color:{type:"f",value:1},texture:{type:"t",value:null},texture_previous:{type:"t",value:null}},this.material=this.model.get("material").obj.clone(),this.material_rgb=this.model.get("material").obj.clone(),this.line_material=this.model.get("line_material").obj.clone(),this.line_material_rgb=this.model.get("line_material").obj.clone(),this.materials=[this.material,this.material_rgb,this.line_material,this.line_material_rgb],this._update_materials(),this.model.get("material").on("change",()=>{this._update_materials(),this.renderer.update()}),this.model.get("line_material").on("change",()=>{this._update_materials(),this.renderer.update()}),this.create_mesh(),this.add_to_scene(),this.model.on("change:size change:size_selected change:color change:color_selected change:sequence_index change:x change:y change:z change:selected change:vx change:vy change:vz",this.on_change,this),this.model.on("change:geo change:connected",this.update_,this),this.model.on("change:texture",this._load_textures,this),this.model.on("change:visible",this.update_visibility,this),this.model.on("change:geo",()=>{this._update_materials(),this.renderer.update()})},_load_textures:function(){var t=this.model.get("texture");t.stream?(this.textures=null,this.texture_video=document.createElement("video"),t.stream.then(r.bind(function(t){this.texture_video.src=window.URL.createObjectURL(t);var e=new o.VideoTexture(this.texture_video);e.minFilter=o.LinearFilter,this.textures=[e],this.update_()},this))):this.textures=r.map(this.model.get("texture"),function(t){return this.texture_loader.load(t,r.bind(function(t){t.wrapS=o.RepeatWrapping,t.wrapT=o.RepeatWrapping,this.update_()},this))},this)},update_visibility:function(){this._update_materials(),this.renderer.update()},set_limits:function(t){r.mapObject(t,function(t,e){this.material.uniforms[e].value=t},this)},add_to_scene:function(){this.renderer.scene_scatter.add(this.mesh),this.line_segments&&this.renderer.scene_scatter.add(this.line_segments)},remove_from_scene:function(){-1==this.renderer.scene_scatter.children.indexOf(this.mesh)&&console.warn("trying to removing scatter mesh from scene that does not include it"),this.renderer.scene_scatter.remove(this.mesh),this.mesh.geometry.dispose(),this.line_segments&&(this.renderer.scene_scatter.remove(this.line_segments),this.line_segments.geometry.dispose())},on_change:function(t){r.mapObject(this.model.changedAttributes(),function(t,e){this.previous_values[e]=this.model.previous(e);var n=e.replace("_selected","");if("sequence_index"==n){r.each(["x","y","z","vx","vy","vz","size","color"],function(t){r.isArray(this.model.get(t))&&(this.attributes_changed[t]=[t,"sequence_index"])},this)}else"geo"==n||("selected"==n?(this.attributes_changed.color=[e],this.attributes_changed.size=[]):(this.attributes_changed[n]=[e],-1!=["x","y","z","vx","vy","vz","color"].indexOf(n)&&(this.attributes_changed.size=[])))},this),this.update_()},update_:function(){this.remove_from_scene(),this.create_mesh(),this.add_to_scene(),this.renderer.update()},_get_value:function(t,e,n){n=n;return t?r.isArray(t)&&!r.isNumber(t[0])?t[e%t.length]:t:n},get_current:function(t,e,n){return this._get_value(this.model.get(t),e,n)},get_previous:function(t,e,n){return this._get_value(this.previous_values[t]||this.model.get(t),e,n)},_get_value_vec3:function(t,e,n){n=n;return t?r.isArray(t)?t[e%t.length]:t:n},get_current_vec3:function(t,e,n){return this._get_value_vec3(this.model.get(t),e,n)},get_previous_vec3:function(t,e,n){return this._get_value_vec3(this.previous_values[t]||this.model.get(t),e,n)},_update_materials:function(){this.material.copy(this.model.get("material").obj),this.material_rgb.copy(this.model.get("material").obj),this.line_material.copy(this.model.get("line_material").obj),this.line_material_rgb.copy(this.model.get("line_material").obj),this.line_material_rgb.linewidth=this.line_material.linewidth=this.model.get("line_material").obj.linewidth,this.material.extensions={derivatives:!0},this.material_rgb.defines={USE_RGB:!0},this.material_rgb.extensions={derivatives:!0},this.line_material.defines={AS_LINE:!0},this.line_material_rgb.defines={USE_RGB:!0,AS_LINE:!0},this.material.visible=this.material.visible&&this.model.get("visible"),this.material_rgb.visible=this.material.visible&&this.model.get("visible"),this.line_material.visible=this.line_material.visible&&this.model.get("visible"),this.line_material_rgb.visible=this.line_material.visible&&this.model.get("visible"),this.materials.forEach(t=>{t.vertexShader=n(76),t.fragmentShader=n(77),t.uniforms=r.extend({},t.uniforms,this.uniforms),t.depthWrite=!0,t.transparant=!0,t.depthTest=!0,t.needsUpdate=!0});var t=this.model.get("geo").endsWith("2d");(t&&(this.material.defines.USE_SPRITE=!0,this.material_rgb.defines.USE_SPRITE=!0),t)&&(this.model.get("texture")&&this.textures&&(this.material.defines.USE_TEXTURE=!0));this.material.needsUpdate=!0,this.material_rgb.needsUpdate=!0,this.line_material.needsUpdate=!0,this.line_material_rgb.needsUpdate=!0},create_mesh:function(){var t=this.model.get("geo");t||(t="diamond");var e=t.endsWith("2d"),n=(new o.BufferGeometry).fromGeometry(this.geos[t]),i=new o.InstancedBufferGeometry,a=n.attributes.position.clone();i.addAttribute("position",a);var u=this.model.get("sequence_index"),c=this.previous_values.sequence_index;void 0===c&&(c=u);var l=["x","y","z","vx","vy","vz","size","size_selected"],h=["color","color_selected"],f=new s.Values(l,[],r.bind(this.get_current,this),u,h),d=new s.Values(l,[],r.bind(this.get_previous,this),c,h);0==Math.max(f.length,d.length)&&console.error("no single member is an array, not supported (yet?)"),f.trim(f.length),d.trim(d.length);var p=d.length,_=f.length;if(this.model.get("selected")||this.previous_values.selected){f.ensure_array(["size","size_selected","color","color_selected"]),d.ensure_array(["size","size_selected","color","color_selected"]);var m=this.get_current("selected",u,[]);f.select(m);m=this.get_previous("selected",c,[]);d.select(m)}(f.length!=d.length&&(f.ensure_array("size"),d.ensure_array("size")),f.length>d.length?(d.pad(f),d.array.size.fill(0,p)):f.length<d.length&&(f.pad(d),f.array.size.fill(0,_)),f.merge_to_vec3(["vx","vy","vz"],"v"),d.merge_to_vec3(["vx","vy","vz"],"v"),f.pop(["size_selected","color_selected"]),d.pop(["size_selected","color_selected"]),f.add_attributes(i),d.add_attributes(i,"_previous"),e)&&(this.model.get("texture")&&this.textures&&(this.material.uniforms.texture.value=this.textures[u%this.textures.length],this.material.uniforms.texture_previous.value=this.textures[c%this.textures.length]));if(this.mesh=new o.Mesh(i,this.material),this.mesh.material_rgb=this.material_rgb,this.mesh.material_normal=this.material,this.model.get("connected")){var v=new o.BufferGeometry;f.merge_to_vec3(["x","y","z"],"vertices"),d.merge_to_vec3(["x","y","z"],"vertices"),v.addAttribute("position",new o.BufferAttribute(f.array_vec3.vertices,3)),v.addAttribute("position_previous",new o.BufferAttribute(d.array_vec3.vertices,3)),f.ensure_array(["color"]),d.ensure_array(["color"]),v.addAttribute("color",new o.BufferAttribute(f.array_vec4.color,4)),v.addAttribute("color_previous",new o.BufferAttribute(d.array_vec4.color,4)),this.line_segments=new o.Line(v,this.line_material),this.line_segments.frustumCulled=!1}else this.line_segments=null;r.mapObject(this.attributes_changed,function(t,e){var n="animation_time_"+e;this.renderer.transition(function(t){this.material.uniforms[n].value=t},function(){r.each(t,function(t){delete this.previous_values[t]},this)},this)},this),this.attributes_changed={}}}),h=i.WidgetModel.extend({defaults:function(){return r.extend(i.WidgetModel.prototype.defaults(),{_model_name:"ScatterModel",_view_name:"ScatterView",_model_module:"ipyvolume",_view_module:"ipyvolume",_model_module_version:u,_view_module_version:u,size:5,size_selected:7,color:"red",color_selected:"white",geo:"diamond",sequence_index:0,connected:!1,visible:!0,selected:null})}},{serializers:r.extend({x:a.array_or_json,y:a.array_or_json,z:a.array_or_json,vx:a.array_or_json,vy:a.array_or_json,vz:a.array_or_json,selected:a.array_or_json,size:a.array_or_json,size_selected:a.array_or_json,color:a.color_or_json,color_selected:a.color_or_json,texture:a.texture,material:{deserialize:i.unpack_models},line_material:{deserialize:i.unpack_models}},i.WidgetModel.serializers)});t.exports={ScatterView:l,ScatterModel:h}},function(t,e,n){"use strict";var r=n(17),i=n(70);t.exports=function(t,e){for(var n=[],o=t,a=1;Array.isArray(o);)n.push(o.length),a*=o.length,o=o[0];return 0===n.length?r():(e||(e=r(new Float64Array(a),n)),i(e,t),e)}},function(t,e,n){"use strict";const r=n(6),i=n(0),o=n(7);class a{constructor(t,e,n,s,u){this.length=1/0,this.scalar={},this.scalar_vec3={},this.scalar_vec4={},this.array={},this.array_vec3={},this.array_vec4={},this.values={},this.trim=(t=>{this.array=r.mapObject(this.array,function(e){return e.length===t?e:e.slice(0,t)}),this.array_vec3=r.mapObject(this.array_vec3,function(e){return e.length===3*t?e:e.slice(0,3*t)}),this.array_vec4=r.mapObject(this.array_vec4,e=>e.length===4*t?e:e.slice(0,4*t)),this.length=t}),this.ensure_array=(t=>{let e=r.isArray(t)?t:[t];r.each(e,t=>{if(void 0!==this.scalar[t]){(this.array[t]=new Float32Array(this.length)).fill(this.scalar[t]),delete this.scalar[t],delete this.values[t]}let e=this.scalar_vec3[t],n=this.scalar_vec4[t];if(void 0!==e){let n=this.array_vec3[t]=new Float32Array(3*this.length);for(let t=0;t<this.length;t++)n[3*t+0]=e[0],n[3*t+1]=e[1],n[3*t+2]=e[2];delete this.scalar_vec3[t],delete this.values[t]}if(void 0!==n){this.array_vec4[t]=new Float32Array(4*this.length);let e=this.array_vec4[t];for(let t=0;t<this.length;t++)e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3];delete this.scalar_vec4[t],delete this.values[t]}})}),this.grow=(t=>{this.array=r.mapObject(this.array,e=>{let n=new e.constructor(t);return n.set(e),n}),this.array_vec3=r.mapObject(this.array_vec3,e=>{let n=new e.constructor(3*t);return n.set(e),n}),this.length=length}),this.pad=(t=>{this.array=r.mapObject(this.array,(e,n)=>{let r=new e.constructor(t.length);return void 0===t.array[n]?r.fill(t.scalar[n],this.length):r.set(t.array[n].slice(this.length),this.length),r.set(e),r}),this.array_vec3=r.mapObject(this.array_vec3,(e,n)=>{let r=new e.constructor(3*t.length);if(void 0===t.array_vec3[n]){let e=t.scalar_vec3[n];for(let n=this.length;n<t.length;n++)r[3*n+0]=e[0],r[3*n+1]=e[1],r[3*n+2]=e[2]}else r.set(t.array_vec3[n].slice(3*this.length),3*this.length);return r.set(e),r}),this.array_vec4=r.mapObject(this.array_vec4,(e,n)=>{let r=new e.constructor(4*t.length);if(void 0===t.array_vec4[n]){let e=t.scalar_vec4[n];for(let n=this.length;n<t.length;n++)r[4*n+0]=e[0],r[4*n+1]=e[1],r[4*n+2]=e[2],r[4*n+3]=e[3]}else r.set(t.array_vec4[n].slice(4*this.length),4*this.length);return r.set(e),r}),this.length=t.length}),this.select=(t=>{let e=this.array.size=this.array.size.slice(),n=this.array.size_selected,i=this.array_vec4.color=this.array_vec4.color.slice(),o=this.array_vec4.color_selected;r.each(t,t=>{t<this.length&&(e[t]=n[t],i[4*t+0]=o[4*t+0],i[4*t+1]=o[4*t+1],i[4*t+2]=o[4*t+2],i[4*t+3]=o[4*t+3])})}),this.merge_to_vec3=((t,e)=>{let n=t.length,i=new Float32Array(this.length*n);r.each(t,(t,e)=>{this.ensure_array(t);let r=this.array[t];for(let t=0;t<this.length;t++)i[t*n+e]=r[t];delete this.array[t],delete this.values[t]}),this.array_vec3[e]=i}),this.pop=(t=>{let e=r.isArray(t)?t:[t];r.each(e,t=>{r.each([this.scalar,this.scalar_vec3,this.array,this.array_vec3],e=>{void 0!==e[t]&&delete e[t]})})}),this.add_attributes=((t,e)=>{e=e||"",r.each(this.array,(n,r)=>{if(-1===r.indexOf("selected")){let o=new i.InstancedBufferAttribute(n,1,1);t.addAttribute(r+e,o)}}),r.each(this.array_vec3,(n,r)=>{if(-1===r.indexOf("selected")){let o=new i.InstancedBufferAttribute(n,3,1);o.normalized=-1!==r.indexOf("color"),t.addAttribute(r+e,o)}}),r.each(this.array_vec4,(n,r)=>{if(-1===r.indexOf("selected")){let o=new i.InstancedBufferAttribute(n,4,1);o.normalized=-1!==r.indexOf("color"),t.addAttribute(r+e,o)}}),r.each(this.scalar,(n,r)=>{if(-1===r.indexOf("selected")){let o=new i.InstancedBufferAttribute(new Float32Array([n]),1,this.length);t.addAttribute(r+e,o)}}),r.each(this.scalar_vec3,(n,r)=>{if(-1===r.indexOf("selected")){let o=new i.InstancedBufferAttribute(n,3,this.length);o.normalized=-1!=r.indexOf("color"),t.addAttribute(r+e,o)}}),r.each(this.scalar_vec4,(n,r)=>{if(-1===r.indexOf("selected")){let o=new i.InstancedBufferAttribute(n,4,this.length);o.normalized=-1!=r.indexOf("color"),t.addAttribute(r+e,o)}})}),r.each(t,t=>{let e=n(t,s,a.defaults[t]);o.is_typedarray(e)?("selected"!=t&&(this.length=Math.min(this.length,e.length)),this.array[t]=e):this.scalar[t]=e,this.values[t]=e}),r.each(e,t=>{let e=n(t,s,a.defaults[t]);if(-1!==t.indexOf("color")&&"string"==typeof e){let t=new i.Color(e);e=new Float32Array([t.r,t.g,t.b])}o.is_typedarray(e)&&e.length>3?(this.array_vec3[t]=e,this.length=Math.min(this.length,e.length/3)):this.scalar_vec3[t]=e,this.values[t]=e}),r.each(u,t=>{let e=n(t,s,a.defaults[t]);if(-1!==t.indexOf("color")&&"string"==typeof e){let t=new i.Color(e);e=new Float32Array([t.r,t.g,t.b,1])}o.is_typedarray(e)&&e.length>4?(this.array_vec4[t]=e,this.length=Math.min(this.length,e.length/4)):this.scalar_vec4[t]=e,this.values[t]=e})}}a.defaults={vx:0,vy:1,vz:0,x:0,y:0,z:0,size:0},t.exports={Values:a}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(9),o=n(0),a=n(13);const s=n(28);var u=n(7).semver_range,c=i.WidgetView.extend({render:function(){this.renderer=this.options.parent,this.previous_values={},this.attributes_changed={},window.last_mesh=this,this.meshes=[],this.texture_loader=new o.TextureLoader,this.textures=null,this.model.get("texture")&&this._load_textures(),this.uniforms={xlim:{type:"2f",value:[0,1]},ylim:{type:"2f",value:[0,1]},zlim:{type:"2f",value:[0,1]},animation_time_x:{type:"f",value:1},animation_time_y:{type:"f",value:1},animation_time_z:{type:"f",value:1},animation_time_u:{type:"f",value:1},animation_time_v:{type:"f",value:1},animation_time_color:{type:"f",value:1},animation_time_texture:{type:"f",value:1},texture:{type:"t",value:null},texture_previous:{type:"t",value:null}},this.material=this.model.get("material").obj.clone(),this.material_rgb=this.model.get("material").obj.clone(),this.line_material=this.model.get("line_material").obj.clone(),this.line_material_rgb=this.model.get("line_material").obj.clone(),this.materials=[this.material,this.material_rgb,this.line_material,this.line_material_rgb],this._update_materials(),this.model.get("material").on("change",()=>{this._update_materials(),this.renderer.update()}),this.model.get("line_material").on("change",()=>{this._update_materials(),this.renderer.update()}),this.create_mesh(),this.add_to_scene(),this.model.on("change:color change:sequence_index change:x change:y change:z change:v change:u change:triangles change:lines",this.on_change,this),this.model.on("change:geo change:connected",this.update_,this),this.model.on("change:texture",this._load_textures,this),this.model.on("change:visible",this.update_visibility,this)},update_visibility:function(){this._update_materials(),this.renderer.update()},_load_textures:function(){var t=this.model.get("texture");t.stream?(this.textures=null,this.texture_video=document.createElement("video"),t.stream.then(r.bind(function(t){this.texture_video.srcObject=t,this.texture_video.play();var e=new o.VideoTexture(this.texture_video);e.minFilter=o.LinearFilter,this.textures=[e],this._update_materials(),this.update_()},this))):this.textures=r.map(this.model.get("texture"),function(t){return this.texture_loader.load(t,r.bind(function(t){t.wrapS=o.RepeatWrapping,t.wrapT=o.RepeatWrapping,this._update_materials(),this.update_()},this))},this)},set_limits:function(t){r.mapObject(t,function(t,e){this.material.uniforms[e].value=t},this)},add_to_scene:function(){r.each(this.meshes,function(t){this.renderer.scene_scatter.add(t)},this)},remove_from_scene:function(){r.each(this.meshes,function(t){this.renderer.scene_scatter.remove(t),t.geometry.dispose()},this)},on_change:function(t){r.mapObject(this.model.changedAttributes(),function(t,e){this.previous_values[e]=this.model.previous(e);var n=e.replace("_selected","");if("sequence_index"==n){r.each(["x","y","z","u","v","color"],function(t){r.isArray(this.model.get(t))&&this.model.get(t).length>1&&(this.attributes_changed[t]=[t,"sequence_index"])},this),this.attributes_changed.texture=["texture","sequence_index"]}else"triangles"==n||"lines"==n||("selected"==n?this.attributes_changed.color=[e]:(this.attributes_changed[n]=[e],["x","y","z","u","v","color"].indexOf(n)))},this),this.update_()},update_:function(){this.remove_from_scene(),this.create_mesh(),this.add_to_scene(),this.renderer.update()},_get_value:function(t,e,n){n=n;if(!t)return n;if(r.isArray(t)&&!r.isNumber(t[0])){var i=e%t.length,o=t.original_data[i].shape[0];if(3===t.original_data[i].shape[1]&&r.isNumber(t[i][0])){for(var a=new Float32Array(4*o),s=t[i],u=0;u<o;u++)a[4*u]=s[3*u],a[4*u+1]=s[3*u+1],a[4*u+2]=s[3*u+2],a[4*u+3]=1;return a}return t[i]}return t},get_current:function(t,e,n){return this._get_value(this.model.get(t),e,n)},get_previous:function(t,e,n){return this._get_value(this.previous_values[t]||this.model.get(t),e,n)},_get_value_vec3:function(t,e,n){n=n;return t?r.isArray(t)?t[e%t.length]:t:n},get_current_vec3:function(t,e,n){return this._get_value_vec3(this.model.get(t),e,n)},get_previous_vec3:function(t,e,n){return this._get_value_vec3(this.previous_values[t]||this.model.get(t),e,n)},_update_materials:function(){this.material.copy(this.model.get("material").obj),this.material_rgb.copy(this.model.get("material").obj),this.line_material.copy(this.model.get("line_material").obj),this.line_material_rgb.copy(this.model.get("line_material").obj),this.material_rgb.defines={USE_RGB:!0},this.line_material.defines={AS_LINE:!0},this.line_material_rgb.defines={AS_LINE:!0,USE_RGB:!0},this.material.extensions={derivatives:!0},this.material.visible=this.material.visible&&this.model.get("visible"),this.material_rgb.visible=this.material.visible&&this.model.get("visible"),this.line_material.visible=this.line_material.visible&&this.model.get("visible"),this.line_material_rgb.visible=this.line_material.visible&&this.model.get("visible"),this.materials.forEach(t=>{t.vertexShader=n(78),t.fragmentShader=n(79),t.uniforms=this.uniforms,t.depthWrite=!0,t.transparant=!0,t.depthTest=!0}),this.model.get("texture")&&this.textures&&(this.material.defines.USE_TEXTURE=!0),this.material.needsUpdate=!0,this.material_rgb.needsUpdate=!0,this.line_material.needsUpdate=!0,this.line_material_rgb.needsUpdate=!0},create_mesh:function(){var t,e;this.meshes=[];var n,i,a=t=this.model.get("sequence_index"),u=e=a;void 0!==this.previous_values.sequence_index&&(u=e=this.previous_values.sequence_index),a>=u?(n=u-Math.floor(u),i=a-u,a=Math.ceil(a),(u=Math.floor(u))==e&&a==t||a-u>1&&(i=t-(u=a-1),n=0)):(n=Math.ceil(u)-u,i=u-a,a=Math.floor(a),(u=Math.ceil(u))==e&&a==t||u-a>1&&(n=0,i=(u=a+1)-t)),i>1&&0==(i%=1)&&(i=1),0==i&&(i=1);var c=["x","y","z","u","v"],l=["color"],h=new s.Values(c,[],r.bind(this.get_current,this),a,l),f=new s.Values(c,[],r.bind(this.get_previous,this),u,l);0==Math.max(h.length,f.length)&&console.error("no single member is an array, not supported (yet?)"),h.trim(h.length),f.trim(f.length);f.length,h.length;h.length>f.length?f.pad(h):h.length<f.length&&h.pad(f),h.merge_to_vec3(["x","y","z"],"vertices"),f.merge_to_vec3(["x","y","z"],"vertices"),h.ensure_array(["color"]),f.ensure_array(["color"]);var d=this.model.get("triangles");if(d){d=d[0],(w=new o.BufferGeometry).addAttribute("position",new o.BufferAttribute(h.array_vec3.vertices,3)),w.addAttribute("position_previous",new o.BufferAttribute(f.array_vec3.vertices,3)),w.addAttribute("color",new o.BufferAttribute(h.array_vec4.color,4)),w.addAttribute("color_previous",new o.BufferAttribute(f.array_vec4.color,4)),w.setIndex(new o.BufferAttribute(d,1));var p=this.model.get("texture"),_=h.array.u,m=h.array.v;if(p&&_&&m&&this.textures){var v=a;this.material.uniforms.texture.value=this.textures[v%this.textures.length],this.material.uniforms.texture_previous.value=this.textures[u%this.textures.length],w.addAttribute("u",new o.BufferAttribute(_,1)),w.addAttribute("v",new o.BufferAttribute(m,1));var g=f.array.u,y=f.array.v;w.addAttribute("u_previous",new o.BufferAttribute(g,1)),w.addAttribute("v_previous",new o.BufferAttribute(y,1))}this.surface_mesh=new o.Mesh(w,this.material),this.surface_mesh.frustumCulled=!1,this.surface_mesh.material_rgb=this.material_rgb,this.surface_mesh.material_normal=this.material,this.meshes.push(this.surface_mesh)}var b=this.model.get("lines");if(b){var w;(w=new o.BufferGeometry).addAttribute("position",new o.BufferAttribute(h.array_vec3.vertices,3)),w.addAttribute("position_previous",new o.BufferAttribute(f.array_vec3.vertices,3));var x=new o.BufferAttribute(h.array_vec4.color,4);x.normalized=!0,w.addAttribute("color",x);var M=new o.BufferAttribute(f.array_vec4.color,4);M.normalized=!0,w.addAttribute("color_previous",M);var E=new Uint32Array(b[0]);w.setIndex(new o.BufferAttribute(E,1)),this.line_segments=new o.LineSegments(w,this.line_material),this.line_segments.frustumCulled=!1,this.line_segments.material_rgb=this.line_material_rgb,this.line_segments.material_normal=this.line_material,this.meshes.push(this.line_segments)}else this.line_segments=null;r.mapObject(this.attributes_changed,function(t,e){var o="animation_time_"+e;this.renderer.transition(function(t){this.material.uniforms[o].value=n+i*t},function(){r.each(t,function(t){delete this.previous_values[t]},this)},this)},this),this.attributes_changed={}}}),l=i.WidgetModel.extend({defaults:function(){return r.extend(i.WidgetModel.prototype.defaults(),{_model_name:"MeshModel",_view_name:"MeshView",_model_module:"ipyvolume",_view_module:"ipyvolume",_model_module_version:u,_view_module_version:u,color:"red",sequence_index:0,connected:!1,visible:!0,visible_lines:!0,visible_faces:!0})}},{serializers:r.extend({x:a.array_or_json,y:a.array_or_json,z:a.array_or_json,u:a.array_or_json,v:a.array_or_json,triangles:a.array_or_json,lines:a.array_or_json,color:a.color_or_json,texture:a.texture,material:{deserialize:i.unpack_models},line_material:{deserialize:i.unpack_models}},i.WidgetModel.serializers)});t.exports={MeshView:c,MeshModel:l}},function(t,e,n){var r=n(6),i=n(9),o=n(0),a=(n(13),n(7).semver_range),s={};s.box_fragment=n(80),s.box_vertex=n(81);var u=i.WidgetView.extend({render:function(){this.renderer=this.options.parent,this.attributes_changed={},this.data=[],window.last_volume_view=this;this.renderer.getRenderSize();this.vol_box_geo=new o.BoxBufferGeometry(1,1,1),this.box_material=new o.ShaderMaterial({uniforms:{offset:{type:"3f",value:[0,0,0]},scale:{type:"3f",value:[1,1,1]}},fragmentShader:s.box_fragment,vertexShader:s.box_vertex,side:o.BackSide}),this.vol_box_mesh=new o.Mesh(this.vol_box_geo,this.box_material),this.vol_box_mesh.updateMatrix(),this.vol_box_mesh.matrixAutoUpdate=!0,this.texture_loader=new o.TextureLoader,this.texture_tf=null,this.uniform_volumes_values={},this.uniform_data={type:"tv",value:[]},this.uniform_transfer_function={type:"tv",value:[]},this.tf_set(),this.data_set();var t=()=>{this.renderer.rebuild_multivolume_rendering_material(),this.renderer.update()};this.model.on("change:rendering_method",t),t(),this.add_to_scene(),this.model.on("change:data",this.data_set,this);var e=()=>{this.uniform_volumes_values.data_range=[this.model.get("data_min"),this.model.get("data_max")],this.uniform_volumes_values.show_range=[this.model.get("show_min"),this.model.get("show_max")],this.renderer.rebuild_multivolume_rendering_material(),this.renderer.update()};this.model.on("change:data_min change:data_max change:show_min change:show_max",e,this),e();var n=()=>{this.uniform_volumes_values.clamp_min=this.model.get("clamp_min"),this.uniform_volumes_values.clamp_max=this.model.get("clamp_max"),this.renderer.rebuild_multivolume_rendering_material(),this.renderer.update()};this.model.on("change:clamp_min change:clamp_max",n,this),n();var r=()=>{this.uniform_volumes_values.opacity_scale=this.model.get("opacity_scale"),this.renderer.rebuild_multivolume_rendering_material(),this.renderer.update()};r(),this.model.on("change:opacity_scale",r);var i=()=>{this.uniform_volumes_values.lighting=this.model.get("lighting"),this.renderer.rebuild_multivolume_rendering_material(),this.renderer.update()};i(),this.model.on("change:lighting",i);var a=()=>{this.renderer.rebuild_multivolume_rendering_material(),this.renderer.update()};a(),this.model.on("change:ray_steps",a);var u=()=>{this.uniform_volumes_values.brightness=this.model.get("brightness"),this.renderer.rebuild_multivolume_rendering_material(),this.renderer.update()};u(),this.model.on("change:brightness",u),this.model.on("change:tf",this.tf_set,this),this.model.on("change:extent",()=>{this.renderer.rebuild_multivolume_rendering_material(),this.renderer.update()}),window.last_volume=this},get_ray_steps:function(){var t=this.model.get("ray_steps");return null==t&&(t=r.max(this.data_shape)),t},is_max_intensity(){return"MAX_INTENSITY"==this.model.get("rendering_method")},is_normal(){return"NORMAL"==this.model.get("rendering_method")},data_set:function(){this.volume=this.model.get("data");var t=new Uint8Array(this.volume.tiles.buffer);this.texture_volume=new o.DataTexture(t,this.volume.image_shape[0],this.volume.image_shape[1],o.RGBAFormat,o.UnsignedByteType),this.texture_volume.magFilter=o.LinearFilter,this.texture_volume.minFilter=o.LinearFilter,this.uniform_volumes_values.rows=this.volume.rows,this.uniform_volumes_values.columns=this.volume.columns,this.uniform_volumes_values.slices=this.volume.slices,this.uniform_volumes_values.size=this.volume.image_shape,this.uniform_volumes_values.slice_size=this.volume.slice_shape,this.uniform_data.value=[this.texture_volume],this.uniform_data.value=[this.texture_volume],this.uniform_volumes_values.data_range=[this.model.get("data_min"),this.model.get("data_max")],this.uniform_volumes_values.show_range=[this.model.get("show_min"),this.model.get("show_max")],this.texture_volume.needsUpdate=!0,this.data_shape=[this.volume.slice_shape[0],this.volume.slice_shape[1],this.volume.slices],this.renderer.rebuild_multivolume_rendering_material(),this.renderer.update()},tf_set:function(){this.model.get("tf")&&(this.model.get("tf").on("change:rgba",this.tf_changed,this),this.tf_changed())},tf_changed:function(){var t=this.model.get("tf");t&&(this.texture_tf=new o.DataTexture(t.get_data_array(),t.get("rgba").shape[0],1,o.RGBAFormat,o.UnsignedByteType),this.texture_tf.needsUpdate=!0,this.uniform_transfer_function.value=[this.texture_tf]),this.renderer.rebuild_multivolume_rendering_material(),this.renderer.update()},set_limits:function(t){var e=t.xlim,n=t.ylim,r=t.zlim,i=e[1]-e[0],a=n[1]-n[0],s=r[1]-r[0],u=this.model.get("extent"),c=(u[0][0]-e[0])/i,l=(u[0][1]-e[0])/i,h=(u[1][0]-n[0])/a,f=(u[1][1]-n[0])/a,d=(u[2][0]-r[0])/s,p=(u[2][1]-r[0])/s,_=Math.max(c,0),m=Math.min(l,1),v=Math.max(h,0),g=Math.min(f,1),y=Math.max(d,0),b=Math.min(p,1);this.box_geo=new o.BoxBufferGeometry(1,1,1),this.box_geo.translate(.5,.5,.5),this.box_geo.scale(m-_,g-v,b-y),this.box_geo.translate(_,v,y),this.box_geo.translate(-.5,-.5,-.5),this.vol_box_mesh.geometry=this.box_geo,this.uniform_volumes_values.scale=[1/(l-c),1/(f-h),1/(p-d)],this.uniform_volumes_values.offset=[-c,-h,-d]},add_to_scene:function(){this.renderer.scene_volume.add(this.vol_box_mesh)},remove_from_scene:function(){this.renderer.scene_volume.remove(this.vol_box_mesh)}}),c=i.WidgetModel.extend({defaults:function(){return r.extend(i.WidgetModel.prototype.defaults(),{_model_name:"VolumeModel",_view_name:"VolumeView",_model_module:"ipyvolume",_view_module:"ipyvolume",_model_module_version:a,_view_module_version:a,sequence_index:0,step_size:.01,opacity_scale:1,brightness:1,extent:null,lighting:!0,rendering_method:"NORMAL",clamp_min:!1,clamp_max:!1,data_range:null,show_range:null,show_min:0,show_max:1,data_min:0,data_max:1,ray_steps:null})}},{serializers:r.extend({tf:{deserialize:i.unpack_models},data:{serialize:t=>t}},i.DOMWidgetModel.serializers)});t.exports={VolumeView:u,VolumeModel:c}},function(t,e,n){"use strict";(function(e){var r=n(18),i=n(14).Readable,o={objectMode:!0},a={clean:!0};function s(t){if(!(this instanceof s))return new s(t);this.options=t||{},this.options=r(a,t),this._inflights={}}s.prototype.put=function(t,e){return this._inflights[t.messageId]=t,e&&e(),this},s.prototype.createStream=function(){var t=new i(o),n=this._inflights,r=Object.keys(this._inflights),a=!1,s=0;return t._read=function(){!a&&s<r.length?this.push(n[r[s++]]):this.push(null)},t.destroy=function(){if(!a){var t=this;a=!0,e.nextTick(function(){t.emit("close")})}},t},s.prototype.del=function(t,e){return(t=this._inflights[t.messageId])?(delete this._inflights[t.messageId],e(null,t)):e&&e(new Error("missing packet")),this},s.prototype.get=function(t,e){return(t=this._inflights[t.messageId])?e(null,t):e&&e(new Error("missing packet")),this},s.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},t.exports=s}).call(this,n(1))},function(t,e,n){"use strict";(function(e,r){var i=n(11);t.exports=y;var o,a=n(33);y.ReadableState=g;n(10).EventEmitter;var s=function(t,e){return t.listeners(e).length},u=n(34),c=n(4).Buffer,l=e.Uint8Array||function(){};var h=n(12);h.inherits=n(5);var f=n(97),d=void 0;d=f&&f.debuglog?f.debuglog("stream"):function(){};var p,_=n(98),m=n(35);h.inherits(y,u);var v=["error","close","destroy","pause","resume"];function g(t,e){o=o||n(8),t=t||{},this.objectMode=!!t.objectMode,e instanceof o&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new _,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(37).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function y(t){if(o=o||n(8),!(this instanceof y))return new y(t);this._readableState=new g(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,n,r,i){var o,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,E(t)}(t,a)):(i||(o=function(t,e){var n;(function(t){return c.isBuffer(t)||t instanceof l})(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?w(t,a,e,!1):A(t,a)):w(t,a,e,!1))):r||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function w(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&E(t)),A(t,e)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(t,e){this.push(null),e(t)},y.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),n=!0),b(this,t,e,!1,n)},y.prototype.unshift=function(t){return b(this,t,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(t){return p||(p=n(37).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var x=8388608;function M(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=x?t=x:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function E(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i(S,t):S(t))}function S(t){d("emit readable"),t.emit("readable"),C(t)}function A(t,e){e.readingMore||(e.readingMore=!0,i(k,t,e))}function k(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function T(t){d("readable nexttick read 0"),t.read(0)}function O(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),C(t),e.flowing&&!e.reading&&t.read(0)}function C(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function R(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=c.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0===(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function j(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i(N,e,t))}function N(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function P(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}y.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?j(this):E(this),null;if(0===(t=M(t,e))&&e.ended)return 0===e.length&&j(this),null;var r,i=e.needReadable;return d("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",i=!0),e.ended||e.reading?d("reading or ended",i=!1):i&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=M(n,e))),null===(r=t>0?R(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&j(this)),null!==r&&this.emit("data",r),r},y.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?l:y;function c(e,r){d("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,d("cleanup"),t.removeListener("close",v),t.removeListener("finish",g),t.removeListener("drain",h),t.removeListener("error",m),t.removeListener("unpipe",c),n.removeListener("end",l),n.removeListener("end",y),n.removeListener("data",_),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function l(){d("onend"),t.end()}o.endEmitted?i(u):n.once("end",u),t.on("unpipe",c);var h=function(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,C(t))}}(n);t.on("drain",h);var f=!1;var p=!1;function _(e){d("ondata"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==P(o.pipes,t))&&!f&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function m(e){d("onerror",e),y(),t.removeListener("error",m),0===s(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",g),y()}function g(){d("onfinish"),t.removeListener("close",v),y()}function y(){d("unpipe"),n.unpipe(t)}return n.on("data",_),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",m),t.once("close",v),t.once("finish",g),t.emit("pipe",n),o.flowing||(d("pipe resume"),n.resume()),t},y.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=P(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},y.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&E(this):i(T,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i(O,t,e))}(this,t)),this},y.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;for(var i in t.on("end",function(){if(d("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){(d("wrapped data"),e.decoder&&(i=e.decoder.write(i)),!e.objectMode||null!==i&&void 0!==i)&&((e.objectMode||i&&i.length)&&(r.push(i)||(n=!0,t.pause())))}),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<v.length;o++)t.on(v[o],r.emit.bind(r,v[o]));return r._read=function(e){d("wrapped _read",e),n&&(n=!1,t.resume())},r},y._fromList=R}).call(this,n(2),n(1))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){t.exports=n(10).EventEmitter},function(t,e,n){"use strict";var r=n(11);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;o||a?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r(i,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(r(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";(function(e,r,i){var o=n(11);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=g;var s,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o;g.WritableState=v;var c=n(12);c.inherits=n(5);var l={deprecate:n(101)},h=n(34),f=n(4).Buffer,d=i.Uint8Array||function(){};var p,_=n(35);function m(){}function v(t,e){s=s||n(8),t=t||{},this.objectMode=!!t.objectMode,e instanceof s&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===t.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o(i,r),o(E,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),E(t,e))}(t,n,r,e,i);else{var a=x(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||w(t,n),r?u(b,t,n,a,i):b(t,n,a,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function g(t){if(s=s||n(8),!(p.call(g,this)||this instanceof s))return new g(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function y(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),E(t,e)}function w(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,y(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e)}else{for(;n;){var c=n.chunk,l=n.encoding,h=n.callback;if(y(t,e,!1,e.objectMode?1:c.length,c,l,h),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function M(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),E(t,e)})}function E(t,e){var n=x(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o(M,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(g,h),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||t&&t._writableState instanceof v}})):p=function(t){return t instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(t,e,n){var r=this._writableState,i=!1,a=function(t){return f.isBuffer(t)||t instanceof d}(t)&&!r.objectMode;return a&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=m),r.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o(e,n)}(this,n):(a||function(t,e,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),o(r,a),i=!1),i}(this,r,t,n))&&(r.pendingcb++,i=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,n));return e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else y(t,e,!1,s,r,i,o);return u}(this,r,a,t,e,n)),i},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},g.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},g.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,E(t,e),n&&(e.finished?o(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),g.prototype.destroy=_.destroy,g.prototype._undestroy=_.undestroy,g.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(1),n(99).setImmediate,n(2))},function(t,e,n){"use strict";var r=n(4).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=h,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�".repeat(n);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�".repeat(n+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�".repeat(n+2)}}(this,t,e);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�".repeat(this.lastTotal-this.lastNeed):e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n)return 0;if((i=a(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n)return 0;if((i=a(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=a;var r=n(8),i=n(12);function o(t){this.afterTransform=function(e,n){return function(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n);i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),this._transformState=new o(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,n){s(e,t,n)}):s(e)})}function s(t,e,n){if(e)return t.emit("error",e);null!==n&&void 0!==n&&t.push(n);var r=t._writableState,i=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(5),i.inherits(a,r),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){var r=n(103),i=function(){},o=function(t,e,n){if("function"==typeof e)return o(t,null,e);e||(e={}),n=r(n||i);var a=t._writableState,s=t._readableState,u=e.readable||!1!==e.readable&&t.readable,c=e.writable||!1!==e.writable&&t.writable,l=function(){t.writable||h()},h=function(){c=!1,u||n.call(t)},f=function(){u=!1,c||n.call(t)},d=function(e){n.call(t,e?new Error("exited with error code: "+e):null)},p=function(e){n.call(t,e)},_=function(){return(!u||s&&s.ended)&&(!c||a&&a.ended)?void 0:n.call(t,new Error("premature close"))},m=function(){t.req.on("finish",h)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(t)?c&&!a&&(t.on("end",l),t.on("close",l)):(t.on("complete",h),t.on("abort",_),t.req?m():t.on("request",m)),function(t){return t.stdio&&Array.isArray(t.stdio)&&3===t.stdio.length}(t)&&t.on("exit",d),t.on("end",f),t.on("finish",h),!1!==e.error&&t.on("error",p),t.on("close",_),function(){t.removeListener("complete",h),t.removeListener("abort",_),t.removeListener("request",m),t.req&&t.req.removeListener("finish",h),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",h),t.removeListener("exit",d),t.removeListener("end",f),t.removeListener("error",p),t.removeListener("close",_)}};t.exports=o},function(t,e,n){"use strict";var r=n(4).Buffer,i=t.exports;for(var o in i.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"reserved"},i.codes={},i.types){var a=i.types[o];i.codes[a]=o}function s(t){return[0,1,2].map(function(e){return[0,1].map(function(n){return[0,1].map(function(o){var a=new r(1);return a.writeUInt8(i.codes[t]<<i.CMD_SHIFT|(n?i.DUP_MASK:0)|e<<i.QOS_SHIFT|o,0,!0),a})})})}i.CMD_SHIFT=4,i.CMD_MASK=240,i.DUP_MASK=8,i.QOS_MASK=3,i.QOS_SHIFT=1,i.RETAIN_MASK=1,i.LENGTH_MASK=127,i.LENGTH_FIN_MASK=128,i.SESSIONPRESENT_MASK=1,i.SESSIONPRESENT_HEADER=r.from([i.SESSIONPRESENT_MASK]),i.CONNACK_HEADER=r.from([i.codes.connack<<i.CMD_SHIFT]),i.USERNAME_MASK=128,i.PASSWORD_MASK=64,i.WILL_RETAIN_MASK=32,i.WILL_QOS_MASK=24,i.WILL_QOS_SHIFT=3,i.WILL_FLAG_MASK=4,i.CLEAN_SESSION_MASK=2,i.CONNECT_HEADER=r.from([i.codes.connect<<i.CMD_SHIFT]),i.PUBLISH_HEADER=s("publish"),i.SUBSCRIBE_HEADER=s("subscribe"),i.UNSUBSCRIBE_HEADER=s("unsubscribe"),i.ACKS={unsuback:s("unsuback"),puback:s("puback"),pubcomp:s("pubcomp"),pubrel:s("pubrel"),pubrec:s("pubrec")},i.SUBACK_HEADER=r.from([i.codes.suback<<i.CMD_SHIFT]),i.VERSION3=r.from([3]),i.VERSION4=r.from([4]),i.QOS=[0,1,2].map(function(t){return r.from([t])}),i.EMPTY={pingreq:r.from([i.codes.pingreq<<4,0]),pingresp:r.from([i.codes.pingresp<<4,0]),disconnect:r.from([i.codes.disconnect<<4,0])}},function(t,e,n){"use strict";var r=n(40),i=n(4).Buffer,o=i.allocUnsafe(0),a=i.from([0]),s=n(114),u=n(11),c=s.cache,l=s.generateNumber,h=s.generateCache,f=y,d=!0;function p(t,e){switch(e.cork&&(e.cork(),u(_,e)),d&&(d=!1,h()),t.cmd){case"connect":return function(t,e){var n=t||{},o=n.protocolId||"MQTT",a=n.protocolVersion||4,s=n.will,u=n.clean,c=n.keepalive||0,l=n.clientId||"",h=n.username,d=n.password;void 0===u&&(u=!0);var p=0;if(!o||"string"!=typeof o&&!i.isBuffer(o))return e.emit("error",new Error("Invalid protocolId")),!1;p+=o.length+2;if(3!==a&&4!==a)return e.emit("error",new Error("Invalid protocol version")),!1;p+=1;if("string"!=typeof l&&!i.isBuffer(l)||!l&&4!==a||!l&&!u){if(a<4)return e.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*u==0)return e.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}else p+=l.length+2;if("number"!=typeof c||c<0||c>65535||c%1!=0)return e.emit("error",new Error("Invalid keepalive")),!1;p+=2;if(p+=1,s){if("object"!=typeof s)return e.emit("error",new Error("Invalid will")),!1;if(!s.topic||"string"!=typeof s.topic)return e.emit("error",new Error("Invalid will topic")),!1;if(p+=i.byteLength(s.topic)+2,s.payload&&s.payload){if(!(s.payload.length>=0))return e.emit("error",new Error("Invalid will payload")),!1;"string"==typeof s.payload?p+=i.byteLength(s.payload)+2:p+=s.payload.length+2}else p+=2}if(h){if(!h.length)return e.emit("error",new Error("Invalid username")),!1;p+=i.byteLength(h)+2}if(d){if(!d.length)return e.emit("error",new Error("Invalid password")),!1;p+=x(d)+2}e.write(r.CONNECT_HEADER),v(e,p),w(e,o),e.write(4===a?r.VERSION4:r.VERSION3);var _=0;_|=h?r.USERNAME_MASK:0,_|=d?r.PASSWORD_MASK:0,_|=s&&s.retain?r.WILL_RETAIN_MASK:0,_|=s&&s.qos?s.qos<<r.WILL_QOS_SHIFT:0,_|=s?r.WILL_FLAG_MASK:0,_|=u?r.CLEAN_SESSION_MASK:0,e.write(i.from([_])),f(e,c),w(e,l),s&&(g(e,s.topic),w(e,s.payload));h&&w(e,h);d&&w(e,d);return!0}(t,e);case"connack":return function(t,e){var n=(t||{}).returnCode;if("number"!=typeof n)return e.emit("error",new Error("Invalid return code")),!1;return e.write(r.CONNACK_HEADER),v(e,2),e.write(t.sessionPresent?r.SESSIONPRESENT_HEADER:a),e.write(i.from([n]))}(t,e);case"publish":return function(t,e){var n=t||{},a=n.qos||0,s=n.retain?r.RETAIN_MASK:0,u=n.topic,c=n.payload||o,l=n.messageId,h=0;if("string"==typeof u)h+=i.byteLength(u)+2;else{if(!i.isBuffer(u))return e.emit("error",new Error("Invalid topic")),!1;h+=u.length+2}i.isBuffer(c)?h+=c.length:h+=i.byteLength(c);if(a&&"number"!=typeof l)return e.emit("error",new Error("Invalid messageId")),!1;a&&(h+=2);e.write(r.PUBLISH_HEADER[a][t.dup?1:0][s?1:0]),v(e,h),f(e,x(u)),e.write(u),a>0&&f(e,l);return e.write(c)}(t,e);case"puback":case"pubrec":case"pubrel":case"pubcomp":case"unsuback":return function(t,e){var n=t||{},i=n.cmd||"puback",o=n.messageId,a=n.dup&&"pubrel"===i?r.DUP_MASK:0,s=0;"pubrel"===i&&(s=1);if("number"!=typeof o)return e.emit("error",new Error("Invalid messageId")),!1;return e.write(r.ACKS[i][s][a][0]),v(e,2),f(e,o)}(t,e);case"subscribe":return function(t,e){var n=t||{},o=n.dup?r.DUP_MASK:0,a=n.messageId,s=n.subscriptions,u=0;if("number"!=typeof a)return e.emit("error",new Error("Invalid messageId")),!1;u+=2;if("object"!=typeof s||!s.length)return e.emit("error",new Error("Invalid subscriptions")),!1;for(var c=0;c<s.length;c+=1){var l=s[c].topic,h=s[c].qos;if("string"!=typeof l)return e.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof h)return e.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;u+=i.byteLength(l)+2+1}e.write(r.SUBSCRIBE_HEADER[1][o?1:0][0]),v(e,u),f(e,a);for(var d=!0,p=0;p<s.length;p++){var _=s[p],m=_.topic,y=_.qos;g(e,m),d=e.write(r.QOS[y])}return d}(t,e);case"suback":return function(t,e){var n=t||{},o=n.messageId,a=n.granted,s=0;if("number"!=typeof o)return e.emit("error",new Error("Invalid messageId")),!1;s+=2;if("object"!=typeof a||!a.length)return e.emit("error",new Error("Invalid qos vector")),!1;for(var u=0;u<a.length;u+=1){if("number"!=typeof a[u])return e.emit("error",new Error("Invalid qos vector")),!1;s+=1}return e.write(r.SUBACK_HEADER),v(e,s),f(e,o),e.write(i.from(a))}(t,e);case"unsubscribe":return function(t,e){var n=t||{},o=n.messageId,a=n.dup?r.DUP_MASK:0,s=n.unsubscriptions,u=0;if("number"!=typeof o)return e.emit("error",new Error("Invalid messageId")),!1;u+=2;if("object"!=typeof s||!s.length)return e.emit("error",new Error("Invalid unsubscriptions")),!1;for(var c=0;c<s.length;c+=1){if("string"!=typeof s[c])return e.emit("error",new Error("Invalid unsubscriptions")),!1;u+=i.byteLength(s[c])+2}e.write(r.UNSUBSCRIBE_HEADER[1][a?1:0][0]),v(e,u),f(e,o);for(var l=!0,h=0;h<s.length;h++)l=g(e,s[h]);return l}(t,e);case"pingreq":case"pingresp":case"disconnect":return function(t,e){return e.write(r.EMPTY[t.cmd])}(t,e);default:return e.emit("error",new Error("Unknown command")),!1}}function _(t){t.uncork()}Object.defineProperty(p,"cacheNumbers",{get:function(){return f===y},set:function(t){t?(c&&0!==Object.keys(c).length||(d=!0),f=y):(d=!1,f=b)}});var m={};function v(t,e){var n=m[e];n||(n=function(t){var e=0,n=0,r=i.allocUnsafe(function(t){return t>=0&&t<128?1:t>=128&&t<16384?2:t>=16384&&t<2097152?3:t>=2097152&&t<268435456?4:0}(t));do{e=t%128|0,(t=t/128|0)>0&&(e|=128),r.writeUInt8(e,n++,!0)}while(t>0);return r}(e),e<16384&&(m[e]=n)),t.write(n)}function g(t,e){var n=i.byteLength(e);f(t,n),t.write(e,"utf8")}function y(t,e){return t.write(c[e])}function b(t,e){return t.write(l(e))}function w(t,e){e&&"string"==typeof e?g(t,e):e?(f(t,e.length),t.write(e)):f(t,0)}function x(t){return t?i.isBuffer(t)?t.length:i.byteLength(t):0}t.exports=p},function(t,e,n){"use strict";var r=n(123);t.exports=function(t,e){var n,i;return e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost",n=e.port,i=e.hostname,r.createConnection(n,i)}},function(t,e,n){"use strict";var r=!1,i=[];function o(t){r?wx.sendSocketMessage({data:t}):i.push(t)}var a=n(44),s=n(19);function u(t,e){var n="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";!function(t){t.hostname||(t.hostname="localhost"),t.port||("wss"===t.protocol?t.port=443:t.port=80),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}(e);var s=function(t,e){var n=("wxs"===t.protocol?"wss":"ws")+"://"+t.hostname+":"+t.port+t.path;return"function"==typeof t.transformWsUrl&&(n=t.transformWsUrl(n,t,e)),n}(e,t);return a(function(t,e){var n={OPEN:1,CLOSING:2,CLOSED:3,readyState:r?1:0,send:o,close:wx.closeSocket,onopen:null,onmessage:null,onclose:null,onerror:null};return wx.connectSocket({url:t,protocols:e}),wx.onSocketOpen(function(t){n.readyState=n.OPEN,r=!0;for(var e=0;e<i.length;e++)o(i[e]);i=[],n.onopen&&n.onopen.apply(n,arguments)}),wx.onSocketMessage(function(t){n.onmessage&&n.onmessage.apply(n,arguments)}),wx.onSocketClose(function(){n.onclose&&n.onclose.apply(n,arguments),n.readyState=n.CLOSED,r=!1}),wx.onSocketError(function(){n.onerror&&n.onerror.apply(n,arguments),n.readyState=n.CLOSED,r=!1}),n}(s,[n]))}t.exports=function(t,e){if(e.hostname||(e.hostname=e.host),!e.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");var n=s.parse(document.URL);e.hostname=n.hostname,e.port||(e.port=n.port)}return u(t,e)}},function(t,e,n){"use strict";(function(e,r){var i=n(14).Transform,o=n(125),a=n(127),s=n(4).Buffer;t.exports=function(t,n,u){var c,l,h="browser"===e.title,f=!!r.WebSocket,d=h?function t(e,n,r){if(l.bufferedAmount>_)return void setTimeout(t,m,e,n,r);v&&"string"==typeof e&&(e=new s(e,"utf8"));try{l.send(e)}catch(t){return r(t)}r()}:function(t,e,n){if(l.readyState!==l.OPEN)return void n();v&&"string"==typeof t&&(t=new s(t,"utf8"));l.send(t,n)};n&&!Array.isArray(n)&&"object"==typeof n&&(u=n,n=null,("string"==typeof u.protocol||Array.isArray(u.protocol))&&(n=u.protocol));u||(u={});void 0===u.objectMode&&(u.objectMode=!(!0===u.binary||void 0===u.binary));var p=function(t,n,r){var o=new i({objectMode:t.objectMode});return o._write=n,o._flush=r,o._destroy=function(t,n){var r=this;this.push(null),this.end(),e.nextTick(function(){n(t),r.emit("close")})},o}(u,d,function(t){l.close(),t()});u.objectMode||(p._writev=function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)"string"==typeof t[r].chunk?n[r]=s.from(t[r],"utf8"):n[r]=t[r].chunk;this._write(s.concat(n),"binary",e)});var _=u.browserBufferSize||524288,m=u.browserBufferTimeout||1e3;"object"==typeof t?l=t:(l=f&&h?new a(t,n):new a(t,n,u)).binaryType="arraybuffer";l.readyState===l.OPEN?c=p:(c=o.obj(),l.onopen=function(){c.setReadable(p),c.setWritable(p),c.emit("connect")});c.socket=l,l.onclose=function(){c.end(),c.destroy()},l.onerror=function(t){c.destroy(t)},l.onmessage=function(t){var e=t.data;e=e instanceof ArrayBuffer?s.from(e):s.from(e,"utf8");p.push(e)},p.on("close",function(){l.close()});var v=!u.objectMode;return c}}).call(this,n(1),n(2))},function(t,e,n){"use strict";(function(e){var r=n(44),i=n(19),o=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],a="browser"===e.title;function s(t,e){var n="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";!function(t){t.hostname||(t.hostname="localhost"),t.port||("wss"===t.protocol?t.port=443:t.port=80),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={}),a||"wss"!==t.protocol||o.forEach(function(e){t.hasOwnProperty(e)&&!t.wsOptions.hasOwnProperty(e)&&(t.wsOptions[e]=t[e])})}(e);var i=function(t,e){var n=t.protocol+"://"+t.hostname+":"+t.port+t.path;return"function"==typeof t.transformWsUrl&&(n=t.transformWsUrl(n,t,e)),n}(e,t);return r(i,[n],e.wsOptions)}t.exports=a?function(t,e){if(e.hostname||(e.hostname=e.host),!e.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");var n=i.parse(document.URL);e.hostname=n.hostname,e.port||(e.port=n.port)}return s(t,e)}:function(t,e){return s(t,e)}}).call(this,n(1))},function(t,e,n){var r=n(6);t.exports=r.extend({},n(47),n(92),n(26),n(30),n(29),n(7)),t.exports.version=n(25).version,t.exports.mqtt=n(93)},function(t,n,r){var i=r(9),o=r(6),a=r(0),s=r(48),u=(r(52),r(58)),c=r(59),l=r(60);r(61);var h=r(7).semver_range,f=r(67),d=r(26),p=r(29),_=r(30);window.THREE=a,r(82),r(83),r(84),r(85),r(86),r(87),ndarray=r(17);var m={};function v(t,e){return function(){var n=[this].concat([].slice.call(arguments));t.apply(e,n)}}m.screen_fragment=r(88),m.screen_vertex=r(89),m.volr_fragment=r(90),m.volr_vertex=r(91);var g=function(t){var e=document.createElement("img");e.contentEditable=!0,e.src=t;var n=document.createElement("div");n.contentEditable=!0,n.appendChild(e),document.body.appendChild(n),function(t){if(document.body.createTextRange)(e=document.body.createTextRange()).moveToElementText(t),e.select();else if(window.getSelection){var e,n=window.getSelection();(e=document.createRange()).selectNodeContents(t),n.removeAllRanges(),n.addRange(e)}}(e),document.execCommand("Copy"),document.body.removeChild(n)},y=function(t,e){this.a=document.createElement("a"),this.a.className="ipyvolume-toolicon",this.a.setAttribute("href","javascript:void(0)"),this.li=document.createElement("li"),this.li.className="fa "+t,this.sub=document.createElement("div"),this.sub.className="ipyvolume-toolicon-dropdown-container",this.a.appendChild(this.li),this.a.appendChild(this.sub),e.appendChild(this.a),this.active=(t=>{t?this.li.classList.remove("fa-inactive"):this.li.classList.add("fa-inactive")})},b=function(t,e,n){this.a=document.createElement("a"),this.a.className="ipyvolume-toolicon-dropdown",this.a.setAttribute("href","javascript:void(0)"),this.li=document.createElement("li"),this.li.className="fa "+t,this.span_text=document.createElement("span"),this.span_text.innerText=n,this.a.appendChild(this.li),this.li.appendChild(this.span_text),e.appendChild(this.a),this.active=(t=>{t?this.a.classList.remove("ipyvolume-toolicon-inactive"):this.a.classList.add("ipyvolume-toolicon-inactive")})},w=function(t,e,n){return[t[0]/e*2-1,1-t[1]/n*2]},x={lasso:function(t){this.canvas=t,this.points=[],this.context=this.canvas.getContext("2d"),this.mouseMove=((t,e)=>{this.points.push([t,e])}),this.close=(()=>{this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}),this.draw=(()=>{this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.lineWidth=1.5,this.context.strokeStyle="rgba(255, 0, 0, 1)",this.context.fillStyle="rgba(255, 0, 0, 0.5)",this.context.beginPath();for(var t=0;t<this.points.length;t++)this.context.lineTo(this.points[t][0],this.points[t][1]);this.context.closePath(),this.context.fill(),this.context.stroke()}),this.getData=function(t,e){var n={type:"lasso"};return n.pixel=this.points,n.device=o.map(this.points,n=>w(n,t,e)),n}},circle:function(t){this.canvas=t,this.points=[],this.begin=null,this.end=null,this.mouseMove=((t,e)=>{this.begin?this.end=[t,e]:this.begin=[t,e]}),this.close=(()=>{ctx=this.canvas.getContext("2d"),ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.begin=null,this.end=null}),this.draw=(()=>{if(this.begin&&this.end){ctx=this.canvas.getContext("2d"),ctx.clearRect(0,0,this.canvas.width,this.canvas.height),ctx.lineWidth=1.5,ctx.strokeStyle="rgba(255, 0, 0, 1)",ctx.fillStyle="rgba(255, 0, 0, 0.5)",ctx.beginPath();var t=this.begin[0]-this.end[0],e=this.begin[1]-this.end[1],n=Math.sqrt(t*t+e*e);ctx.arc(this.begin[0],this.begin[1],n,0,2*Math.PI),ctx.fill(),ctx.stroke()}}),this.getData=function(t,e){var n={type:"circle"};return n.pixel={begin:this.begin,end:this.end},n.device={begin:w(this.begin,t,e),end:w(this.end,t,e)},n}},rectangle:function(t){this.canvas=t,this.points=[],this.begin=null,this.end=null,this.mouseMove=((t,e)=>{this.begin?this.end=[t,e]:this.begin=[t,e]}),this.close=(()=>{ctx=this.canvas.getContext("2d"),ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.begin=null,this.end=null}),this.draw=(()=>{this.begin&&this.end&&(ctx=this.canvas.getContext("2d"),ctx.clearRect(0,0,this.canvas.width,this.canvas.height),ctx.lineWidth=1.5,ctx.strokeStyle="rgba(255, 0, 0, 1)",ctx.fillStyle="rgba(255, 0, 0, 0.5)",ctx.beginPath(),ctx.rect(this.begin[0],this.begin[1],this.end[0]-this.begin[0],this.end[1]-this.begin[1]),ctx.fill(),ctx.stroke())}),this.getData=function(t,e){var n={type:"rectangle"};return n.pixel={begin:this.begin,end:this.end},n.device={begin:w(this.begin,t,e),end:w(this.end,t,e)},n}}},M=i.DOMWidgetView.extend({render:function(){this.transitions=[],this._update_requested=!1,this.update_counter=0;var t=this.model.get("width"),n=this.model.get("height");this.toolbar_div=document.createElement("div"),this.el.appendChild(this.toolbar_div);var r=o.bind(this._special_keys_down,this),i=o.bind(this._special_keys_up,this);document.addEventListener("keydown",r),document.addEventListener("keyup",i),this.once("remove",()=>{document.removeEventListener("keydown",r),document.removeEventListener("keyup",i)}),this.fullscreen_icon=new y("fa-arrows-alt",this.toolbar_div),this.fullscreen_icon.a.title="Fullscreen",this.fullscreen_icon.a.onclick=o.bind(function(){var t=this.renderer.domElement,e=t.style.width,n=t.style.height,r=o.bind(function(){c.isFullscreen?(t.style.width="100vw",t.style.height="100vh"):(t.style.width=e,t.style.height=n,c.off("change",r)),this.update_size()},this);c.onchange(r),c.request(t)},this),this.stereo_icon=new y("fa-eye",this.toolbar_div),this.stereo_icon.a.title="Stereoscopic view",this.stereo_icon.a.onclick=o.bind(function(){this.model.set("stereo",!this.model.get("stereo")),this.model.save_changes()},this),this.stereo_icon.active(this.model.get("stereo")),this.model.on("change:stereo",()=>{this.stereo_icon.active(this.model.get("stereo"))}),this.screenshot_icon=new y("fa-picture-o",this.toolbar_div),this.screenshot_icon.a.title="Make screensot (hold shift to copy to clipboard)",this.screenshot_icon.a.onclick=(t=>{try{var n=this.screenshot();t.shiftKey?g(n):function(t){var n=document.createElement("a");n.download="ipyvolume.png",n.href=t,document.createEvent?(e=document.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(e)):lnk.fireEvent&&n.fireEvent("onclick")}(n)}finally{return t.preventDefault(),!1}}),window.ipvss=(()=>{return this.screenshot()}),this.camera_control_icon=new y("fa-arrow-up",this.toolbar_div),this.camera_control_icon.a.title="Camera locked to 'up' axis (orbit), instead of trackball mode",this.camera_control_icon.a.onclick=(()=>{if("trackball"==this.model.get("camera_control")){this.model.get("camera_control");this.model.set("camera_control","orbit"),this.camera_control_icon.active(!0)}else this.model.set("camera_control","trackball"),this.camera_control_icon.active(!1);this.touch()}),this.camera_control_icon.active(!1),this.select_icon=new y("fa-pencil-square-o",this.toolbar_div),this.select_icon.a.title="Select mode (auto when control key is pressed)",this.select_icon.a.onclick=(()=>{"select"==this.model.get("mouse_mode")?this.model.set("mouse_mode","normal"):this.model.set("mouse_mode","select"),this.update_icons(),this.touch()}),this.select_icon.active(!1),this.select_icon_lasso=new b("fa-vine",this.select_icon.sub,"Lasso selector"),this.select_icon_circle=new b("fa-circle",this.select_icon.sub,"Circle selector"),this.select_icon_rectangle=new b("fa-square",this.select_icon.sub,"Rectangle selector"),this.select_icon_lasso.a.onclick=(t=>{t.stopPropagation(),this.model.set("mouse_mode","select"),this.model.set("selector","lasso"),this.touch()}),this.select_icon_circle.a.onclick=(t=>{t.stopPropagation(),this.model.set("mouse_mode","select"),this.model.set("selector","circle"),this.touch()}),this.select_icon_rectangle.a.onclick=(t=>{t.stopPropagation(),this.model.set("mouse_mode","select"),this.model.set("selector","rectangle"),this.touch()}),this.zoom_icon=new y("fa-search-plus",this.toolbar_div),this.zoom_icon.a.title="Zoom mode (auto when control key is pressed, use scrolling)",this.zoom_icon.a.onclick=(()=>{"zoom"==this.model.get("mouse_mode")?this.model.set("mouse_mode","normal"):this.model.set("mouse_mode","zoom"),this.touch()}),this.quick_mouse_mode_change=!1,this.quick_mouse_previous_mode=this.model.get("mouse_mode"),this.update_icons(),this.model.on("change:mouse_mode change:selector",this.update_icons,this),this.model.on("change:mouse_mode change:selector",this.update_mouse_mode,this),this.reset_icon=new y("fa-home",this.toolbar_div),this.reset_icon.a.title="Reset view";this.model.get("camera_fov");this.reset_icon.a.onclick=(()=>{this.camera.copy(this.camera_initial),this.camera.ipymodel.syncToModel(!0)}),this.setting_icon=new y("fa-cog",this.toolbar_div),this.setting_icon_180=new b("fa-circle",this.setting_icon.sub,"180 degrees"),this.setting_icon_360=new b("fa-circle",this.setting_icon.sub,"360 degrees");var s=(t,e,n,r)=>{new b("fa-cogs",this.setting_icon.sub,t+" ("+e+"x"+n+")").a.onclick=(t=>{this.model.set("width",e),this.model.set("height",n),this.touch()})};s("default",this.model.get("width"),this.model.get("height")),s("small",500,400),s("medium",640,480),s("large",800,600),s("HD 720",1280,720),s("HD",1920,1080),s("2k",2048,1080),s("2k x 2k",2048,2048),s("4k UHD ",3840,2160),s("4k",4096,2160),s("4k x 4k",4096,4096);var u=t=>{new b("fa-compress",this.setting_icon.sub,"Scale canvas (down) by "+t).a.onclick=(e=>{this.model.set("displayscale",1/t),this.touch()})};u(1),u(2),u(4),u(8),this.setting_icon_180.a.onclick=(t=>{t.stopPropagation(),"180"==this.model.get("panorama_mode")?this.model.set("panorama_mode","no"):this.model.set("panorama_mode","180"),this.touch()}),this.setting_icon_360.a.onclick=(t=>{t.stopPropagation(),"360"==this.model.get("panorama_mode")?this.model.set("panorama_mode","no"):this.model.set("panorama_mode","360"),this.touch()}),this.setting_icon_360.active("360"==this.model.get("panorama_mode")),this.setting_icon_180.active("180"==this.model.get("panorama_mode")),this.model.on("change:panorama_mode",()=>{this.setting_icon_360.active("360"==this.model.get("panorama_mode")),this.setting_icon_180.active("180"==this.model.get("panorama_mode")),this.update_panorama()}),this.el.classList.add("jupyter-widgets"),this.canvas_container=document.createElement("div"),this.canvas_overlay_container=document.createElement("div"),this.canvas_overlay=document.createElement("canvas"),this.canvas_overlay_container.appendChild(this.canvas_overlay),this.canvas_container.appendChild(this.canvas_overlay_container),this.renderer=new a.WebGLRenderer({alpha:!0,antialias:!0}),this.canvas_renderer_container=document.createElement("div"),this.canvas_renderer_container.appendChild(this.renderer.domElement),this.canvas_container.appendChild(this.canvas_renderer_container),this.canvas_container.appendChild(this.canvas_overlay_container),this.canvas_overlay_container.style="position: absolute; z-index: 2; pointer-events: none; ",this.canvas_renderer_container.style="position: absolute; z-index: 1",this.canvas_container.style="position: relative",this.el.appendChild(this.canvas_container),this.el.setAttribute("tabindex","1"),this.el_mirror=document.createElement("div"),this.el.appendChild(this.el_mirror),this.el_axes=document.createElement("div"),this.el_mirror.appendChild(this.el_axes),this.renderer.domElement.addEventListener("wheel",this.mousewheel.bind(this),!1);this.camera=this.model.get("camera").obj,this.camera_initial=this.camera.clone(),this.model.get("camera").on("change",()=>{var t=new a.Vector3(0,1,0);t.applyQuaternion(this.camera.quaternion),this.camera.up=t,this.camera.lookAt(0,0,0),this.control_trackball.position0=this.camera.position.clone(),this.control_trackball.up0=this.camera.up.clone(),this.update()}),this.cube_camera=new a.CubeCamera(this.camera.near,this.camera.far,this.model.get("cube_resolution")),this.camera_stereo=new a.StereoCamera,this.renderer.setSize(t,n),this.renderer_stereo=new a.StereoEffect(this.renderer),this.renderer_selected=this.renderer_stereo;var l=function(t,e,n,r,i,o,s){var u=new a.Geometry;return u.vertices.push(new a.Vector3(t,e,n),new a.Vector3(r,i,o)),new a.Line(u,s)},h=function(t,e,n,r){return l(-.5,-.5,-.5,-.5+t,-.5+e,-.5+n,r)};this.axes_material=new a.LineBasicMaterial({color:"cyan",linewidth:1}),this.xaxes_material=new a.LineBasicMaterial({color:"red",linewidth:1}),this.yaxes_material=new a.LineBasicMaterial({color:"green",linewidth:1}),this.zaxes_material=new a.LineBasicMaterial({color:"blue",linewidth:1}),this.x_axis=h(1,0,0,this.xaxes_material),this.y_axis=h(0,1,0,this.yaxes_material),this.z_axis=h(0,0,1,this.zaxes_material),this.axes=new a.Object3D,this.axes.add(this.x_axis),this.axes.add(this.y_axis),this.axes.add(this.z_axis),this.wire_box=new a.Object3D;this.wire_box_x_line=l(-.5,-.5,-.5,.5,-.5,-.5,this.axes_material),this.wire_box.add(this.wire_box_x_line),this.wire_box.add(l(-.5,.5,-.5,.5,.5,-.5,this.axes_material)),this.wire_box.add(l(-.5,-.5,.5,.5,-.5,.5,this.axes_material)),this.wire_box.add(l(-.5,.5,.5,.5,.5,.5,this.axes_material)),this.wire_box_y_line=l(-.5,-.5,-.5,-.5,.5,-.5,this.axes_material),this.wire_box.add(this.wire_box_y_line),this.wire_box.add(l(.5,-.5,-.5,.5,.5,-.5,this.axes_material)),this.wire_box.add(l(-.5,-.5,.5,-.5,.5,.5,this.axes_material)),this.wire_box.add(l(.5,-.5,.5,.5,.5,.5,this.axes_material)),this.wire_box_z_line=l(-.5,-.5,-.5,-.5,-.5,.5,this.axes_material),this.wire_box.add(this.wire_box_z_line),this.wire_box.add(l(.5,-.5,-.5,.5,-.5,.5,this.axes_material)),this.wire_box.add(l(-.5,.5,-.5,-.5,.5,.5,this.axes_material)),this.wire_box.add(l(.5,.5,-.5,.5,.5,.5,this.axes_material)),this.camera.position.z=2*this.getTanDeg(22.5)/this.getTanDeg(this.model.get("camera_fov")/2),this.axes_data=[{name:"x",label:"x",object:null,object_label:null,translate:[0,-.5,-.5],rotate:[Math.PI/4,0,0],rotation_order:"XYZ"},{name:"y",label:"y",object:null,object_label:null,translate:[-.5,0,-.5],rotate:[3*Math.PI/4,0,Math.PI/2],rotation_order:"ZXY"},{name:"z",label:"z",object:null,object_label:null,translate:[-.5,-.5,0],rotate:[-Math.PI/8,-Math.PI/2,0],rotation_order:"YZX"}],this.ticks=5,this.scene_volume=new a.Scene,this.shared_scene=this.model.get("scene").obj,this.scene_volume.background=null,this.model.get("scene").on("rerender",()=>this.update()),this.scene_volume.add(this.camera),this.shared_scene.add(this.camera),this.scene_scatter=new a.Scene,this.scene_opaque=new a.Scene,this.scene_opaque.add(this.wire_box),this.scene_opaque.add(this.axes),this.mesh_views={},this.scatter_views={},this.volume_views={};var f=t,d=n;this.model.get("stereo")&&(f/=2),f/=this.model.get("downscale"),d/=this.model.get("downscale"),this.volume_back_target=new a.WebGLRenderTarget(f,d,{minFilter:a.LinearFilter,magFilter:a.LinearFilter,type:a.FloatType,format:a.RGBAFormat,generateMipmaps:!1}),this.geometry_depth_target=new a.WebGLRenderTarget(f,d,{minFilter:a.LinearFilter,magFilter:a.LinearFilter,format:a.RGBAFormat,generateMipmaps:!1,depthTexture:new a.DepthTexture}),this.geometry_depth_target.depthTexture.type=a.UnsignedShortType,this.color_pass_target=new a.WebGLRenderTarget(f,d,{minFilter:a.LinearFilter,magFilter:a.LinearFilter}),this.screen_pass_target=new a.WebGLRenderTarget(f,d,{minFilter:a.LinearFilter,magFilter:a.LinearFilter}),this.coordinate_texture=new a.WebGLRenderTarget(f,d,{minFilter:a.LinearFilter,magFilter:a.NearestFilter}),this.screen_texture=this.color_pass_target.texture,this.screen_scene=new a.Scene,this.screen_scene_cube=new a.Scene,this.screen_plane=new a.PlaneBufferGeometry(1,1),this.screen_material=new a.ShaderMaterial({uniforms:{tex:{type:"t",value:this.screen_pass_target.texture}},vertexShader:m.screen_vertex,fragmentShader:m.screen_fragment,depthWrite:!1}),this.screen_material_cube=new a.ShaderMaterial({uniforms:{tex:{type:"t",value:this.cube_camera.renderTarget.texture}},vertexShader:m.screen_vertex,fragmentShader:m.screen_fragment,defines:{},depthWrite:!1}),this.screen_mesh=new a.Mesh(this.screen_plane,this.screen_material),this.screen_mesh_cube=new a.Mesh(this.screen_plane,this.screen_material_cube),this.screen_scene.add(this.screen_mesh),this.screen_scene_cube.add(this.screen_mesh_cube),this.screen_camera=new a.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),this.screen_camera.position.z=10,this.update_panorama(),this.on("change:panorama_mode",this.update_panorama,this),this.renderer.domElement.addEventListener("mousedown",o.bind(this._mouse_down,this),!1),this.renderer.domElement.addEventListener("mousemove",o.bind(this._mouse_move,this),!1),this.renderer.domElement.addEventListener("dblclick",this._mouse_dbl_click.bind(this),!1),this.renderer.domElement.addEventListener("contextmenu",t=>{t.preventDefault(),t.stopPropagation()},!1),window.addEventListener("mouseup",o.bind(this._mouse_up,this),!1),this.mouse_inside=!1,this.mouse_trail=[],this.select_overlay=null,this.control_trackball=new a.TrackballControls(this.camera,this.renderer.domElement),this.control_orbit=new a.OrbitControls(this.camera,this.renderer.domElement),this.control_trackball.dynamicDampingFactor=1,this.control_trackball.noPan=!0,this.control_orbit.enablePan=!1,this.control_orbit.dampingFactor=1,this.update_mouse_mode(),this.control_orbit.rotateSpeed=.5,this.control_trackball.rotateSpeed=.5,this.control_trackball.zoomSpeed=3,window.addEventListener("deviceorientation",o.bind(this.on_orientationchange,this),!1);var p=this.getRenderSize();this.material_multivolume=new a.ShaderMaterial({uniforms:{back_tex:{type:"t",value:this.volume_back_target.texture},geometry_depth_tex:{type:"t",value:this.geometry_depth_target.depthTexture},volumes:{type:"tv",value:[{}]},data:{type:"tv",value:[]},transfer_function:{type:"tv",value:[]},volumes_max_int:{type:"tv",value:[{}]},data_max_int:{type:"tv",value:[]},transfer_function_max_int:{type:"tv",value:[]},ambient_coefficient:{type:"f",value:this.model.get("ambient_coefficient")},diffuse_coefficient:{type:"f",value:this.model.get("diffuse_coefficient")},specular_coefficient:{type:"f",value:this.model.get("specular_coefficient")},specular_exponent:{type:"f",value:this.model.get("specular_exponent")},brightness:{type:"f",value:2},render_size:{type:"2f",value:p},steps:{type:"f",value:10}},blending:a.CustomBlending,blendSrc:a.OneFactor,blendDst:a.OneMinusSrcAlphaFactor,blendEquation:a.AddEquation,transparent:!0,defines:{},side:a.FrontSide}),this.material_multivolume_depth=new a.ShaderMaterial({uniforms:this.material_multivolume.uniforms,blending:a.NoBlending,defines:{COORDINATE:!0},side:a.FrontSide}),this.model.on("change:scatters",this.update_scatters,this),this.update_scatters(),this.model.on("change:meshes",this.update_meshes,this),this.update_meshes(),this.model.on("change:volumes",this.update_volumes,this),this.update_volumes(),this.update_size();this.el.addEventListener("change",o.bind(this.update,this));var _=()=>{this.model.set("matrix_world",this._get_view_matrix().elements.slice()),this.touch()};this.model.on("change:xlim change:ylim change:zlim",()=>{_()}),this.model.get("camera").on("change:matrixWorld",()=>{_()}),_();var v=()=>{this.model.set("matrix_projection",this.camera.projectionMatrix.elements.slice())};v(),this.model.get("camera").on("change:projectionMatrix",()=>{v()}),v(),this.model.on("change:camera_control",this.update_mouse_mode,this),this.model.on("change:xlabel change:ylabel change:zlabel",this.update,this),this.model.on("change:render_continuous",this.update,this),this.model.on("change:style",this.update,this),this.model.on("change:xlim change:ylim change:zlim ",this.update,this),this.model.on("change:xlim change:ylim change:zlim ",this._save_matrices,this),this.model.on("change:downscale",this.update_size,this),this.model.on("change:stereo",this.update_size,this),this.model.on("change:eye_separation",this.update,this),this.model.on("change:camera_fov",this.update_current_control,this),this.model.on("change:width",this.update_size,this),this.model.on("change:height",this.update_size,this),this.model.on("change:displayscale",this.update_size,this),this.model.on("change:ambient_coefficient",this.update_light,this),this.model.on("change:diffuse_coefficient",this.update_light,this),this.model.on("change:specular_coefficient",this.update_light,this),this.model.on("change:specular_exponent",this.update_light,this);var w=()=>{o.each([this.scene_volume,this.scene_opaque,this.scene_scatter],t=>{var e=this.model.get("camera_center");t.position.set(-e[0],-e[1],-e[2])}),this.update()};if(this.model.on("change:camera_center",w),w(),this.model.on("change:tf",this.tf_set,this),this.listenTo(this.model,"msg:custom",o.bind(this.custom_msg,this)),this.control_trackball.addEventListener("end",o.bind(this.update_angles,this)),this.control_orbit.addEventListener("end",o.bind(this.update_angles,this)),this.control_trackball.addEventListener("change",o.bind(this.update,this)),this.control_orbit.addEventListener("change",o.bind(this.update,this)),this.renderer.domElement.addEventListener("resize",o.bind(this.on_canvas_resize,this),!1),this.update(),this.update_current_control(),this.update_light(),this.model.get("capture_fps"))var x=this.renderer.domElement.captureStream(this.model.get("capture_fps"));else x=this.renderer.domElement.captureStream();this.model.stream=Promise.resolve(x),window.last_figure_stream=x,this.renderer.domElement.onmouseover=(()=>{this.hover=!0}),this.renderer.domElement.onmouseleave=(()=>{this.hover=!1})},setStyle:function(){},update_icons:function(){var t="select"==this.model.get("mouse_mode");this.select_icon_lasso.active("lasso"==this.model.get("selector")&&t),this.select_icon_circle.active("circle"==this.model.get("selector")&&t),this.select_icon_rectangle.active("rectangle"==this.model.get("selector")&&t),this.select_icon.active(t);var e="zoom"==this.model.get("mouse_mode");this.zoom_icon.active(e)},update_mouse_mode:function(){var t="normal"==this.model.get("mouse_mode");this.control_trackball.enabled="trackball"==this.model.get("camera_control")&&t,this.control_orbit.enabled="orbit"==this.model.get("camera_control")&&t},mousewheel:function(t){if("zoom"==this.model.get("mouse_mode")){t.preventDefault(),t.stopPropagation();var e,n,r=25e-5*event.deltaY;2==event.deltaMode&&(r=.025*event.deltaY),1==event.deltaMode&&(r-=.01*event.deltaY),t.offsetX?(e=t.offsetX,n=t.offsetY):t.layerX&&(e=t.layerX,n=t.layerY),r*=10;var i=Math.pow(10,r),o=new Uint8Array(4),s=this.renderer.domElement.clientHeight;if(!this.last_zoom_coordinate)if(this.renderer.readRenderTargetPixels(this.coordinate_texture,e,s-n,1,1,o),o[3]>1)(u=new a.Vector3(o[0],o[1],o[2])).multiplyScalar(1/255),this.last_zoom_coordinate=u;if(this.last_zoom_coordinate){this.renderer.clearTarget(this.coordinate_texture,!0,!0,!0);var u,c=(u=this.last_zoom_coordinate).clone().sub(u.clone().multiplyScalar(i)),l=u.clone().add(u.clone().negate().addScalar(1).multiplyScalar(i)),h=this.model.get("xlim"),f=this.model.get("ylim"),d=this.model.get("zlim"),p=new a.Vector3(h[0],f[0],d[0]),_=new a.Vector3(h[1],f[1],d[1]).clone().sub(p),m=c.clone().multiply(_).add(p),v=l.clone().multiply(_).add(p);this.model.set("xlim",[m.x,v.x]),this.model.set("ylim",[m.y,v.y]),this.model.set("zlim",[m.z,v.z]),this.touch()}return!1}},_mouse_down:function(t){window.last_event=t,t.offsetX?(mouseX=t.offsetX,mouseY=t.offsetY):t.layerX&&(mouseX=t.layerX,mouseY=t.layerY),this.mouse_down_position={x:mouseX,y:mouseY},this.mouse_down_limits={x:this.model.get("xlim"),y:this.model.get("ylim"),z:this.model.get("zlim")};var e=this.renderer.domElement.clientHeight,n=new Uint8Array(4);if(this.renderer.readRenderTargetPixels(this.coordinate_texture,mouseX,e-mouseY,1,1,n),n[3]>1){var r=new a.Vector3(n[0],n[1],n[2]);r.multiplyScalar(1/255),this.last_pan_coordinate=r}if("select"==this.model.get("mouse_mode")){var i=x[this.model.get("selector")];this.selector=new i(this.canvas_overlay),t.preventDefault(),t.stopPropagation()}},_mouse_move:function(t){if(!t)t=event;var e,n;if(t.offsetX?(e=t.offsetX,n=t.offsetY):t.layerX&&(e=t.layerX,n=t.layerY),mouse_position={x:e,y:n},this.last_zoom_coordinate=null,this.selector&&(this.mouse_trail.push([e,n]),this.selector.mouseMove(e,n),this.selector.draw()),"zoom"==this.model.get("mouse_mode")&&this.last_pan_coordinate&&1==t.buttons){var r=this.renderer.domElement,i=mouse_position.x-this.mouse_down_position.x,o=-(mouse_position.y-this.mouse_down_position.y),s=i/r.clientWidth*2,u=o/r.clientHeight*2,c=this.camera.projectionMatrix,l=this._get_view_matrix(),h=h=c.clone().multiply(l),f=h.clone().getInverse(h),d=this.mouse_down_limits.x,p=this.mouse_down_limits.y,_=this.mouse_down_limits.z,m=new a.Vector3(d[0],p[0],_[0]),v=new a.Vector3(d[1],p[1],_[1]),g=v.clone().sub(m),y=this.last_pan_coordinate.clone().multiply(g).add(m).clone().applyMatrix4(h),b=y.clone();b.x+=s,b.y+=u;var w=y.applyMatrix4(f),x=b.applyMatrix4(f).clone().sub(w);m.sub(x),v.sub(x),this.model.set("xlim",[m.x,v.x]),this.model.set("ylim",[m.y,v.y]),this.model.set("zlim",[m.z,v.z])}},_mouse_dbl_click:function(t){if("zoom"==this.model.get("mouse_mode")&&this.last_pan_coordinate){var e=this.mouse_down_limits.x,n=this.mouse_down_limits.y,r=this.mouse_down_limits.z,i=new a.Vector3(e[0],n[0],r[0]),o=new a.Vector3(e[1],n[1],r[1]),s=o.clone().sub(i),u=this.last_pan_coordinate.clone().multiply(s).add(i),c=s.clone().multiplyScalar(.5);i=u.clone().sub(c),o=u.clone().add(c),this.model.set("xlim",[i.x,o.x]),this.model.set("ylim",[i.y,o.y]),this.model.set("zlim",[i.z,o.z])}},_mouse_up:function(t){if(this.selector){var e=this.renderer.domElement;this.send({event:"selection",data:this.selector.getData(e.clientWidth,e.clientHeight)}),this.mouse_trail=[],this.selector.close(),this.selector=null,t.preventDefault(),t.stopPropagation()}},_special_keys_down:function(t){if(this.hover){var e=window.event?event:t;e.altKey;var n=!1;return"="==e.key&&(this.model.set("selection_mode","replace"),n=!0),"|"==e.key&&(this.model.set("selection_mode","or"),n=!0),"&"==e.key&&(this.model.set("selection_mode","and"),n=!0),"-"==e.key&&(this.model.set("selection_mode","subtract"),n=!0),76==e.keyCode&&(this.model.set("selector","lasso"),n=!0),67==e.keyCode&&(this.model.set("selector","circle"),n=!0),82==e.keyCode&&(this.model.set("selector","rectangle"),n=!0),18==e.keyCode&&(this.quick_mouse_mode_change||(this.quick_mouse_mode_change=!0,this.quick_mouse_previous_mode=this.model.get("mouse_mode"),this.model.set("mouse_mode","zoom"),n=!0)),17==e.keyCode&&(this.quick_mouse_mode_change||(this.quick_mouse_mode_change=!0,this.quick_mouse_previous_mode=this.model.get("mouse_mode"),this.model.set("mouse_mode","select"),n=!0)),n?(this.touch(),t.preventDefault(),t.stopPropagation(),!1):void 0}},_special_keys_up:function(t){var e=window.event?event:t;e.altKey,17!=e.keyCode&&18!=e.keyCode||this.quick_mouse_mode_change&&(this.quick_mouse_mode_change=!1,this.model.set("mouse_mode",this.quick_mouse_previous_mode),this.touch())},custom_msg:function(t){if("screenshot"==t.msg){var e=this.screenshot(void 0,t.width,t.height);this.send({event:"screenshot",data:e})}},screenshot:function(t,e,n){var r=e&&n;try{r&&this._update_size(!0,e,n),this._real_update();var i=this.renderer.domElement.toDataURL(t||"image/png");return console.info("captured screenshot"),i}finally{r&&this._update_size(!1)}},_d3_add_axis:function(t,e,n){var r=new a.Object3D;r.translateX(e.translate[0]),r.translateY(e.translate[1]),r.translateZ(e.translate[2]),u.select(t).attr("translate-x",e.translate[0]),u.select(t).attr("translate-y",e.translate[1]),u.select(t).attr("translate-z",e.translate[2]),r.rotation.reorder(e.rotation_order),r.rotation.x=e.rotate[0],r.rotation.y=e.rotate[1],r.rotation.z=e.rotate[2],this.axes.add(r);var i=.004,o={x:s.textAlign.topRight,y:s.textAlign.topRight,z:s.textAlign.center},c=new s.SpriteText2D(e.label,{align:o[e.name],font:"30px Arial",fillStyle:"#00FF00",antialias:!0});c.material.transparent=!0,c.material.alphaTest=.3,c.scale.set(i,i,i),r.add(c),e.object_label=c,e.object=r,e.scale=u.scaleLinear().domain(this.model.get(e.name+"lim")).range([-.5,.5]),e.ticks=null},_d3_update_axis:function(t,e,n){e.object_label.text=e.label,e.object_label.fillStyle=e.fillStyle;var r=e.name;e.object_label.fillStyle=this.get_style("axes."+r+".label.color axes."+r+".color axes.label.color axes.color"),e.object_label.visible=this.get_style("axes."+r+".label.visible axes."+r+".visible axes.label.visible axes.visible"),e.scale=u.scaleLinear().domain(this.model.get(e.name+"lim")).range([-.5,.5])},_d3_add_axis_tick:function(t,e,n){var r=u.select(u.select(t).node().parentNode).datum(),i=r.scale.tickFormat(this.ticks,".1f")(e.value),o={x:s.textAlign.topRight,y:s.textAlign.topRight,z:s.textAlign.center},c=new s.SpriteText2D(i,{align:o[r.name],font:"30px Arial",fillStyle:"#00FF00",antialias:!0});c.material.transparent=!0,c.material.alphaTest=.3,c.blending=a.CustomBlending,c.blendSrc=a.SrcAlphaFactor,c.blendDst=a.OneMinusSrcAlphaFactor,c.blendEquation=a.AddEquation;c.scale.multiplyScalar(.002);var l=r.name;return c.fillStyle=this.get_style("axes."+l+".ticklabel.color axes.ticklabel.color axes."+l+".color axes.color"),r.object.add(c),e.object_ticklabel=c,c},_d3_update_axis_tick:function(t,e,n){var r=u.select(u.select(t).node().parentNode).datum(),i=r.scale,o=i.tickFormat(this.ticks,".1f")(e.value);e.object_ticklabel.text=o,e.object_ticklabel.position.x=i(e.value);var a=r.name;e.object_ticklabel.fillStyle=this.get_style("axes."+a+".ticklabel.color axes.ticklabel.color axes."+a+".color axes.color"),e.object_ticklabel.visible=this.get_style("axes."+a+".ticklabel.visible axes."+a+".visible axes.visible")},_d3_remove_axis_tick:function(t,e,n){e.object_ticklabel.parent.remove(e.object_ticklabel)},update_scatters:function(){var t=this.model.get("scatters");if(0!=t.length){var e=[];o.each(t,t=>{if(e.push(t.cid),!(t.cid in this.scatter_views)){var n={parent:this},r=new d.ScatterView({options:n,model:t});r.render(),this.scatter_views[t.cid]=r}},this),o.each(this.scatter_views,(t,n)=>{-1==e.indexOf(n)&&(t.remove_from_scene(),delete this.scatter_views[n])},this)}else this.scatter_views={}},update_meshes:function(){var t=this.model.get("meshes");if(0!=t.length){var e=[];o.each(t,t=>{if(e.push(t.cid),!(t.cid in this.mesh_views)){var n={parent:this},r=new p.MeshView({options:n,model:t});r.render(),this.mesh_views[t.cid]=r}},this),o.each(this.mesh_views,(t,n)=>{-1==e.indexOf(n)&&(t.remove_from_scene(),delete this.mesh_views[n])},this)}else this.mesh_views={}},update_volumes:function(){var t=this.model.get("volumes");if(0!=t.length){var e=[];o.each(t,t=>{if(e.push(t.cid),!(t.cid in this.volume_views)){var n={parent:this},r=new _.VolumeView({options:n,model:t});this.volume_views[t.cid]=r,r.render()}},this),o.each(this.volume_views,(t,n)=>{-1==e.indexOf(n)&&(t.remove_from_scene(),delete this.volume_views[n])},this)}else this.volume_views={}},transition:function(t,e,n){var r=this;return new function(){this.time_start=(new Date).getTime(),this.duration=r.model.get("animation"),this.cancelled=!1,this.called_on_done=!1,this.set=function(t){this.objects.push(t)},this.is_done=function(){return(new Date).getTime()-this.time_start>=this.duration||this.cancelled},this.cancel=function(){this.cancelled=!0},this.update=function(){if(!this.cancelled){var i=((new Date).getTime()-this.time_start)/this.duration,o=Math.min(1,i);o=Math.pow(o,r.model.get("animation_exponent")),t.apply(n,[o]),i>=1&&!this.called_on_done&&(this.called_on_done=!0,e.apply(n))}},r.transitions.push(this)}},on_orientationchange:function(t){o.each([this.scene_volume,this.scene_opaque,this.scene_scatter],e=>{e.rotation.reorder("XYZ"),e.rotation.x=t.gamma*Math.PI/180+2*Math.PI,e.rotation.y=-(t.beta*Math.PI/180+2*Math.PI),e.rotation.z=-t.alpha*Math.PI/180},this),this.update()},on_canvas_resize:function(t){},keypress:function(t){t.keyCode||t.which;t.keyCode,t.key},update_angles:function(){this.camera.ipymodel.syncToModel(!0),this.update()},_get_scale_matrix:function(){var t=new a.Matrix4;t.makeTranslation(-.5,-.5,-.5);var e=new a.Matrix4,n=this.model.get("xlim"),r=this.model.get("ylim"),i=this.model.get("zlim"),o=1/(n[1]-n[0]),s=1/(r[1]-r[0]),u=1/(i[1]-i[0]);e.makeScale(o,s,u);var c=new a.Matrix4;return c.makeTranslation(-n[0],-r[0],-i[0]),t.multiply(e),t.multiply(c),t},_get_view_matrix(){this.camera.updateMatrixWorld(),this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld);var t=this.camera.matrixWorldInverse.clone();return t.multiply(this._get_scale_matrix().clone()),t},getTanDeg:function(t){var e=t*Math.PI/180;return Math.tan(e)},update_current_control:function(){this.camera.ipymodel.syncToModel(!0),this.control_trackball.position0=this.camera.position.clone(),this.control_trackball.up0=this.camera.up.clone()},update_panorama:function(){var t=this.screen_material_cube;"360"==this.model.get("panorama_mode")&&(t.defines={PANORAMA_360:!0}),"180"==this.model.get("panorama_mode")&&(t.defines={PANORAMA_180:!0}),t.needsUpdate=!0,this.update()},update:function(){this._update_requested||(this._update_requested=!0,requestAnimationFrame(o.bind(this._real_update,this)))},_real_update:function(){this.control_trackball.handleResize(),this._update_requested=!1,this.camera.lookAt(0,0,0),this.renderer.setClearColor(this.get_style_color("background-color")),this.x_axis.visible=this.get_style("axes.x.visible axes.visible"),this.y_axis.visible=this.get_style("axes.y.visible axes.visible"),this.z_axis.visible=this.get_style("axes.z.visible axes.visible"),this.axes_material.color=this.get_style_color("axes.color"),this.xaxes_material.color=this.get_style_color("axes.x.color axes.color"),this.yaxes_material.color=this.get_style_color("axes.y.color axes.color"),this.zaxes_material.color=this.get_style_color("axes.z.color axes.color"),this.axes_data[0].fillStyle=this.get_style("axes.x.color axes.color"),this.axes_data[1].fillStyle=this.get_style("axes.y.color axes.color"),this.axes_data[2].fillStyle=this.get_style("axes.z.color axes.color"),this.axes_data[0].label=this.model.get("xlabel"),this.axes_data[1].label=this.model.get("ylabel"),this.axes_data[2].label=this.model.get("zlabel"),this.wire_box.visible=this.get_style("box.visible"),this.wire_box_x_line.visible=!this.x_axis.visible&&this.wire_box.visible,this.wire_box_y_line.visible=!this.y_axis.visible&&this.wire_box.visible,this.wire_box_z_line.visible=!this.z_axis.visible&&this.wire_box.visible,u.select(this.el_axes).selectAll(".ipyvol-axis").data(this.axes_data).each(v(this._d3_update_axis,this)).enter().append("div").attr("class","ipyvol-axis").each(v(this._d3_add_axis,this));var t=this;this.ticks=5,this.last_tick_selection=u.select(this.el_axes).selectAll(".ipyvol-axis").data(this.axes_data).selectAll(".ipyvol-tick").data(function(e,n,r){if(a=e.ticks){a=e.ticks=a.slice();for(var i=e.scale.ticks(t.ticks);a.length<i.length;)a.push({});for(;a.length>i.length;)a.pop();return o.each(i,(t,e)=>{a[e].value=t}),a}i=e.scale.ticks(t.ticks);var a=o.map(i,function(t){return{value:t}});return e.ticks=a,a}),this.last_tick_selection.each(v(this._d3_update_axis_tick,this)).enter().append("div").attr("class","ipyvol-tick").each(v(this._d3_add_axis_tick,this)),this.last_tick_selection.exit().remove().each(v(this._d3_remove_axis_tick,this));for(var e=[],n=0;n<this.transitions.length;n++){var r=this.transitions[n];r.is_done()||e.push(r),r.update()}if(this.renderer.clear(),this.model.get("stereo")){var i=this.renderer.getSize();null===this.camera.parent&&this.camera.updateMatrixWorld(),this.camera_stereo.eyeSep=this.model.get("eye_separation")/100,this.camera.focus=this.camera.focus,this.camera_stereo.update(this.camera),this.camera_stereo.cameraL.position.copy(this.camera.position),this.camera_stereo.cameraR.position.copy(this.camera.position),this.camera_stereo.cameraL.quaternion.copy(this.camera.quaternion),this.camera_stereo.cameraR.quaternion.copy(this.camera.quaternion),this.camera_stereo.cameraL.up.copy(this.camera.up),this.camera_stereo.cameraR.up.copy(this.camera.up);var a="no"!=this.model.get("panorama_mode");this.renderer.setScissorTest(!0),a?(this.renderer.setScissor(0,0,i.width,i.height/2),this.renderer.setViewport(0,0,i.width,i.height/2)):(this.renderer.setScissor(0,0,i.width/2,i.height),this.renderer.setViewport(0,0,i.width/2,i.height)),this._render_eye(this.camera_stereo.cameraL),a?(this.renderer.setScissor(0,i.height/2,i.width,i.height/2),this.renderer.setViewport(0,i.height/2,i.width,i.height/2)):(this.renderer.setScissor(i.width/2,0,i.width/2,i.height),this.renderer.setViewport(i.width/2,0,i.width/2,i.height)),this._render_eye(this.camera_stereo.cameraR),this.renderer.setScissorTest(!1),this.renderer.setViewport(0,0,i.width,i.height)}else this._render_eye(this.camera);this.selector&&this.selector.draw(),this.transitions=e,this.transitions.length>0&&this.update(),this.model.get("render_continuous")&&this.update(),this.model.get("scene").trigger("afterRender",this.scene_volume,this.renderer,this.camera)},get_style_color:function(t){if(style=this.get_style(t),style)return new a.Color(style);console.error("could not find color for",t)},get_style:function(t){var e=[null];return o.each(t.split(" "),t=>{var n=o.reduce(t.split("."),function(t,e){return null!=t&&void 0!=t[e]?t[e]:null},this.model.get("style"),this);null!=n&&null==e[0]&&(e[0]=n)},this),e[0]},_render_eye:function(t){this.camera.updateMatrixWorld();var e=0!=this.model.get("volumes").length,n="no"!=this.model.get("panorama_mode");if(o.each(this.scatter_views,t=>{t.set_limits(o.pick(this.model.attributes,"xlim","ylim","zlim"))},this),o.each(this.mesh_views,t=>{t.set_limits(o.pick(this.model.attributes,"xlim","ylim","zlim"))},this),n){if(this.cube_camera.clear(this.renderer,!0,!0,!0),this.renderer.autoClear=!1,this.cube_camera.position.copy(t.position),this.cube_camera.rotation.copy(t.rotation),this.cube_camera.quaternion.copy(this.camera.quaternion),this.model.get("stereo")){var r=new a.Vector3(0,0,0);t==this.camera_stereo.cameraR&&(r.x+=.032),t==this.camera_stereo.cameraL&&(r.x-=.032),r.applyQuaternion(t.quaternion),this.cube_camera.position.add(r);var i=new a.Vector3(0,0,1*this.camera.focus);i.applyQuaternion(t.quaternion),this.cube_camera.lookAt(i)}return this.cube_camera.update(this.renderer,this.scene_scatter),this.cube_camera.update(this.renderer,this.scene_opaque),this.screen_texture=this.cube_camera.renderTarget,void this.renderer.render(this.screen_scene_cube,this.screen_camera)}e&&(this.renderer.state.buffers.depth.setClear(0),o.each(this.volume_views,t=>{t.box_material.side=a.BackSide,t.box_material.depthFunc=a.GreaterDepth,t.vol_box_mesh.material=t.box_material,t.set_limits(o.pick(this.model.attributes,"xlim","ylim","zlim"))},this),this.renderer.clearTarget(this.volume_back_target,!0,!0,!0),this.renderer.render(this.scene_volume,t,this.volume_back_target),this.renderer.state.buffers.depth.setClear(1),this.renderer.autoClear=!1,this.renderer.clearTarget(this.geometry_depth_target,!0,!0,!0),this.renderer.render(this.scene_scatter,t,this.geometry_depth_target),this.renderer.render(this.scene_opaque,t,this.geometry_depth_target),this.renderer.autoClear=!0),this.renderer.autoClear=!1,this.renderer.clearTarget(this.color_pass_target,!0,!0,!0),this.renderer.render(this.scene_scatter,t,this.color_pass_target),this.renderer.render(this.scene_opaque,t,this.color_pass_target),this.renderer.autoClear=!0,e&&(this.renderer.context.colorMask(0,0,0,0),o.each(this.volume_views,t=>{t.box_material.side=a.FrontSide,t.box_material.depthFunc=a.LessEqualDepth},this),this.renderer.autoClear=!1,this.renderer.clearTarget(this.color_pass_target,!1,!0,!1),this.renderer.render(this.scene_volume,t,this.color_pass_target),this.renderer.autoClear=!0,this.renderer.context.colorMask(!0,!0,!0,!0),o.each(this.volume_views,t=>{t.vol_box_mesh.material=this.material_multivolume},this),this.renderer.autoClear=!1,this.renderer.clearTarget(this.color_pass_target,!1,!1,!1),this.renderer.render(this.scene_volume,t,this.color_pass_target),this.renderer.autoClear=!0),o.each(this.scatter_views,t=>{t.mesh.material=t.mesh.material_rgb},this),o.each(this.mesh_views,t=>{o.each(t.meshes,t=>{t.material=t.material_rgb},this)},this),this.renderer.autoClear=!1,this.renderer.setClearAlpha(0),this.renderer.clearTarget(this.coordinate_texture,!0,!0,!0),this.renderer.render(this.scene_scatter,t,this.coordinate_texture),this.renderer.autoClear=!0,e&&(this.renderer.context.colorMask(0,0,0,0),o.each(this.volume_views,t=>{t.box_material.side=a.FrontSide,t.box_material.depthFunc=a.LessEqualDepth},this),this.renderer.autoClear=!1,this.renderer.clearTarget(this.color_pass_target,!1,!0,!1),this.renderer.render(this.scene_volume,t,this.color_pass_target),this.renderer.autoClear=!0,this.renderer.context.colorMask(!0,!0,!0,!0),o.each(this.volume_views,t=>{t.vol_box_mesh.material=this.material_multivolume_depth},this),this.renderer.autoClear=!1,this.renderer.clearTarget(this.color_pass_target,!1,!1,!1),this.renderer.render(this.scene_volume,t,this.coordinate_texture),this.renderer.autoClear=!0),o.each(this.scatter_views,t=>{t.mesh.material=t.mesh.material_normal},this),o.each(this.mesh_views,t=>{o.each(t.meshes,t=>{t.material=t.material_normal},this)},this),this.screen_texture={Volume:this.color_pass_target,Back:this.volume_back_target,Geometry_back:this.geometry_depth_target,Coordinate:this.coordinate_texture}[this.model.get("show")],this.screen_material.uniforms.tex.value=this.screen_texture.texture,this.renderer.render(this.screen_scene,this.screen_camera)},rebuild_multivolume_rendering_material:function(){var t=this.model.get("volumes");if(0==t.length)return;var e=this.material_multivolume,n=this.material_multivolume_depth,r=0,i=0;e.uniforms.volumes.value=[],e.uniforms.volumes_max_int.value=[],e.uniforms.data.value=[],e.uniforms.data_max_int.value=[],e.uniforms.transfer_function.value=[],e.uniforms.transfer_function_max_int.value=[],e.uniforms.steps.value=o.max(t.map(t=>{let e=this.volume_views[t.cid];return e?e.get_ray_steps():0})),o.each(t,t=>{let n=this.volume_views[t.cid];if(n){n.model;n.is_normal()?(r++,e.uniforms.volumes.value.push(n.uniform_volumes_values),e.uniforms.data.value.push(n.uniform_data.value[0]),e.uniforms.transfer_function.value.push(n.uniform_transfer_function.value[0])):(i++,e.uniforms.volumes_max_int.value.push(n.uniform_volumes_values),e.uniforms.data_max_int.value.push(n.uniform_data.value[0]),e.uniforms.transfer_function_max_int.value.push(n.uniform_transfer_function.value[0]))}}),e.defines.VOLUME_COUNT=r,e.defines.VOLUME_COUNT_MAX_INT=i,n.defines.VOLUME_COUNT=r,n.defines.VOLUME_COUNT_MAX_INT=i;n.fragmentShader=e.fragmentShader=(t=>{var e={volumes:o.range(r),volumes_max_int:o.range(i)};return l.render(t,e)})(m.volr_fragment),n.vertexShader=e.vertexShader=m.volr_vertex,n.needsUpdate=e.needsUpdate=!0},update_light:function(){this.material_multivolume.uniforms.ambient_coefficient.value=this.model.get("ambient_coefficient"),this.material_multivolume.uniforms.diffuse_coefficient.value=this.model.get("diffuse_coefficient"),this.material_multivolume.uniforms.specular_coefficient.value=this.model.get("specular_coefficient"),this.material_multivolume.uniforms.specular_exponent.value=this.model.get("specular_exponent"),this.update()},update_size:function(){this._update_size()},_update_size:function(t,e,n){var r,i,o=this.renderer.domElement;this.is_fullscreen()?(r=e||o.clientWidth,i=n||o.clientHeight):(r=e||this.model.get("width"),i=n||this.model.get("height"));var a=r,s=i,u=r*this.model.get("displayscale"),c=i*this.model.get("displayscale");this.is_fullscreen()&&0!=this.model.get("volumes")&&(a=e||this.model.get("width"),s=n||this.model.get("height")),this.renderer.setSize(r,i,!1);var l=this.renderer.context.drawingBufferWidth,h=this.renderer.context.drawingBufferWidth;(l<r||h<i)&&console.info("could not set resolution to",r,i,", resolution is",l,h),this.renderer.domElement.style.width=u+"px",this.renderer.domElement.style.height=c+"px",this.canvas_container.style.width=u+"px",this.canvas_container.style.height=c+"px",this.canvas_overlay.style.width=u+"px",this.canvas_overlay.style.height=i+"px",this.canvas_overlay.width=r,this.canvas_overlay.height=i,this.model.get("stereo")&&(a/=2);var f=(a/=this.model.get("downscale"))/(s/=this.model.get("downscale"));this.camera.aspect=f,this.camera.updateProjectionMatrix(),this.material_multivolume.uniforms.render_size.value=[a,s],this.volume_back_target.setSize(a,s),this.geometry_depth_target.setSize(a,s),this.color_pass_target.setSize(a,s),this.screen_pass_target.setSize(a,s),this.coordinate_texture.setSize(a,s),this.screen_texture=this.color_pass_target.texture,t||this.update()},getRenderSize:function(){var t=this.renderer.getSize();return[t.width,t.width]},fullscreen:function(){c.request(this.el)},is_fullscreen:function(){return c.element===this.renderer.domElement}}),E=i.DOMWidgetModel.extend({defaults:function(){return o.extend(i.DOMWidgetModel.prototype.defaults(),{_model_name:"FigureModel",_view_name:"FigureView",_model_module:"ipyvolume",_view_module:"ipyvolume",_model_module_version:h,_view_module_version:h,eye_separation:6.4,stereo:!1,camera_control:"trackball",camera_fov:45,camera_center:[0,0,0],ambient_coefficient:.5,diffuse_coefficient:.8,specular_coefficient:.5,specular_exponent:5,width:500,height:400,downscale:1,displayscale:1,scatters:null,meshes:null,volumes:null,show:"Volume",xlim:[0,1],ylim:[0,1],zlim:[0,1],xlabel:"x",ylabel:"y",zlabel:"z",animation:1e3,animation_exponent:1,style:f.light,render_continuous:!1,selector:"lasso",selection_mode:"replace",mouse_mode:"normal",panorama_mode:"no",capture_fps:void 0,cube_resolution:512})}},{serializers:o.extend({scatters:{deserialize:i.unpack_models},meshes:{deserialize:i.unpack_models},volumes:{deserialize:i.unpack_models},camera:{deserialize:i.unpack_models},scene:{deserialize:i.unpack_models}},i.DOMWidgetModel.serializers)}),S=i.WidgetModel.extend({defaults:function(){return o.extend(i.WidgetModel.prototype.defaults(),{_model_name:"WidgetManagerHackModel",_model_module:"ipyvolume",_model_module_version:h})},initialize:function(t,e){console.log(this),S.__super__.initialize.apply(this,arguments),console.info("get reference to widget manager"),window.jupyter_widget_manager=this.widget_manager,window.jupyter_widgets=i}});t.exports={WidgetManagerHackModel:S,FigureModel:E,FigureView:M}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(49);e.SpriteText2D=r.SpriteText2D;var i=n(51);e.MeshText2D=i.MeshText2D;var o=n(16);e.textAlign=o.textAlign},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.raycast=function(){return this.sprite.raycast.apply(this.sprite,arguments)},e.prototype.updateText=function(){this.canvas.drawText(this._text,{font:this._font,fillStyle:this._fillStyle}),this.cleanUp(),this.texture=new i.Texture(this.canvas.canvas),this.texture.needsUpdate=!0,this.applyAntiAlias(),this.material?this.material.map=this.texture:this.material=new i.SpriteMaterial({map:this.texture}),this.sprite||(this.sprite=new i.Sprite(this.material),this.geometry=this.sprite.geometry,this.add(this.sprite)),this.sprite.scale.set(this.canvas.width,this.canvas.height,1),this.sprite.position.x=this.canvas.width/2-this.canvas.textWidth/2+this.canvas.textWidth/2*this.align.x,this.sprite.position.y=-this.canvas.height/2+this.canvas.textHeight/2*this.align.y},e}(n(21).Text2D);e.SpriteText2D=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(16),o=function(){function t(){this.textWidth=null,this.textHeight=null,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}return Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},enumerable:!0,configurable:!0}),t.prototype.drawText=function(t,e){return this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.font=e.font,this.textWidth=Math.ceil(this.ctx.measureText(t).width),this.textHeight=i.getFontHeight(this.ctx.font),this.canvas.width=r.Math.ceilPowerOfTwo(this.textWidth),this.canvas.height=r.Math.ceilPowerOfTwo(this.textHeight),this.ctx.font=e.font,this.ctx.fillStyle=e.fillStyle,this.ctx.textAlign="left",this.ctx.textBaseline="top",this.ctx.shadowColor=e.shadowColor,this.ctx.shadowBlur=e.shadowBlur,this.ctx.shadowOffsetX=e.shadowOffsetX,this.ctx.shadowOffsetY=e.shadowOffsetY,this.ctx.fillText(t,0,0),this.canvas},t}();e.CanvasText=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=function(t){function e(e,n){return void 0===e&&(e=""),void 0===n&&(n={}),t.call(this,e,n)||this}return r(e,t),e.prototype.raycast=function(){this.mesh.raycast.apply(this.mesh,arguments)},e.prototype.updateText=function(){this.cleanUp(),this.canvas.drawText(this._text,{font:this._font,fillStyle:this._fillStyle,shadowBlur:this._shadowBlur,shadowColor:this._shadowColor,shadowOffsetX:this._shadowOffsetX,shadowOffsetY:this._shadowOffsetY}),this.texture=new i.Texture(this.canvas.canvas),this.texture.needsUpdate=!0,this.applyAntiAlias(),this.material?this.material.map=this.texture:(this.material=new i.MeshBasicMaterial({map:this.texture,side:this.side}),this.material.transparent=!0),this.mesh||(this.geometry=new i.PlaneGeometry(this.canvas.width,this.canvas.height),this.mesh=new i.Mesh(this.geometry,this.material),this.add(this.mesh)),this.mesh.position.x=this.canvas.width/2-this.canvas.textWidth/2+this.canvas.textWidth/2*this.align.x,this.mesh.position.y=-this.canvas.height/2+this.canvas.textHeight/2*this.align.y,this.geometry.vertices[0].x=this.geometry.vertices[2].x=-this.canvas.width/2,this.geometry.vertices[1].x=this.geometry.vertices[3].x=this.canvas.width/2,this.geometry.vertices[0].y=this.geometry.vertices[1].y=this.canvas.height/2,this.geometry.vertices[2].y=this.geometry.vertices[3].y=-this.canvas.height/2,this.geometry.verticesNeedUpdate=!0},e}(n(21).Text2D);e.MeshText2D=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);e.glMatrix=r;const i=n(53);e.mat2=i;const o=n(54);e.mat2d=o;const a=n(22);e.mat3=a;const s=n(55);e.mat4=s;const u=n(56);e.quat=u;const c=n(57);e.vec2=c;const l=n(23);e.vec3=l;const h=n(24);e.vec4=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);function i(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*l,t[3]=i*c+a*l,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}e.create=function(){let t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){let e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,n,i){let o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o},e.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.transpose=function(t,e){if(t===e){let n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null},e.adjoint=function(t,e){let n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=i,e.rotate=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},e.scale=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t},e.fromRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=o,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let n=t[0],i=t[1],o=t[2],a=t[3],s=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))},e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.mul=i,e.sub=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);function i(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1],h=n[2],f=n[3],d=n[4],p=n[5];return t[0]=r*c+o*l,t[1]=i*c+a*l,t[2]=r*h+o*f,t[3]=i*h+a*f,t[4]=r*d+o*p+s,t[5]=i*d+a*p+u,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}e.create=function(){let t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){let e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,n,i,o,a){let s=new r.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=i,s[4]=o,s[5]=a,s},e.set=function(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-n*s)*u,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=i,e.rotate=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*c,t[1]=i*l+a*c,t[2]=r*-c+o*l,t[3]=i*-c+a*l,t[4]=s,t[5]=u,t},e.scale=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=i*c,t[2]=o*l,t[3]=a*l,t[4]=s,t[5]=u,t},e.translate=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*l+s,t[5]=i*c+a*l+u,t},e.fromRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},e.subtract=o,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){let n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=e[0],l=e[1],h=e[2],f=e[3],d=e[4],p=e[5];return Math.abs(n-c)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-h)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-f)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-d)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(u-p)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))},e.mul=i,e.sub=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);function i(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],p=e[11],_=e[12],m=e[13],v=e[14],g=e[15],y=n[0],b=n[1],w=n[2],x=n[3];return t[0]=y*r+b*s+w*h+x*_,t[1]=y*i+b*u+w*f+x*m,t[2]=y*o+b*c+w*d+x*v,t[3]=y*a+b*l+w*p+x*g,y=n[4],b=n[5],w=n[6],x=n[7],t[4]=y*r+b*s+w*h+x*_,t[5]=y*i+b*u+w*f+x*m,t[6]=y*o+b*c+w*d+x*v,t[7]=y*a+b*l+w*p+x*g,y=n[8],b=n[9],w=n[10],x=n[11],t[8]=y*r+b*s+w*h+x*_,t[9]=y*i+b*u+w*f+x*m,t[10]=y*o+b*c+w*d+x*v,t[11]=y*a+b*l+w*p+x*g,y=n[12],b=n[13],w=n[14],x=n[15],t[12]=y*r+b*s+w*h+x*_,t[13]=y*i+b*u+w*f+x*m,t[14]=y*o+b*c+w*d+x*v,t[15]=y*a+b*l+w*p+x*g,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}e.create=function(){let t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){let e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,n,i,o,a,s,u,c,l,h,f,d,p,_,m){let v=new r.ARRAY_TYPE(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=i,v[4]=o,v[5]=a,v[6]=s,v[7]=u,v[8]=c,v[9]=l,v[10]=h,v[11]=f,v[12]=d,v[13]=p,v[14]=_,v[15]=m,v},e.set=function(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,_,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=h,t[11]=f,t[12]=d,t[13]=p,t[14]=_,t[15]=m,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.transpose=function(t,e){if(t===e){let n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],p=e[12],_=e[13],m=e[14],v=e[15],g=n*s-r*a,y=n*u-i*a,b=n*c-o*a,w=r*u-i*s,x=r*c-o*s,M=i*c-o*u,E=l*_-h*p,S=l*m-f*p,A=l*v-d*p,k=h*m-f*_,T=h*v-d*_,O=f*v-d*m,C=g*O-y*T+b*k+w*A-x*S+M*E;return C?(C=1/C,t[0]=(s*O-u*T+c*k)*C,t[1]=(i*T-r*O-o*k)*C,t[2]=(_*M-m*x+v*w)*C,t[3]=(f*x-h*M-d*w)*C,t[4]=(u*A-a*O-c*S)*C,t[5]=(n*O-i*A+o*S)*C,t[6]=(m*b-p*M-v*y)*C,t[7]=(l*M-f*b+d*y)*C,t[8]=(a*T-s*A+c*E)*C,t[9]=(r*A-n*T-o*E)*C,t[10]=(p*x-_*b+v*g)*C,t[11]=(h*b-l*x-d*g)*C,t[12]=(s*S-a*k-u*E)*C,t[13]=(n*k-r*S+i*E)*C,t[14]=(_*y-p*w-m*g)*C,t[15]=(l*w-h*y+f*g)*C,t):null},e.adjoint=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],p=e[12],_=e[13],m=e[14],v=e[15];return t[0]=s*(f*v-d*m)-h*(u*v-c*m)+_*(u*d-c*f),t[1]=-(r*(f*v-d*m)-h*(i*v-o*m)+_*(i*d-o*f)),t[2]=r*(u*v-c*m)-s*(i*v-o*m)+_*(i*c-o*u),t[3]=-(r*(u*d-c*f)-s*(i*d-o*f)+h*(i*c-o*u)),t[4]=-(a*(f*v-d*m)-l*(u*v-c*m)+p*(u*d-c*f)),t[5]=n*(f*v-d*m)-l*(i*v-o*m)+p*(i*d-o*f),t[6]=-(n*(u*v-c*m)-a*(i*v-o*m)+p*(i*c-o*u)),t[7]=n*(u*d-c*f)-a*(i*d-o*f)+l*(i*c-o*u),t[8]=a*(h*v-d*_)-l*(s*v-c*_)+p*(s*d-c*h),t[9]=-(n*(h*v-d*_)-l*(r*v-o*_)+p*(r*d-o*h)),t[10]=n*(s*v-c*_)-a*(r*v-o*_)+p*(r*c-o*s),t[11]=-(n*(s*d-c*h)-a*(r*d-o*h)+l*(r*c-o*s)),t[12]=-(a*(h*m-f*_)-l*(s*m-u*_)+p*(s*f-u*h)),t[13]=n*(h*m-f*_)-l*(r*m-i*_)+p*(r*f-i*h),t[14]=-(n*(s*m-u*_)-a*(r*m-i*_)+p*(r*u-i*s)),t[15]=n*(s*f-u*h)-a*(r*f-i*h)+l*(r*u-i*s),t},e.determinant=function(t){let e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=t[12],p=t[13],_=t[14],m=t[15];return(e*a-n*o)*(h*m-f*_)-(e*s-r*o)*(l*m-f*p)+(e*u-i*o)*(l*_-h*p)+(n*s-r*a)*(c*m-f*d)-(n*u-i*a)*(c*_-h*d)+(r*u-i*s)*(c*p-l*d)},e.multiply=i,e.translate=function(t,e,n){let r,i,o,a,s,u,c,l,h,f,d,p,_=n[0],m=n[1],v=n[2];return e===t?(t[12]=e[0]*_+e[4]*m+e[8]*v+e[12],t[13]=e[1]*_+e[5]*m+e[9]*v+e[13],t[14]=e[2]*_+e[6]*m+e[10]*v+e[14],t[15]=e[3]*_+e[7]*m+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=r*_+s*m+h*v+e[12],t[13]=i*_+u*m+f*v+e[13],t[14]=o*_+c*m+d*v+e[14],t[15]=a*_+l*m+p*v+e[15]),t},e.scale=function(t,e,n){let r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,i){let o,a,s,u,c,l,h,f,d,p,_,m,v,g,y,b,w,x,M,E,S,A,k,T,O=i[0],C=i[1],R=i[2],j=Math.sqrt(O*O+C*C+R*R);return Math.abs(j)<r.EPSILON?null:(O*=j=1/j,C*=j,R*=j,o=Math.sin(n),s=1-(a=Math.cos(n)),u=e[0],c=e[1],l=e[2],h=e[3],f=e[4],d=e[5],p=e[6],_=e[7],m=e[8],v=e[9],g=e[10],y=e[11],b=O*O*s+a,w=C*O*s+R*o,x=R*O*s-C*o,M=O*C*s-R*o,E=C*C*s+a,S=R*C*s+O*o,A=O*R*s+C*o,k=C*R*s-O*o,T=R*R*s+a,t[0]=u*b+f*w+m*x,t[1]=c*b+d*w+v*x,t[2]=l*b+p*w+g*x,t[3]=h*b+_*w+y*x,t[4]=u*M+f*E+m*S,t[5]=c*M+d*E+v*S,t[6]=l*M+p*E+g*S,t[7]=h*M+_*E+y*S,t[8]=u*A+f*k+m*T,t[9]=c*A+d*k+v*T,t[10]=l*A+p*k+g*T,t[11]=h*A+_*k+y*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+h*r,t[7]=u*i+f*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=h*i-s*r,t[11]=f*i-u*r,t},e.rotateY=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-h*r,t[3]=u*i-f*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+h*i,t[11]=u*r+f*i,t},e.rotateZ=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+h*r,t[3]=u*i+f*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=h*i-s*r,t[7]=f*i-u*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){let i,o,a,s=n[0],u=n[1],c=n[2],l=Math.sqrt(s*s+u*u+c*c);return Math.abs(l)<r.EPSILON?null:(s*=l=1/l,u*=l,c*=l,i=Math.sin(e),a=1-(o=Math.cos(e)),t[0]=s*s*a+o,t[1]=u*s*a+c*i,t[2]=c*s*a-u*i,t[3]=0,t[4]=s*u*a-c*i,t[5]=u*u*a+o,t[6]=c*u*a+s*i,t[7]=0,t[8]=s*c*a+u*i,t[9]=u*c*a-s*i,t[10]=c*c*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,l=r*s,h=r*u,f=r*c,d=i*u,p=i*c,_=o*c,m=a*s,v=a*u,g=a*c;return t[0]=1-(d+_),t[1]=h+g,t[2]=f-v,t[3]=0,t[4]=h-g,t[5]=1-(l+_),t[6]=p+m,t[7]=0,t[8]=f+v,t[9]=p-m,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(o*o+a*a+s*s),t[2]=Math.sqrt(u*u+c*c+l*l),t},e.getRotation=function(t,e){let n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},e.fromRotationTranslationScale=function(t,e,n,r){let i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,l=a+a,h=i*u,f=i*c,d=i*l,p=o*c,_=o*l,m=a*l,v=s*u,g=s*c,y=s*l,b=r[0],w=r[1],x=r[2];return t[0]=(1-(p+m))*b,t[1]=(f+y)*b,t[2]=(d-g)*b,t[3]=0,t[4]=(f-y)*w,t[5]=(1-(h+m))*w,t[6]=(_+v)*w,t[7]=0,t[8]=(d+g)*x,t[9]=(_-v)*x,t[10]=(1-(h+p))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,i){let o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,l=a+a,h=s+s,f=o*c,d=o*l,p=o*h,_=a*l,m=a*h,v=s*h,g=u*c,y=u*l,b=u*h,w=r[0],x=r[1],M=r[2],E=i[0],S=i[1],A=i[2];return t[0]=(1-(_+v))*w,t[1]=(d+b)*w,t[2]=(p-y)*w,t[3]=0,t[4]=(d-b)*x,t[5]=(1-(f+v))*x,t[6]=(m+g)*x,t[7]=0,t[8]=(p+y)*M,t[9]=(m-g)*M,t[10]=(1-(f+_))*M,t[11]=0,t[12]=n[0]+E-(t[0]*E+t[4]*S+t[8]*A),t[13]=n[1]+S-(t[1]*E+t[5]*S+t[9]*A),t[14]=n[2]+A-(t[2]*E+t[6]*S+t[10]*A),t[15]=1,t},e.fromQuat=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,h=r*s,f=i*a,d=i*s,p=i*u,_=o*a,m=o*s,v=o*u;return t[0]=1-h-p,t[1]=l+v,t[2]=f-m,t[3]=0,t[4]=l-v,t[5]=1-c-p,t[6]=d+_,t[7]=0,t[8]=f+m,t[9]=d-_,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,i,o,a){let s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},e.perspective=function(t,e,n,r,i){let o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,n,r){let i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,i,o,a){let s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t},e.lookAt=function(t,e,n,i){let o,a,s,u,c,l,h,f,d,p,_=e[0],m=e[1],v=e[2],g=i[0],y=i[1],b=i[2],w=n[0],x=n[1],M=n[2];return Math.abs(_-w)<r.EPSILON&&Math.abs(m-x)<r.EPSILON&&Math.abs(v-M)<r.EPSILON?mat4.identity(t):(h=_-w,f=m-x,d=v-M,o=y*(d*=p=1/Math.sqrt(h*h+f*f+d*d))-b*(f*=p),a=b*(h*=p)-g*d,s=g*f-y*h,(p=Math.sqrt(o*o+a*a+s*s))?(o*=p=1/p,a*=p,s*=p):(o=0,a=0,s=0),u=f*s-d*a,c=d*o-h*s,l=h*a-f*o,(p=Math.sqrt(u*u+c*c+l*l))?(u*=p=1/p,c*=p,l*=p):(u=0,c=0,l=0),t[0]=o,t[1]=u,t[2]=h,t[3]=0,t[4]=a,t[5]=c,t[6]=f,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=-(o*_+a*m+s*v),t[13]=-(u*_+c*m+l*v),t[14]=-(h*_+f*m+d*v),t[15]=1,t)},e.targetTo=function(t,e,n,r){let i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],c=r[2],l=i-n[0],h=o-n[1],f=a-n[2],d=l*l+h*h+f*f;d>0&&(l*=d=1/Math.sqrt(d),h*=d,f*=d);let p=u*f-c*h,_=c*l-s*f,m=s*h-u*l;return t[0]=p,t[1]=_,t[2]=m,t[3]=0,t[4]=h*m-f*_,t[5]=f*p-l*m,t[6]=l*_-h*p,t[7]=0,t[8]=l,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=o,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){let n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],p=t[11],_=t[12],m=t[13],v=t[14],g=t[15],y=e[0],b=e[1],w=e[2],x=e[3],M=e[4],E=e[5],S=e[6],A=e[7],k=e[8],T=e[9],O=e[10],C=e[11],R=e[12],j=e[13],N=e[14],P=e[15];return Math.abs(n-y)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(i-b)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-w)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-x)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(s-M)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-E)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-S)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-A)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(h-k)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(f-T)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(d-O)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(p-C)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(_-R)<=r.EPSILON*Math.max(1,Math.abs(_),Math.abs(R))&&Math.abs(m-j)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(j))&&Math.abs(v-N)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(g-P)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(P))},e.mul=i,e.sub=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3),i=n(22),o=n(23),a=n(24);function s(){let t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function u(t,e,n){n*=.5;let r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function c(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-r*c,t[2]=o*l+a*c+r*u-i*s,t[3]=a*l-r*s-i*u-o*c,t}function l(t,e,n,r){let i,o,a,s,u,c=e[0],l=e[1],h=e[2],f=e[3],d=n[0],p=n[1],_=n[2],m=n[3];return(o=c*d+l*p+h*_+f*m)<0&&(o=-o,d=-d,p=-p,_=-_,m=-m),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*c+u*d,t[1]=s*l+u*p,t[2]=s*h+u*_,t[3]=s*f+u*m,t}function h(t,e){let n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);let i=(r+1)%3,o=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*i+i]-e[3*o+o]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*i+o]-e[3*o+i])*n,t[i]=(e[3*i+r]+e[3*r+i])*n,t[o]=(e[3*o+r]+e[3*r+o])*n}return t}e.create=s,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=u,e.getAxisAngle=function(t,e){let n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},e.multiply=c,e.rotateX=function(t,e,n){n*=.5;let r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t},e.rotateY=function(t,e,n){n*=.5;let r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t},e.rotateZ=function(t,e,n){n*=.5;let r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},e.calculateW=function(t,e){let n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t},e.slerp=l,e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=h,e.fromEuler=function(t,e,n,r){let i=.5*Math.PI/180;e*=i,n*=i,r*=i;let o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=o*u*l-a*s*c,t[1]=a*s*l+o*u*c,t[2]=a*u*c-o*s*l,t[3]=a*u*l+o*s*c,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.clone=a.clone,e.fromValues=a.fromValues,e.copy=a.copy,e.set=a.set,e.add=a.add,e.mul=c,e.scale=a.scale,e.dot=a.dot,e.lerp=a.lerp,e.length=a.length,e.len=e.length,e.squaredLength=a.squaredLength,e.sqrLen=e.squaredLength,e.normalize=a.normalize,e.exactEquals=a.exactEquals,e.equals=a.equals,e.rotationTo=function(){let t=o.create(),n=o.fromValues(1,0,0),r=o.fromValues(0,1,0);return function(i,a,s){let c=o.dot(a,s);return c<-.999999?(o.cross(t,n,a),o.len(t)<1e-6&&o.cross(t,r,a),o.normalize(t,t),u(i,t,Math.PI),i):c>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(o.cross(t,a,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+c,e.normalize(i,i))}}(),e.sqlerp=function(){let t=s(),e=s();return function(n,r,i,o,a,s){return l(t,r,a,s),l(e,i,o,s),l(n,t,e,2*s*(1-s)),n}}(),e.setAxes=function(){let t=i.create();return function(n,r,i,o){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],e.normalize(n,h(n,t))}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3);function i(){let t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function a(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function l(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function h(t){var e=t[0],n=t[1];return e*e+n*n}e.create=i,e.clone=function(t){let e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){let n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=o,e.multiply=a,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=u,e.squaredDistance=c,e.length=l,e.squaredLength=h,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t},e.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t},e.transformMat2d=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t},e.transformMat4=function(t,e,n){let r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){let n=t[0],i=t[1],o=e[0],a=e[1];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))},e.len=l,e.sub=o,e.mul=a,e.div=s,e.dist=u,e.sqrDist=c,e.sqrLen=h,e.forEach=function(){let t=i();return function(e,n,r,i,o,a){let s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}()},function(t,e,n){!function(t){"use strict";var e=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},n=function(t){return 1===t.length&&(t=function(t){return function(n,r){return e(t(n),r)}}(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}},r=n(e),i=r.right,o=r.left,a=function(t){return null===t?NaN:+t},s=function(t,e){var n,r,i=t.length,o=0,s=0,u=-1,c=0;if(null==e)for(;++u<i;)isNaN(n=a(t[u]))||(o+=(r=n-o)/++c,s+=r*(n-o));else for(;++u<i;)isNaN(n=a(e(t[u],u,t)))||(o+=(r=n-o)/++c,s+=r*(n-o));if(c>1)return s/(c-1)},u=function(t,e){var n=s(t,e);return n?Math.sqrt(n):n},c=function(t,e){var n,r,i,o=-1,a=t.length;if(null==e){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=e(t[o],o,t))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e(t[o],o,t))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},l=Array.prototype,h=l.slice,f=l.map,d=function(t){return function(){return t}},p=function(t){return t},_=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},m=Math.sqrt(50),v=Math.sqrt(10),g=Math.sqrt(2),y=function(t,e,n){var r=b(t,e,n);return _(Math.ceil(t/r)*r,Math.floor(e/r)*r+r/2,r)};function b(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=m?i*=10:o>=v?i*=5:o>=g&&(i*=2),e<t?-i:i}var w=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},x=function(t,e,n){if(null==n&&(n=a),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),u=+n(t[o+1],o+1,t);return s+(u-s)*(i-o)}},M=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n},E=function(t,e){var n,r,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e(t[i],i,t))&&n>r&&(n=r)}return n},S=function(t){if(!(i=t.length))return[];for(var e=-1,n=E(t,A),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r};function A(t){return t.length}var k=Array.prototype.slice,T=function(t){return t},O=1,C=2,R=3,j=4,N=1e-6;function P(t,e,n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"}function I(t,e,n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"}function L(){return!this.__axis}function z(t,e){var n=[],r=null,i=null,o=6,a=6,s=3;function u(u){var c,l=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,h=null==i?e.tickFormat?e.tickFormat.apply(e,n):T:i,f=Math.max(o,0)+s,d=t===O||t===R?P:I,p=e.range(),_=p[0]+.5,m=p[p.length-1]+.5,v=(e.bandwidth?function(t){var e=t.bandwidth()/2;return t.round()&&(e=Math.round(e)),function(n){return t(n)+e}}:T)(e.copy()),g=u.selection?u.selection():u,y=g.selectAll(".domain").data([null]),b=g.selectAll(".tick").data(l,e).order(),w=b.exit(),x=b.enter().append("g").attr("class","tick"),M=b.select("line"),E=b.select("text"),S=t===O||t===j?-1:1,A=t===j||t===C?(c="x","y"):(c="y","x");y=y.merge(y.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),b=b.merge(x),M=M.merge(x.append("line").attr("stroke","#000").attr(c+"2",S*o).attr(A+"1",.5).attr(A+"2",.5)),E=E.merge(x.append("text").attr("fill","#000").attr(c,S*f).attr(A,.5).attr("dy",t===O?"0em":t===R?"0.71em":"0.32em")),u!==g&&(y=y.transition(u),b=b.transition(u),M=M.transition(u),E=E.transition(u),w=w.transition(u).attr("opacity",N).attr("transform",function(t){return d(v,this.parentNode.__axis||v,t)}),x.attr("opacity",N).attr("transform",function(t){return d(this.parentNode.__axis||v,v,t)})),w.remove(),y.attr("d",t===j||t==C?"M"+S*a+","+_+"H0.5V"+m+"H"+S*a:"M"+_+","+S*a+"V0.5H"+m+"V"+S*a),b.attr("opacity",1).attr("transform",function(t){return d(v,v,t)}),M.attr(c+"2",S*o),E.attr(c,S*f).text(h),g.filter(L).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===C?"start":t===j?"end":"middle"),g.each(function(){this.__axis=v})}return u.scale=function(t){return arguments.length?(e=t,u):e},u.ticks=function(){return n=k.call(arguments),u},u.tickArguments=function(t){return arguments.length?(n=null==t?[]:k.call(t),u):n.slice()},u.tickValues=function(t){return arguments.length?(r=null==t?null:k.call(t),u):r&&r.slice()},u.tickFormat=function(t){return arguments.length?(i=t,u):i},u.tickSize=function(t){return arguments.length?(o=a=+t,u):o},u.tickSizeInner=function(t){return arguments.length?(o=+t,u):o},u.tickSizeOuter=function(t){return arguments.length?(a=+t,u):a},u.tickPadding=function(t){return arguments.length?(s=+t,u):s},u}var U={value:function(){}};function q(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new D(r)}function D(t){this._=t}function F(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function B(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=U,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}D.prototype=q.prototype={constructor:D,on:function(t,e){var n,r=this._,i=function(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=B(r[n],t.name,e);else if(null==e)for(n in r)r[n]=B(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=F(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new D(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var H="http://www.w3.org/1999/xhtml",Y={svg:"http://www.w3.org/2000/svg",xhtml:H,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},V=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Y.hasOwnProperty(e)?{space:Y[e],local:t}:t},W=function(t){var e=V(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===H&&e.documentElement.namespaceURI===H?e.createElement(t):e.createElementNS(n,t)}})(e)},X=0;function G(){return new Z}function Z(){this._="@"+(++X).toString(36)}Z.prototype=G.prototype={constructor:Z,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var K=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var $=document.documentElement;if(!$.matches){var Q=$.webkitMatchesSelector||$.msMatchesSelector||$.mozMatchesSelector||$.oMatchesSelector;K=function(t){return function(){return Q.call(this,t)}}}}var J=K,tt={};if(t.event=null,"undefined"!=typeof document){var et=document.documentElement;"onmouseenter"in et||(tt={mouseenter:"mouseover",mouseleave:"mouseout"})}function nt(t,e,n){return t=rt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function rt(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function it(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function ot(t,e,n){var r=tt.hasOwnProperty(t.type)?nt:rt;return function(i,o,a){var s,u=this.__on,c=r(e,o,a);if(u)for(var l=0,h=u.length;l<h;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function at(e,n,r,i){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}}var st=function(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n},ut=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},ct=function(t){var e=st();return e.changedTouches&&(e=e.changedTouches[0]),ut(t,e)};function lt(){}var ht=function(t){return null==t?lt:function(){return this.querySelector(t)}};function ft(){return[]}var dt=function(t){return null==t?ft:function(){return this.querySelectorAll(t)}},pt=function(t){return new Array(t.length)};function _t(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}_t.prototype={constructor:_t,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var mt="$";function vt(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new _t(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function gt(t,e,n,r,i,o,a){var s,u,c,l={},h=e.length,f=o.length,d=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(d[s]=c=mt+a.call(u,u.__data__,s,e),c in l?i[s]=u:l[c]=u);for(s=0;s<f;++s)c=mt+a.call(t,o[s],s,o),(u=l[c])?(r[s]=u,u.__data__=o[s],l[c]=null):n[s]=new _t(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&l[d[s]]===u&&(i[s]=u)}function yt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var bt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function wt(t){return t.trim().split(/^|\s+/)}function xt(t){return t.classList||new Mt(t)}function Mt(t){this._node=t,this._names=wt(t.getAttribute("class")||"")}function Et(t,e){for(var n=xt(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function St(t,e){for(var n=xt(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function At(){this.textContent=""}function kt(){this.innerHTML=""}function Tt(){this.nextSibling&&this.parentNode.appendChild(this)}function Ot(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ct(){return null}function Rt(){var t=this.parentNode;t&&t.removeChild(this)}function jt(t,e,n){var r=bt(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}Mt.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Nt=[null];function Pt(t,e){this._groups=t,this._parents=e}function It(){return new Pt([[document.documentElement]],Nt)}Pt.prototype=It.prototype={constructor:Pt,select:function(t){"function"!=typeof t&&(t=ht(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),l=0;l<u;++l)(o=s[l])&&(a=t.call(o,o.__data__,l,s))&&("__data__"in o&&(a.__data__=o.__data__),c[l]=a);return new Pt(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=dt(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new Pt(r,i)},filter:function(t){"function"!=typeof t&&(t=J(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Pt(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(t){d[++c]=t}),d;var n=e?gt:vt,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],h=i[c],f=h.length,d=t.call(l,l&&l.__data__,c,r),p=d.length,_=s[c]=new Array(p),m=a[c]=new Array(p),v=u[c]=new Array(f);n(l,h,_,m,v,d,e);for(var g,y,b=0,w=0;b<p;++b)if(g=_[b]){for(b>=w&&(w=b+1);!(y=m[w])&&++w<p;);g._next=y||null}}return(a=new Pt(a,r))._enter=s,a._exit=u,a},enter:function(){return new Pt(this._enter||this._groups.map(pt),this._parents)},exit:function(){return new Pt(this._exit||this._groups.map(pt),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],h=c.length,f=a[s]=new Array(h),d=0;d<h;++d)(u=c[d]||l[d])&&(f[d]=u);for(;s<r;++s)a[s]=e[s];return new Pt(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=yt);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new Pt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=V(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){var r;return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):bt(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=wt(t+"");if(arguments.length<2){for(var r=xt(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?Et:St)(this,t)}}:e?function(t){return function(){Et(this,t)}}:function(t){return function(){St(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?At:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?kt:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(Tt)},lower:function(){return this.each(Ot)},append:function(t){var e="function"==typeof t?t:W(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:W(t),r=null==e?Ct:"function"==typeof e?e:ht(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Rt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?ot:it,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return jt(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return jt(this,t,e)}})(t,e))}};var Lt=function(t){return"string"==typeof t?new Pt([[document.querySelector(t)]],[document.documentElement]):new Pt([[t]],Nt)},zt=function(t,e,n){arguments.length<3&&(n=e,e=st().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return ut(t,r);return null};function Ut(){t.event.stopImmediatePropagation()}var qt=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},Dt=function(t){var e=t.document.documentElement,n=Lt(t).on("dragstart.drag",qt,!0);"onselectstart"in e?n.on("selectstart.drag",qt,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function Ft(t,e){var n=t.document.documentElement,r=Lt(t).on("dragstart.drag",null);e&&(r.on("click.drag",qt,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Bt=function(t){return function(){return t}};function Ht(t,e,n,r,i,o,a,s,u,c){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=u,this._=c}function Yt(){return!t.event.button}function Vt(){return this.parentNode}function Wt(e){return null==e?{x:t.event.x,y:t.event.y}:e}Ht.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Xt=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function Gt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Zt(){}var Kt=1/.7,$t="\\s*([+-]?\\d+)\\s*",Qt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",te=/^#([0-9a-f]{3})$/,ee=/^#([0-9a-f]{6})$/,ne=new RegExp("^rgb\\("+[$t,$t,$t]+"\\)$"),re=new RegExp("^rgb\\("+[Jt,Jt,Jt]+"\\)$"),ie=new RegExp("^rgba\\("+[$t,$t,$t,Qt]+"\\)$"),oe=new RegExp("^rgba\\("+[Jt,Jt,Jt,Qt]+"\\)$"),ae=new RegExp("^hsl\\("+[Qt,Jt,Jt]+"\\)$"),se=new RegExp("^hsla\\("+[Qt,Jt,Jt,Qt]+"\\)$"),ue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ce(t){var e;return t=(t+"").trim().toLowerCase(),(e=te.exec(t))?new pe((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=ee.exec(t))?le(parseInt(e[1],16)):(e=ne.exec(t))?new pe(e[1],e[2],e[3],1):(e=re.exec(t))?new pe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ie.exec(t))?he(e[1],e[2],e[3],e[4]):(e=oe.exec(t))?he(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ae.exec(t))?_e(e[1],e[2]/100,e[3]/100,1):(e=se.exec(t))?_e(e[1],e[2]/100,e[3]/100,e[4]):ue.hasOwnProperty(t)?le(ue[t]):"transparent"===t?new pe(NaN,NaN,NaN,0):null}function le(t){return new pe(t>>16&255,t>>8&255,255&t,1)}function he(t,e,n,r){return r<=0&&(t=e=n=NaN),new pe(t,e,n,r)}function fe(t){return t instanceof Zt||(t=ce(t)),t?new pe((t=t.rgb()).r,t.g,t.b,t.opacity):new pe}function de(t,e,n,r){return 1===arguments.length?fe(t):new pe(t,e,n,null==r?1:r)}function pe(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function _e(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ve(t,e,n,r)}function me(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof ve)return new ve(t.h,t.s,t.l,t.opacity);if(t instanceof Zt||(t=ce(t)),!t)return new ve;if(t instanceof ve)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new ve(a,s,u,t.opacity)}(t):new ve(t,e,n,null==r?1:r)}function ve(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ge(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Xt(Zt,ce,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Xt(pe,de,Gt(Zt,{brighter:function(t){return t=null==t?Kt:Math.pow(Kt,t),new pe(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new pe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Xt(ve,me,Gt(Zt,{brighter:function(t){return t=null==t?Kt:Math.pow(Kt,t),new ve(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ve(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new pe(ge(t>=240?t-240:t+120,i,r),ge(t,i,r),ge(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var ye=Math.PI/180,be=180/Math.PI,we=.95047,xe=1,Me=1.08883,Ee=4/29,Se=6/29,Ae=3*Se*Se,ke=Se*Se*Se;function Te(t){if(t instanceof Ce)return new Ce(t.l,t.a,t.b,t.opacity);if(t instanceof Le){var e=t.h*ye;return new Ce(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof pe||(t=fe(t));var n=Pe(t.r),r=Pe(t.g),i=Pe(t.b),o=Re((.4124564*n+.3575761*r+.1804375*i)/we),a=Re((.2126729*n+.7151522*r+.072175*i)/xe),s=Re((.0193339*n+.119192*r+.9503041*i)/Me);return new Ce(116*a-16,500*(o-a),200*(a-s),t.opacity)}function Oe(t,e,n,r){return 1===arguments.length?Te(t):new Ce(t,e,n,null==r?1:r)}function Ce(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Re(t){return t>ke?Math.pow(t,1/3):t/Ae+Ee}function je(t){return t>Se?t*t*t:Ae*(t-Ee)}function Ne(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Pe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ie(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Le)return new Le(t.h,t.c,t.l,t.opacity);t instanceof Ce||(t=Te(t));var e=Math.atan2(t.b,t.a)*be;return new Le(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Le(t,e,n,null==r?1:r)}function Le(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}Xt(Ce,Oe,Gt(Zt,{brighter:function(t){return new Ce(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Ce(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=xe*je(t),e=we*je(e),n=Me*je(n),new pe(Ne(3.2404542*e-1.5371385*t-.4985314*n),Ne(-.969266*e+1.8760108*t+.041556*n),Ne(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),Xt(Le,Ie,Gt(Zt,{brighter:function(t){return new Le(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Le(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Te(this).rgb()}}));var ze=-.14861,Ue=1.78277,qe=-.29227,De=-.90649,Fe=1.97294,Be=Fe*De,He=Fe*Ue,Ye=Ue*qe-De*ze;function Ve(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof We)return new We(t.h,t.s,t.l,t.opacity);t instanceof pe||(t=fe(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Ye*r+Be*e-He*n)/(Ye+Be-He),o=r-i,a=(Fe*(n-i)-qe*o)/De,s=Math.sqrt(a*a+o*o)/(Fe*i*(1-i)),u=s?Math.atan2(a,o)*be-120:NaN;return new We(u<0?u+360:u,s,i,t.opacity)}(t):new We(t,e,n,null==r?1:r)}function We(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Xe(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}Xt(We,Ve,Gt(Zt,{brighter:function(t){return t=null==t?Kt:Math.pow(Kt,t),new We(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new We(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ye,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new pe(255*(e+n*(ze*r+Ue*i)),255*(e+n*(qe*r+De*i)),255*(e+n*(Fe*r)),this.opacity)}}));var Ge=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Xe((n-r/e)*e,a,i,o,s)}},Ze=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Xe((n-r/e)*e,i,o,a,s)}},Ke=function(t){return function(){return t}};function $e(t,e){return function(n){return t+n*e}}function Qe(t,e){var n=e-t;return n?$e(t,n>180||n<-180?n-360*Math.round(n/360):n):Ke(isNaN(t)?e:t)}function Je(t){return 1==(t=+t)?tn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Ke(isNaN(e)?n:e)}}function tn(t,e){var n=e-t;return n?$e(t,n):Ke(isNaN(t)?e:t)}var en=function t(e){var n=Je(e);function r(t,e){var r=n((t=de(t)).r,(e=de(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=tn(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function nn(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=de(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var rn,on,an,sn,un=nn(Ge),cn=nn(Ze),ln=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(r),a=new Array(r);for(n=0;n<i;++n)o[n]=vn(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}},hn=function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}},fn=function(t,e){return e-=t=+t,function(n){return t+e*n}},dn=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=vn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},pn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_n=new RegExp(pn.source,"g"),mn=function(t,e){var n,r,i,o=pn.lastIndex=_n.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=pn.exec(t))&&(r=_n.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:fn(n,r)})),o=_n.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},vn=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?Ke(e):("number"===r?fn:"string"===r?(n=ce(e))?(e=n,en):mn:e instanceof ce?en:e instanceof Date?hn:Array.isArray(e)?ln:isNaN(e)?dn:fn)(t,e)},gn=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},yn=180/Math.PI,bn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},wn=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*yn,skewX:Math.atan(u)*yn,scaleX:a,scaleY:s}};function xn(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:fn(t,i)},{i:u-2,x:fn(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:fn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:fn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:fn(t,n)},{i:s-2,x:fn(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var Mn=xn(function(t){return"none"===t?bn:(rn||(rn=document.createElement("DIV"),on=document.documentElement,an=document.defaultView),rn.style.transform=t,t=an.getComputedStyle(on.appendChild(rn),null).getPropertyValue("transform"),on.removeChild(rn),t=t.slice(7,-1).split(","),wn(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),En=xn(function(t){return null==t?bn:(sn||(sn=document.createElementNS("http://www.w3.org/2000/svg","g")),sn.setAttribute("transform",t),(t=sn.transform.baseVal.consolidate())?(t=t.matrix,wn(t.a,t.b,t.c,t.d,t.e,t.f)):bn)},", ",")",")"),Sn=Math.SQRT2;function An(t){return((t=Math.exp(t))+1/t)/2}var kn=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],l=s-i,h=u-o,f=l*l+h*h;if(f<1e-12)r=Math.log(c/a)/Sn,n=function(t){return[i+t*l,o+t*h,a*Math.exp(Sn*t*r)]};else{var d=Math.sqrt(f),p=(c*c-a*a+4*f)/(2*a*2*d),_=(c*c-a*a-4*f)/(2*c*2*d),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(_*_+1)-_);r=(v-m)/Sn,n=function(t){var e=t*r,n=An(m),s=a/(2*d)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Sn*e+m)-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[i+s*l,o+s*h,a*n/An(Sn*e+m)]}}return n.duration=1e3*r,n};function Tn(t){return function(e,n){var r=t((e=me(e)).h,(n=me(n)).h),i=tn(e.s,n.s),o=tn(e.l,n.l),a=tn(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var On=Tn(Qe),Cn=Tn(tn);function Rn(t){return function(e,n){var r=t((e=Ie(e)).h,(n=Ie(n)).h),i=tn(e.c,n.c),o=tn(e.l,n.l),a=tn(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var jn=Rn(Qe),Nn=Rn(tn);function Pn(t){return function e(n){function r(e,r){var i=t((e=Ve(e)).h,(r=Ve(r)).h),o=tn(e.s,r.s),a=tn(e.l,r.l),s=tn(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var In,Ln,zn=Pn(Qe),Un=Pn(tn),qn=0,Dn=0,Fn=0,Bn=1e3,Hn=0,Yn=0,Vn=0,Wn="object"==typeof performance&&performance.now?performance:Date,Xn="function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,17)};function Gn(){return Yn||(Xn(Zn),Yn=Wn.now()+Vn)}function Zn(){Yn=0}function Kn(){this._call=this._time=this._next=null}function $n(t,e,n){var r=new Kn;return r.restart(t,e,n),r}function Qn(){Gn(),++qn;for(var t,e=In;e;)(t=Yn-e._time)>=0&&e._call.call(null,t),e=e._next;--qn}function Jn(){Yn=(Hn=Wn.now())+Vn,qn=Dn=0;try{Qn()}finally{qn=0,function(){for(var t,e,n=In,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:In=e);Ln=t,er(r)}(),Yn=0}}function tr(){var t=Wn.now(),e=t-Hn;e>Bn&&(Vn-=e,Hn=t)}function er(t){if(!qn){Dn&&(Dn=clearTimeout(Dn));var e=t-Yn;e>24?(t<1/0&&(Dn=setTimeout(Jn,e)),Fn&&(Fn=clearInterval(Fn))):(Fn||(Hn=Yn,Fn=setInterval(tr,Bn)),qn=1,Xn(Jn))}}Kn.prototype=$n.prototype={constructor:Kn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Gn():+n)+(null==e?0:+e),this._next||Ln===this||(Ln?Ln._next=this:In=this,Ln=this),this._call=t,this._time=n,er()},stop:function(){this._call&&(this._call=null,this._time=1/0,er())}};var nr=function(t,e,n){var r=new Kn;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r},rr=q("start","end","interrupt"),ir=[],or=0,ar=1,sr=2,ur=3,cr=4,lr=5,hr=6,fr=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var c,l,h,f;if(n.state!==ar)return s();for(c in i)if((f=i[c]).name===n.name){if(f.state===ur)return nr(o);f.state===cr?(f.state=hr,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=hr,f.timer.stop(),delete i[c])}if(nr(function(){n.state===ur&&(n.state=cr,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=sr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===sr){for(n.state=ur,r=new Array(h=n.tween.length),c=0,l=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=lr,1),o=-1,a=r.length;++o<a;)r[o].call(null,i);n.state===lr&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=hr,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=$n(function(t){n.state=ar,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:i,on:rr,tween:ir,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:or})};function dr(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>or)throw new Error("too late");return n}function pr(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>sr)throw new Error("too late");return n}function _r(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}var mr=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>sr&&n.state<lr,n.state=hr,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}};function vr(t,e,n){var r=t._id;return t.each(function(){var t=pr(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return _r(t,r).value[e]}}var gr=function(t,e){var n;return("number"==typeof e?fn:e instanceof ce?en:(n=ce(e))?(e=n,en):mn)(t,e)},yr=It.prototype.constructor,br=0;function wr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function xr(t){return It().transition(t)}function Mr(){return++br}var Er=It.prototype;function Sr(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Ar(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}wr.prototype=xr.prototype={constructor:wr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ht(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,c=r[a],l=c.length,h=o[a]=new Array(l),f=0;f<l;++f)(s=c[f])&&(u=t.call(s,s.__data__,f,c))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u,fr(h[f],e,n,f,h,_r(s,n)));return new wr(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=dt(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,c=r[s],l=c.length,h=0;h<l;++h)if(u=c[h]){for(var f,d=t.call(u,u.__data__,h,c),p=_r(u,n),_=0,m=d.length;_<m;++_)(f=d[_])&&fr(f,e,n,_,d,p);o.push(d),a.push(u)}return new wr(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=J(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new wr(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],h=c.length,f=a[s]=new Array(h),d=0;d<h;++d)(u=c[d]||l[d])&&(f[d]=u);for(;s<r;++s)a[s]=e[s];return new wr(a,this._parents,this._name,this._id)},selection:function(){return new yr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Mr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)if(a=s[c]){var l=_r(a,e);fr(a,t,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new wr(r,this._parents,t,n)},call:Er.call,nodes:Er.nodes,node:Er.node,size:Er.size,empty:Er.empty,each:Er.each,on:function(t,e){var n=this._id;return arguments.length<2?_r(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?dr:pr;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=V(t),r="transform"===n?En:gr;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var r,i,o;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===s?null:a===r&&s===i?o:o=e(r=a,i=s);this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var r,i,o;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttribute(t))===s?null:a===r&&s===i?o:o=e(r=a,i=s);this.removeAttribute(t)}})(n,r,vr(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===r?i:i=e(r=o,n)}}:function(t,e,n){var r,i;return function(){var o=this.getAttribute(t);return o===n?null:o===r?i:i=e(r=o,n)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=V(t);return this.tween(n,(r.local?function(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}:function(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n})(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Mn:gr;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=bt(this).getComputedStyle(this,null),a=o.getPropertyValue(t),s=(this.style.removeProperty(t),o.getPropertyValue(t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}(t,r)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof e?function(t,e,n){var r,i,o;return function(){var a=bt(this).getComputedStyle(this,null),s=a.getPropertyValue(t),u=n(this);return null==u&&(this.style.removeProperty(t),u=a.getPropertyValue(t)),s===u?null:s===r&&u===i?o:o=e(r=s,i=u)}}(t,r,vr(this,"style."+t,e)):function(t,e,n){var r,i;return function(){var o=bt(this).getComputedStyle(this,null).getPropertyValue(t);return o===n?null:o===r?i:i=e(r=o,n)}}(t,r,e),n)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(vr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=_r(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?function(t,e){var n,r;return function(){var i=pr(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=pr(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=s;break}u===c&&i.push(s)}o.tween=i}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){dr(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){dr(this,t).delay=e}})(e,t)):_r(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){pr(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){pr(this,t).duration=e}})(e,t)):_r(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){pr(this,t).ease=e}}(e,t)):_r(this.node(),e).ease}};var kr=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Tr=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Or=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Cr=Math.PI,Rr=Cr/2;function jr(t){return(1-Math.cos(Cr*t))/2}function Nr(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Pr(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Ir=4/11,Lr=6/11,zr=8/11,Ur=.75,qr=9/11,Dr=10/11,Fr=.9375,Br=21/22,Hr=63/64,Yr=1/Ir/Ir;function Vr(t){return(t=+t)<Ir?Yr*t*t:t<zr?Yr*(t-=Lr)*t+Ur:t<Dr?Yr*(t-=qr)*t+Fr:Yr*(t-=Br)*t+Hr}var Wr=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),Xr=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),Gr=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),Zr=2*Math.PI,Kr=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Zr);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*Zr)},i.period=function(n){return t(e,n)},i}(1,.3),$r=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Zr);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*Zr)},i.period=function(n){return t(e,n)},i}(1,.3),Qr=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Zr);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*Zr)},i.period=function(n){return t(e,n)},i}(1,.3),Jr={time:null,delay:0,duration:250,ease:Ar};function ti(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Jr.time=Gn(),Jr;return n}It.prototype.interrupt=function(t){return this.each(function(){mr(this,t)})},It.prototype.transition=function(t){var e,n;t instanceof wr?(e=t._id,t=t._name):(e=Mr(),(n=Jr).time=Gn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)(a=s[c])&&fr(a,t,e,c,s,n||ti(a,e));return new wr(r,this._parents,t,e)};var ei=[null],ni=function(t){return function(){return t}},ri=function(t,e,n){this.target=t,this.type=e,this.selection=n};function ii(){t.event.stopImmediatePropagation()}var oi=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},ai={name:"drag"},si={name:"space"},ui={name:"handle"},ci={name:"center"},li={name:"x",handles:["e","w"].map(gi),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},hi={name:"y",handles:["n","s"].map(gi),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},fi={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(gi),input:function(t){return t},output:function(t){return t}},di={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},pi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},_i={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},mi={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},vi={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function gi(t){return{type:t}}function yi(){return!t.event.button}function bi(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function wi(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function xi(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Mi(e){var n,r=bi,i=yi,o=q(s,"start","brush","end"),a=6;function s(t){var n=t.property("__brush",f).selectAll(".overlay").data([gi("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",di.overlay).merge(n).each(function(){var t=wi(this).extent;Lt(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([gi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",di.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,function(t){return t.type});r.exit().remove(),r.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return di[t.type]}),t.each(u).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",h)}function u(){var t=Lt(this),e=wi(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-a/2:e[0][0]-a/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-a/2:e[0][1]-a/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+a:a}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+a:a})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,e){return t.__brush.emitter||new l(t,e)}function l(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function h(){if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return oi()}else if(n)return;if(i.apply(this,arguments)){var r,o,a,s,l,h,f,d,p,_,m,v,g,y=this,b=t.event.target.__data__.type,w="selection"===(t.event.metaKey?b="overlay":b)?ai:t.event.altKey?ci:ui,x=e===hi?null:mi[b],M=e===li?null:vi[b],E=wi(y),S=E.extent,A=E.selection,k=S[0][0],T=S[0][1],O=S[1][0],C=S[1][1],R=x&&M&&t.event.shiftKey,j=ct(y),N=j,P=c(y,arguments).beforestart();"overlay"===b?E.selection=A=[[r=e===hi?k:j[0],a=e===li?T:j[1]],[l=e===hi?O:r,f=e===li?C:a]]:(r=A[0][0],a=A[0][1],l=A[1][0],f=A[1][1]),o=r,s=a,h=l,d=f;var I=Lt(y).attr("pointer-events","none"),L=I.selectAll(".overlay").attr("cursor",di[b]);if(t.event.touches)I.on("touchmove.brush",U,!0).on("touchend.brush touchcancel.brush",D,!0);else{var z=Lt(t.event.view).on("keydown.brush",function(){switch(t.event.keyCode){case 16:R=x&&M;break;case 18:w===ui&&(x&&(l=h-p*x,r=o+p*x),M&&(f=d-_*M,a=s+_*M),w=ci,q());break;case 32:w!==ui&&w!==ci||(x<0?l=h-p:x>0&&(r=o-p),M<0?f=d-_:M>0&&(a=s-_),w=si,L.attr("cursor",di.selection),q());break;default:return}oi()},!0).on("keyup.brush",function(){switch(t.event.keyCode){case 16:R&&(v=g=R=!1,q());break;case 18:w===ci&&(x<0?l=h:x>0&&(r=o),M<0?f=d:M>0&&(a=s),w=ui,q());break;case 32:w===si&&(t.event.altKey?(x&&(l=h-p*x,r=o+p*x),M&&(f=d-_*M,a=s+_*M),w=ci):(x<0?l=h:x>0&&(r=o),M<0?f=d:M>0&&(a=s),w=ui),L.attr("cursor",di[b]),q());break;default:return}oi()},!0).on("mousemove.brush",U,!0).on("mouseup.brush",D,!0);Dt(t.event.view)}ii(),mr(y),u.call(y),P.start()}function U(){var t=ct(y);!R||v||g||(Math.abs(t[0]-N[0])>Math.abs(t[1]-N[1])?g=!0:v=!0),N=t,m=!0,oi(),q()}function q(){var t;switch(p=N[0]-j[0],_=N[1]-j[1],w){case si:case ai:x&&(p=Math.max(k-r,Math.min(O-l,p)),o=r+p,h=l+p),M&&(_=Math.max(T-a,Math.min(C-f,_)),s=a+_,d=f+_);break;case ui:x<0?(p=Math.max(k-r,Math.min(O-r,p)),o=r+p,h=l):x>0&&(p=Math.max(k-l,Math.min(O-l,p)),o=r,h=l+p),M<0?(_=Math.max(T-a,Math.min(C-a,_)),s=a+_,d=f):M>0&&(_=Math.max(T-f,Math.min(C-f,_)),s=a,d=f+_);break;case ci:x&&(o=Math.max(k,Math.min(O,r-p*x)),h=Math.max(k,Math.min(O,l+p*x))),M&&(s=Math.max(T,Math.min(C,a-_*M)),d=Math.max(T,Math.min(C,f+_*M)))}h<o&&(x*=-1,t=r,r=l,l=t,t=o,o=h,h=t,b in pi&&L.attr("cursor",di[b=pi[b]])),d<s&&(M*=-1,t=a,a=f,f=t,t=s,s=d,d=t,b in _i&&L.attr("cursor",di[b=_i[b]])),E.selection&&(A=E.selection),v&&(o=A[0][0],h=A[1][0]),g&&(s=A[0][1],d=A[1][1]),A[0][0]===o&&A[0][1]===s&&A[1][0]===h&&A[1][1]===d||(E.selection=[[o,s],[h,d]],u.call(y),P.brush())}function D(){if(ii(),t.event.touches){if(t.event.touches.length)return;n&&clearTimeout(n),n=setTimeout(function(){n=null},500),I.on("touchmove.brush touchend.brush touchcancel.brush",null)}else Ft(t.event.view,m),z.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);I.attr("pointer-events","all"),L.attr("cursor",di.overlay),E.selection&&(A=E.selection),xi(A)&&(E.selection=null,u.call(y)),P.end()}}function f(){var t=this.__brush||{selection:null};return t.extent=r.apply(this,arguments),t.dim=e,t}return s.move=function(t,n){t.selection?t.on("start.brush",function(){c(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){c(this,arguments).end()}).tween("brush",function(){var t=this,r=t.__brush,i=c(t,arguments),o=r.selection,a=e.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=vn(o,a);function l(e){r.selection=1===e&&xi(a)?null:s(e),u.call(t),i.brush()}return o&&a?l:l(1)}):t.each(function(){var t=arguments,r=this.__brush,i=e.input("function"==typeof n?n.apply(this,t):n,r.extent),o=c(this,t).beforestart();mr(this),r.selection=null==i||xi(i)?null:i,u.call(this),o.start().brush().end()})},l.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){at(new ri(s,t,e.output(this.state.selection)),o.apply,o,[t,this.that,this.args])}},s.extent=function(t){return arguments.length?(r="function"==typeof t?t:ni([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),s):r},s.filter=function(t){return arguments.length?(i="function"==typeof t?t:ni(!!t),s):i},s.handleSize=function(t){return arguments.length?(a=+t,s):a},s.on=function(){var t=o.on.apply(o,arguments);return t===o?s:t},s}var Ei=Math.cos,Si=Math.sin,Ai=Math.PI,ki=Ai/2,Ti=2*Ai,Oi=Math.max,Ci=Array.prototype.slice,Ri=function(t){return function(){return t}},ji=Math.PI,Ni=2*ji,Pi=Ni-1e-6;function Ii(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Li(){return new Ii}function zi(t){return t.source}function Ui(t){return t.target}function qi(t){return t.radius}function Di(t){return t.startAngle}function Fi(t){return t.endAngle}function Bi(){}function Hi(t,e){var n=new Bi;if(t instanceof Bi)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}function Yi(){return{}}function Vi(t,e,n){t[e]=n}function Wi(){return Hi()}function Xi(t,e,n){t.set(e,n)}function Gi(){}Ii.prototype=Li.prototype={constructor:Ii,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,l=a-e,h=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(l*s-u*c)>1e-6&&i){var f=n-o,d=r-a,p=s*s+u*u,_=f*f+d*d,m=Math.sqrt(p),v=Math.sqrt(h),g=i*Math.tan((ji-Math.acos((p+h-_)/(2*m*v)))/2),y=g/v,b=g/m;Math.abs(y-1)>1e-6&&(this._+="L"+(t+y*c)+","+(e+y*l)),this._+="A"+i+","+i+",0,0,"+ +(l*f>c*d)+","+(this._x1=t+b*s)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,o){t=+t,e=+e;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,l=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+u+","+c),n&&(h>Pi?this._+="A"+n+","+n+",0,1,"+l+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):(h<0&&(h=h%Ni+Ni),this._+="A"+n+","+n+",0,"+ +(h>=ji)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},Bi.prototype=Hi.prototype={constructor:Bi,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Zi=Hi.prototype;function Ki(t,e){var n=new Gi;if(t instanceof Gi)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}function $i(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}Gi.prototype=Ki.prototype={constructor:Gi,has:Zi.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Zi.remove,clear:Zi.clear,values:Zi.keys,size:Zi.size,empty:Zi.empty,each:Zi.each};var Qi=function(t){var e=new RegExp('["'+t+"\n]"),n=t.charCodeAt(0);function r(t,e){var r,i,o={},a={},s=[],u=t.length,c=0,l=0;function h(){if(c>=u)return a;if(i)return i=!1,o;var e,r=c;if(34===t.charCodeAt(r)){for(var s=r;s++<u;)if(34===t.charCodeAt(s)){if(34!==t.charCodeAt(s+1))break;++s}return c=s+2,13===(e=t.charCodeAt(s+1))?(i=!0,10===t.charCodeAt(s+2)&&++c):10===e&&(i=!0),t.slice(r+1,s).replace(/""/g,'"')}for(;c<u;){var l=1;if(10===(e=t.charCodeAt(c++)))i=!0;else if(13===e)i=!0,10===t.charCodeAt(c)&&(++c,++l);else if(e!==n)continue;return t.slice(r,c-l)}return t.slice(r)}for(;(r=h())!==a;){for(var f=[];r!==o&&r!==a;)f.push(r),r=h();e&&null==(f=e(f,l++))||s.push(f)}return s}function i(e){return e.map(o).join(t)}function o(t){return null==t?"":e.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=$i(t);return function(r,i){return e(n(r),i,t)}}(t,e):$i(t)});return o.columns=i,o},parseRows:r,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}(e)),[n.map(o).join(t)].concat(e.map(function(e){return n.map(function(t){return o(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(i).join("\n")}}},Ji=Qi(","),to=Ji.parse,eo=Ji.parseRows,no=Ji.format,ro=Ji.formatRows,io=Qi("\t"),oo=io.parse,ao=io.parseRows,so=io.format,uo=io.formatRows,co=function(t){return function(){return t}},lo=function(){return 1e-6*(Math.random()-.5)};function ho(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,h,f,d=t._root,p={data:r},_=t._x0,m=t._y0,v=t._x1,g=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(_+v)/2))?_=o:v=o,(l=n>=(a=(m+g)/2))?m=a:g=a,i=d,!(d=d[h=l<<1|c]))return i[h]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(_+v)/2))?_=o:v=o,(l=n>=(a=(m+g)/2))?m=a:g=a}while((h=l<<1|c)==(f=(u>=a)<<1|s>=o));return i[f]=d,i[h]=p,t}var fo=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function po(t){return t[0]}function _o(t){return t[1]}function mo(t,e,n){var r=new vo(null==e?po:e,null==n?_o:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function vo(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function go(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var yo=mo.prototype=vo.prototype;function bo(t){return t.x+t.vx}function wo(t){return t.y+t.vy}function xo(t){return t.index}function Mo(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function Eo(t){return t.x}function So(t){return t.y}yo.copy=function(){var t,e,n=new vo(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=go(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=go(e));return n},yo.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return ho(this.cover(e,n),e,n,t)},yo.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,l=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>h&&(h=i));for(l<u&&(u=this._x0,l=this._x1),h<c&&(c=this._y0,h=this._y1),this.cover(u,c).cover(l,h),n=0;n<o;++n)ho(this,a[n],s[n],t[n]);return this},yo.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>o))return this;var a,s,u=i-n,c=this._root;switch(s=(e<(r+o)/2)<<1|t<(n+i)/2){case 0:do{(a=new Array(4))[s]=c,c=a}while(o=r+(u*=2),t>(i=n+u)||e>o);break;case 1:do{(a=new Array(4))[s]=c,c=a}while(o=r+(u*=2),(n=i-u)>t||e>o);break;case 2:do{(a=new Array(4))[s]=c,c=a}while(r=o-(u*=2),t>(i=n+u)||r>e);break;case 3:do{(a=new Array(4))[s]=c,c=a}while(r=o-(u*=2),(n=i-u)>t||r>e)}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},yo.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},yo.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},yo.find=function(t,e,n){var r,i,o,a,s,u,c,l=this._x0,h=this._y0,f=this._x1,d=this._y1,p=[],_=this._root;for(_&&p.push(new fo(_,l,h,f,d)),null==n?n=1/0:(l=t-n,h=e-n,f=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(_=u.node)||(i=u.x0)>f||(o=u.y0)>d||(a=u.x1)<l||(s=u.y1)<h))if(_.length){var m=(i+a)/2,v=(o+s)/2;p.push(new fo(_[3],m,v,a,s),new fo(_[2],i,v,m,s),new fo(_[1],m,o,a,v),new fo(_[0],i,o,m,v)),(c=(e>=v)<<1|t>=m)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var g=t-+this._x.call(null,_.data),y=e-+this._y.call(null,_.data),b=g*g+y*y;if(b<n){var w=Math.sqrt(n=b);l=t-w,h=e-w,f=t+w,d=e+w,r=_.data}}return r},yo.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,h,f,d=this._root,p=this._x0,_=this._y0,m=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(s=(p+m)/2))?p=s:m=s,(l=a>=(u=(_+v)/2))?_=u:v=u,e=d,!(d=d[h=l<<1|c]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=i,this)},yo.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},yo.root=function(){return this._root},yo.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},yo.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new fo(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,l=(i+a)/2;(n=u[3])&&s.push(new fo(n,c,l,o,a)),(n=u[2])&&s.push(new fo(n,r,l,c,a)),(n=u[1])&&s.push(new fo(n,c,i,o,l)),(n=u[0])&&s.push(new fo(n,r,i,c,l))}return this},yo.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new fo(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(a+u)/2,h=(s+c)/2;(o=i[0])&&n.push(new fo(o,a,s,l,h)),(o=i[1])&&n.push(new fo(o,l,s,u,h)),(o=i[2])&&n.push(new fo(o,a,h,l,c)),(o=i[3])&&n.push(new fo(o,l,h,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},yo.x=function(t){return arguments.length?(this._x=t,this):this._x},yo.y=function(t){return arguments.length?(this._y=t,this):this._y};var Ao,ko=10,To=Math.PI*(3-Math.sqrt(5)),Oo=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},Co=function(t){return(t=Oo(Math.abs(t)))?t[1]:NaN},Ro=function(t,e){var n=Oo(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},jo={"":function(t,e){t=t.toPrecision(e);t:for(var n,r=t.length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Ro(100*t,e)},r:Ro,s:function(t,e){var n=Oo(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Ao=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Oo(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},No=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,Po=function(t){return new Io(t)};function Io(t){if(!(e=No.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],s=e[6]&&+e[6],u=!!e[7],c=e[8]&&+e[8].slice(1),l=e[9]||"";"n"===l?(u=!0,l="g"):jo[l]||(l=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=u,this.precision=c,this.type=l}Io.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Lo=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function zo(t){return t}var Uo,qo=function(t){var e=t.grouping&&t.thousands?function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}(t.grouping,t.thousands):zo,n=t.currency,r=t.decimal;function i(t){var i=(t=Po(t)).fill,o=t.align,a=t.sign,s=t.symbol,u=t.zero,c=t.width,l=t.comma,h=t.precision,f=t.type,d="$"===s?n[0]:"#"===s&&/[boxX]/.test(f)?"0"+f.toLowerCase():"",p="$"===s?n[1]:/[%p]/.test(f)?"%":"",_=jo[f],m=!f||/[defgprs%]/.test(f);function v(t){var n,s,v,g=d,y=p;if("c"===f)y=_(t)+y,t="";else{var b=((t=+t)<0||1/t<0)&&(t*=-1,!0);if(t=_(t,h),b)for(n=-1,s=t.length,b=!1;++n<s;)if(48<(v=t.charCodeAt(n))&&v<58||"x"===f&&96<v&&v<103||"X"===f&&64<v&&v<71){b=!0;break}if(g=(b?"("===a?a:"-":"-"===a||"("===a?"":a)+g,y=y+("s"===f?Lo[8+Ao/3]:"")+(b&&"("===a?")":""),m)for(n=-1,s=t.length;++n<s;)if(48>(v=t.charCodeAt(n))||v>57){y=(46===v?r+t.slice(n+1):t.slice(n))+y,t=t.slice(0,n);break}}l&&!u&&(t=e(t,1/0));var w=g.length+t.length+y.length,x=w<c?new Array(c-w+1).join(i):"";switch(l&&u&&(t=e(x+t,x.length?c-y.length:1/0),x=""),o){case"<":return g+t+y+x;case"=":return g+x+t+y;case"^":return x.slice(0,w=x.length>>1)+g+t+y+x.slice(w)}return x+g+t+y}return h=null==h?f?6:12:/[gprs]/.test(f)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),v.toString=function(){return t+""},v}return{format:i,formatPrefix:function(t,e){var n=i(((t=Po(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Co(e)/3))),o=Math.pow(10,-r),a=Lo[8+r/3];return function(t){return n(o*t)+a}}}};function Do(e){return Uo=qo(e),t.format=Uo.format,t.formatPrefix=Uo.formatPrefix,Uo}Do({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var Fo=function(t){return Math.max(0,-Co(Math.abs(t)))},Bo=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Co(e)/3)))-Co(Math.abs(t)))},Ho=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Co(e)-Co(t))+1},Yo=function(){return new Vo};function Vo(){this.reset()}Vo.prototype={constructor:Vo,reset:function(){this.s=this.t=0},add:function(t){Xo(Wo,t,this.t),Xo(this,Wo.s,this.s),this.s?this.t+=Wo.t:this.s=Wo.t},valueOf:function(){return this.s}};var Wo=new Vo;function Xo(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var Go=1e-6,Zo=Math.PI,Ko=Zo/2,$o=Zo/4,Qo=2*Zo,Jo=180/Zo,ta=Zo/180,ea=Math.abs,na=Math.atan,ra=Math.atan2,ia=Math.cos,oa=Math.ceil,aa=Math.exp,sa=Math.log,ua=Math.pow,ca=Math.sin,la=Math.sign||function(t){return t>0?1:t<0?-1:0},ha=Math.sqrt,fa=Math.tan;function da(t){return t>1?0:t<-1?Zo:Math.acos(t)}function pa(t){return t>1?Ko:t<-1?-Ko:Math.asin(t)}function _a(t){return(t=ca(t/2))*t}function ma(){}function va(t,e){t&&ya.hasOwnProperty(t.type)&&ya[t.type](t,e)}var ga={Feature:function(t,e){va(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)va(n[r].geometry,e)}},ya={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){ba(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ba(n[r],e,0)},Polygon:function(t,e){wa(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)wa(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)va(n[r],e)}};function ba(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function wa(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)ba(t[n],e,1);e.polygonEnd()}var xa,Ma,Ea,Sa,Aa,ka,Ta,Oa,Ca,Ra,ja,Na,Pa,Ia=function(t,e){t&&ga.hasOwnProperty(t.type)?ga[t.type](t,e):va(t,e)},La=Yo(),za=Yo(),Ua={point:ma,lineStart:ma,lineEnd:ma,polygonStart:function(){La.reset(),Ua.lineStart=qa,Ua.lineEnd=Da},polygonEnd:function(){var t=+La;za.add(t<0?Qo+t:t),this.lineStart=this.lineEnd=this.point=ma},sphere:function(){za.add(Qo)}};function qa(){Ua.point=Fa}function Da(){Ba(xa,Ma)}function Fa(t,e){Ua.point=Ba,xa=t,Ma=e,Ea=t*=ta,Sa=ia(e=(e*=ta)/2+$o),Aa=ca(e)}function Ba(t,e){e=(e*=ta)/2+$o;var n=(t*=ta)-Ea,r=n>=0?1:-1,i=r*n,o=ia(e),a=ca(e),s=Aa*a,u=Sa*o+s*ia(i),c=s*r*ca(i);La.add(ra(c,u)),Ea=t,Sa=o,Aa=a}function Ha(t){return[ra(t[1],t[0]),pa(t[2])]}function Ya(t){var e=t[0],n=t[1],r=ia(n);return[r*ia(e),r*ca(e),ca(n)]}function Va(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Wa(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Xa(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ga(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Za(t){var e=ha(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Ka,$a,Qa=Yo(),Ja={point:ts,lineStart:ns,lineEnd:rs,polygonStart:function(){Ja.point=is,Ja.lineStart=os,Ja.lineEnd=as,Qa.reset(),Ua.polygonStart()},polygonEnd:function(){Ua.polygonEnd(),Ja.point=ts,Ja.lineStart=ns,Ja.lineEnd=rs,La<0?(ka=-(Oa=180),Ta=-(Ca=90)):Qa>Go?Ca=90:Qa<-Go&&(Ta=-90),$a[0]=ka,$a[1]=Oa}};function ts(t,e){Ka.push($a=[ka=t,Oa=t]),e<Ta&&(Ta=e),e>Ca&&(Ca=e)}function es(t,e){var n=Ya([t*ta,e*ta]);if(Pa){var r=Wa(Pa,n),i=[r[1],-r[0],0],o=Wa(i,r);Za(o),o=Ha(o);var a,s=t-Ra,u=s>0?1:-1,c=o[0]*Jo*u,l=ea(s)>180;l^(u*Ra<c&&c<u*t)?(a=o[1]*Jo)>Ca&&(Ca=a):l^(u*Ra<(c=(c+360)%360-180)&&c<u*t)?(a=-o[1]*Jo)<Ta&&(Ta=a):(e<Ta&&(Ta=e),e>Ca&&(Ca=e)),l?t<Ra?ss(ka,t)>ss(ka,Oa)&&(Oa=t):ss(t,Oa)>ss(ka,Oa)&&(ka=t):Oa>=ka?(t<ka&&(ka=t),t>Oa&&(Oa=t)):t>Ra?ss(ka,t)>ss(ka,Oa)&&(Oa=t):ss(t,Oa)>ss(ka,Oa)&&(ka=t)}else Ka.push($a=[ka=t,Oa=t]);e<Ta&&(Ta=e),e>Ca&&(Ca=e),Pa=n,Ra=t}function ns(){Ja.point=es}function rs(){$a[0]=ka,$a[1]=Oa,Ja.point=ts,Pa=null}function is(t,e){if(Pa){var n=t-Ra;Qa.add(ea(n)>180?n+(n>0?360:-360):n)}else ja=t,Na=e;Ua.point(t,e),es(t,e)}function os(){Ua.lineStart()}function as(){is(ja,Na),Ua.lineEnd(),ea(Qa)>Go&&(ka=-(Oa=180)),$a[0]=ka,$a[1]=Oa,Pa=null}function ss(t,e){return(e-=t)<0?e+360:e}function us(t,e){return t[0]-e[0]}function cs(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var ls,hs,fs,ds,ps,_s,ms,vs,gs,ys,bs,ws,xs,Ms,Es,Ss,As={sphere:ma,point:ks,lineStart:Os,lineEnd:js,polygonStart:function(){As.lineStart=Ns,As.lineEnd=Ps},polygonEnd:function(){As.lineStart=Os,As.lineEnd=js}};function ks(t,e){t*=ta;var n=ia(e*=ta);Ts(n*ia(t),n*ca(t),ca(e))}function Ts(t,e,n){fs+=(t-fs)/++ls,ds+=(e-ds)/ls,ps+=(n-ps)/ls}function Os(){As.point=Cs}function Cs(t,e){t*=ta;var n=ia(e*=ta);Ms=n*ia(t),Es=n*ca(t),Ss=ca(e),As.point=Rs,Ts(Ms,Es,Ss)}function Rs(t,e){t*=ta;var n=ia(e*=ta),r=n*ia(t),i=n*ca(t),o=ca(e),a=ra(ha((a=Es*o-Ss*i)*a+(a=Ss*r-Ms*o)*a+(a=Ms*i-Es*r)*a),Ms*r+Es*i+Ss*o);hs+=a,_s+=a*(Ms+(Ms=r)),ms+=a*(Es+(Es=i)),vs+=a*(Ss+(Ss=o)),Ts(Ms,Es,Ss)}function js(){As.point=ks}function Ns(){As.point=Is}function Ps(){Ls(ws,xs),As.point=ks}function Is(t,e){ws=t,xs=e,t*=ta,e*=ta,As.point=Ls;var n=ia(e);Ms=n*ia(t),Es=n*ca(t),Ss=ca(e),Ts(Ms,Es,Ss)}function Ls(t,e){t*=ta;var n=ia(e*=ta),r=n*ia(t),i=n*ca(t),o=ca(e),a=Es*o-Ss*i,s=Ss*r-Ms*o,u=Ms*i-Es*r,c=ha(a*a+s*s+u*u),l=Ms*r+Es*i+Ss*o,h=c&&-pa(c)/c,f=ra(c,l);gs+=h*a,ys+=h*s,bs+=h*u,hs+=f,_s+=f*(Ms+(Ms=r)),ms+=f*(Es+(Es=i)),vs+=f*(Ss+(Ss=o)),Ts(Ms,Es,Ss)}var zs=function(t){return function(){return t}},Us=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function qs(t,e){return[t>Zo?t-Qo:t<-Zo?t+Qo:t,e]}function Ds(t,e,n){return(t%=Qo)?e||n?Us(Bs(t),Hs(e,n)):Bs(t):e||n?Hs(e,n):qs}function Fs(t){return function(e,n){return[(e+=t)>Zo?e-Qo:e<-Zo?e+Qo:e,n]}}function Bs(t){var e=Fs(t);return e.invert=Fs(-t),e}function Hs(t,e){var n=ia(t),r=ca(t),i=ia(e),o=ca(e);function a(t,e){var a=ia(e),s=ia(t)*a,u=ca(t)*a,c=ca(e),l=c*n+s*r;return[ra(u*i-l*o,s*n-c*r),pa(l*i+u*o)]}return a.invert=function(t,e){var a=ia(e),s=ia(t)*a,u=ca(t)*a,c=ca(e),l=c*i-u*o;return[ra(u*i+c*o,s*n+l*r),pa(l*n-s*r)]},a}function Ys(t,e,n,r,i,o){if(n){var a=ia(e),s=ca(e),u=r*n;null==i?(i=e+r*Qo,o=e-u/2):(i=Vs(a,i),o=Vs(a,o),(r>0?i<o:i>o)&&(i+=r*Qo));for(var c,l=i;r>0?l>o:l<o;l-=u)c=Ha([a,-s*ia(l),-s*ca(l)]),t.point(c[0],c[1])}}function Vs(t,e){(e=Ya(e))[0]-=t,Za(e);var n=da(-e[1]);return((-e[2]<0?-n:n)+Qo-Go)%Qo}qs.invert=qs;var Ws=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:ma,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Xs=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=e[0],l=e[1],h=0,f=1,d=c-s,p=l-u;if(a=n-s,d||!(a>0)){if(a/=d,d<0){if(a<h)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>h&&(h=a)}if(a=i-s,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>h&&(h=a)}else if(d>0){if(a<h)return;a<f&&(f=a)}if(a=r-u,p||!(a>0)){if(a/=p,p<0){if(a<h)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>h&&(h=a)}if(a=o-u,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>h&&(h=a)}else if(p>0){if(a<h)return;a<f&&(f=a)}return h>0&&(t[0]=s+h*d,t[1]=u+h*p),f<1&&(e[0]=s+f*d,e[1]=u+f*p),!0}}}}},Gs=function(t,e){return ea(t[0]-e[0])<Go&&ea(t[1]-e[1])<Go};function Zs(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var Ks=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Gs(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new Zs(r,t,null,!0)),u.push(n.o=new Zs(r,null,n,!1)),s.push(n=new Zs(a,t,null,!1)),u.push(n.o=new Zs(a,null,n,!0))}}),s.length){for(u.sort(e),$s(s),$s(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,h=s[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(c=f.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,d=!d}while(!f.v);i.lineEnd()}}};function $s(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var Qs=1e9,Js=-Qs;function tu(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,h=0;if(null==i||(l=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==h);else c.point(o[0],o[1])}function a(r,i){return ea(r[0]-t)<Go?i>0?0:3:ea(r[0]-n)<Go?i>0?2:1:ea(r[1]-e)<Go?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,l,h,f,d,p,_,m,v,g,y=a,b=Ws(),w={point:x,lineStart:function(){w.point=E,c&&c.push(l=[]),v=!0,m=!1,p=_=NaN},lineEnd:function(){u&&(E(h,f),d&&m&&b.rejoin(),u.push(b.result())),w.point=x,m&&y.lineEnd()},polygonStart:function(){y=b,u=[],c=[],g=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,l=s.length,h=s[0],f=h[0],d=h[1];u<l;++u)o=f,a=d,h=s[u],f=h[0],d=h[1],a<=r?d>r&&(f-o)*(r-a)>(d-a)*(t-o)&&++e:d<=r&&(f-o)*(r-a)<(d-a)*(t-o)&&--e;return e}(),n=g&&e,i=(u=M(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Ks(u,s,e,o,a),a.polygonEnd()),y=a,u=c=l=null}};function x(t,e){i(t,e)&&y.point(t,e)}function E(o,a){var s=i(o,a);if(c&&l.push([o,a]),v)h=o,f=a,d=s,v=!1,s&&(y.lineStart(),y.point(o,a));else if(s&&m)y.point(o,a);else{var u=[p=Math.max(Js,Math.min(Qs,p)),_=Math.max(Js,Math.min(Qs,_))],b=[o=Math.max(Js,Math.min(Qs,o)),a=Math.max(Js,Math.min(Qs,a))];Xs(u,b,t,e,n,r)?(m||(y.lineStart(),y.point(u[0],u[1])),y.point(b[0],b[1]),s||y.lineEnd(),g=!1):s&&(y.lineStart(),y.point(o,a),g=!1)}p=o,_=a,m=s}return w}}var eu,nu,ru,iu=Yo(),ou={sphere:ma,point:ma,lineStart:function(){ou.point=su,ou.lineEnd=au},lineEnd:ma,polygonStart:ma,polygonEnd:ma};function au(){ou.point=ou.lineEnd=ma}function su(t,e){eu=t*=ta,nu=ca(e*=ta),ru=ia(e),ou.point=uu}function uu(t,e){t*=ta;var n=ca(e*=ta),r=ia(e),i=ea(t-eu),o=ia(i),a=ca(i),s=r*a,u=ru*n-nu*r*o,c=nu*n+ru*r*o;iu.add(ra(ha(s*s+u*u),c)),eu=t,nu=n,ru=r}var cu=function(t){return iu.reset(),Ia(t,ou),+iu},lu=[null,null],hu={type:"LineString",coordinates:lu};function fu(t,e,n){var r=_(t,e-Go,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function du(t,e,n){var r=_(t,e-Go,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function pu(){var t,e,n,r,i,o,a,s,u,c,l,h,f=10,d=f,p=90,m=360,v=2.5;function g(){return{type:"MultiLineString",coordinates:y()}}function y(){return _(oa(r/p)*p,n,p).map(l).concat(_(oa(s/m)*m,a,m).map(h)).concat(_(oa(e/f)*f,t,f).filter(function(t){return ea(t%p)>Go}).map(u)).concat(_(oa(o/d)*d,i,d).filter(function(t){return ea(t%m)>Go}).map(c))}return g.lines=function(){return y().map(function(t){return{type:"LineString",coordinates:t}})},g.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(h(a).slice(1),l(n).reverse().slice(1),h(s).reverse().slice(1))]}},g.extent=function(t){return arguments.length?g.extentMajor(t).extentMinor(t):g.extentMinor()},g.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),g.precision(v)):[[r,s],[n,a]]},g.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),g.precision(v)):[[e,o],[t,i]]},g.step=function(t){return arguments.length?g.stepMajor(t).stepMinor(t):g.stepMinor()},g.stepMajor=function(t){return arguments.length?(p=+t[0],m=+t[1],g):[p,m]},g.stepMinor=function(t){return arguments.length?(f=+t[0],d=+t[1],g):[f,d]},g.precision=function(f){return arguments.length?(v=+f,u=fu(o,i,90),c=du(e,t,v),l=fu(s,a,90),h=du(r,n,v),g):v},g.extentMajor([[-180,-90+Go],[180,90-Go]]).extentMinor([[-180,-80-Go],[180,80+Go]])}var _u,mu,vu,gu,yu=function(t){return t},bu=Yo(),wu=Yo(),xu={point:ma,lineStart:ma,lineEnd:ma,polygonStart:function(){xu.lineStart=Mu,xu.lineEnd=Au},polygonEnd:function(){xu.lineStart=xu.lineEnd=xu.point=ma,bu.add(ea(wu)),wu.reset()},result:function(){var t=bu/2;return bu.reset(),t}};function Mu(){xu.point=Eu}function Eu(t,e){xu.point=Su,_u=vu=t,mu=gu=e}function Su(t,e){wu.add(gu*t-vu*e),vu=t,gu=e}function Au(){Su(_u,mu)}var ku,Tu,Ou,Cu,Ru=1/0,ju=Ru,Nu=-Ru,Pu=Nu,Iu={point:function(t,e){t<Ru&&(Ru=t),t>Nu&&(Nu=t),e<ju&&(ju=e),e>Pu&&(Pu=e)},lineStart:ma,lineEnd:ma,polygonStart:ma,polygonEnd:ma,result:function(){var t=[[Ru,ju],[Nu,Pu]];return Nu=Pu=-(ju=Ru=1/0),t}},Lu=0,zu=0,Uu=0,qu=0,Du=0,Fu=0,Bu=0,Hu=0,Yu=0,Vu={point:Wu,lineStart:Xu,lineEnd:Ku,polygonStart:function(){Vu.lineStart=$u,Vu.lineEnd=Qu},polygonEnd:function(){Vu.point=Wu,Vu.lineStart=Xu,Vu.lineEnd=Ku},result:function(){var t=Yu?[Bu/Yu,Hu/Yu]:Fu?[qu/Fu,Du/Fu]:Uu?[Lu/Uu,zu/Uu]:[NaN,NaN];return Lu=zu=Uu=qu=Du=Fu=Bu=Hu=Yu=0,t}};function Wu(t,e){Lu+=t,zu+=e,++Uu}function Xu(){Vu.point=Gu}function Gu(t,e){Vu.point=Zu,Wu(Ou=t,Cu=e)}function Zu(t,e){var n=t-Ou,r=e-Cu,i=ha(n*n+r*r);qu+=i*(Ou+t)/2,Du+=i*(Cu+e)/2,Fu+=i,Wu(Ou=t,Cu=e)}function Ku(){Vu.point=Wu}function $u(){Vu.point=Ju}function Qu(){tc(ku,Tu)}function Ju(t,e){Vu.point=tc,Wu(ku=Ou=t,Tu=Cu=e)}function tc(t,e){var n=t-Ou,r=e-Cu,i=ha(n*n+r*r);qu+=i*(Ou+t)/2,Du+=i*(Cu+e)/2,Fu+=i,Bu+=(i=Cu*t-Ou*e)*(Ou+t),Hu+=i*(Cu+e),Yu+=3*i,Wu(Ou=t,Cu=e)}function ec(t){this._context=t}ec.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Qo)}},result:ma};var nc,rc,ic,oc,ac,sc=Yo(),uc={point:ma,lineStart:function(){uc.point=cc},lineEnd:function(){nc&&lc(rc,ic),uc.point=ma},polygonStart:function(){nc=!0},polygonEnd:function(){nc=null},result:function(){var t=+sc;return sc.reset(),t}};function cc(t,e){uc.point=lc,rc=oc=t,ic=ac=e}function lc(t,e){oc-=t,ac-=e,sc.add(ha(oc*oc+ac*ac)),oc=t,ac=e}function hc(){this._string=[]}function fc(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}hc.prototype={_circle:fc(4.5),pointRadius:function(t){return this._circle=fc(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}}};var dc=Yo(),pc=function(t,e,n,r){return function(i,o){var a,s,u,c=e(o),l=i.invert(r[0],r[1]),h=Ws(),f=e(h),d=!1,p={point:_,lineStart:v,lineEnd:g,polygonStart:function(){p.point=y,p.lineStart=b,p.lineEnd=w,s=[],a=[]},polygonEnd:function(){p.point=_,p.lineStart=v,p.lineEnd=g,s=M(s);var t=function(t,e){var n=e[0],r=e[1],i=[ca(n),-ia(n),0],o=0,a=0;dc.reset();for(var s=0,u=t.length;s<u;++s)if(l=(c=t[s]).length)for(var c,l,h=c[l-1],f=h[0],d=h[1]/2+$o,p=ca(d),_=ia(d),m=0;m<l;++m,f=g,p=b,_=w,h=v){var v=c[m],g=v[0],y=v[1]/2+$o,b=ca(y),w=ia(y),x=g-f,M=x>=0?1:-1,E=M*x,S=E>Zo,A=p*b;if(dc.add(ra(A*M*ca(E),_*w+A*ia(E))),o+=S?x+M*Qo:x,S^f>=n^g>=n){var k=Wa(Ya(h),Ya(v));Za(k);var T=Wa(i,k);Za(T);var O=(S^x>=0?-1:1)*pa(T[2]);(r>O||r===O&&(k[0]||k[1]))&&(a+=S^x>=0?1:-1)}}return(o<-Go||o<Go&&dc<-Go)^1&a}(a,l);s.length?(d||(o.polygonStart(),d=!0),Ks(s,mc,t,n,o)):t&&(d||(o.polygonStart(),d=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),d&&(o.polygonEnd(),d=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function _(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function m(t,e){var n=i(t,e);c.point(n[0],n[1])}function v(){p.point=m,c.lineStart()}function g(){p.point=_,c.lineEnd()}function y(t,e){u.push([t,e]);var n=i(t,e);f.point(n[0],n[1])}function b(){f.lineStart(),u=[]}function w(){y(u[0][0],u[0][1]),f.lineEnd();var t,e,n,r,i=f.clean(),c=h.result(),l=c.length;if(u.pop(),a.push(u),u=null,l)if(1&i){if(n=c[0],(e=n.length-1)>0){for(d||(o.polygonStart(),d=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else l>1&&2&i&&c.push(c.pop().concat(c.shift())),s.push(c.filter(_c))}return p}};function _c(t){return t.length>1}function mc(t,e){return((t=t.x)[0]<0?t[1]-Ko-Go:Ko-t[1])-((e=e.x)[0]<0?e[1]-Ko-Go:Ko-e[1])}var vc=pc(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Zo:-Zo,u=ea(o-n);ea(u-Zo)<Go?(t.point(n,r=(r+a)/2>0?Ko:-Ko),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Zo&&(ea(n-i)<Go&&(n-=i*Go),ea(o-s)<Go&&(o-=s*Go),r=function(t,e,n,r){var i,o,a=ca(t-n);return ea(a)>Go?na((ca(e)*(o=ia(r))*ca(n)-ca(r)*(i=ia(e))*ca(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*Ko,r.point(-Zo,i),r.point(0,i),r.point(Zo,i),r.point(Zo,0),r.point(Zo,-i),r.point(0,-i),r.point(-Zo,-i),r.point(-Zo,0),r.point(-Zo,i);else if(ea(t[0]-e[0])>Go){var o=t[0]<e[0]?Zo:-Zo;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Zo,-Ko]),gc=function(t,e){var n=ia(t),r=n>0,i=ea(n)>Go;function o(t,e){return ia(t)*ia(e)>n}function a(t,e,r){var i=Ya(t),o=Ya(e),a=[1,0,0],s=Wa(i,o),u=Va(s,s),c=s[0],l=u-c*c;if(!l)return!r&&t;var h=n*u/l,f=-n*c/l,d=Wa(a,s),p=Ga(a,h),_=Ga(s,f);Xa(p,_);var m=d,v=Va(p,m),g=Va(m,m),y=v*v-g*(Va(p,p)-1);if(!(y<0)){var b=ha(y),w=Ga(m,(-v-b)/g);if(Xa(w,p),w=Ha(w),!r)return w;var x,M=t[0],E=e[0],S=t[1],A=e[1];E<M&&(x=M,M=E,E=x);var k=E-M,T=ea(k-Zo)<Go,O=T||k<Go;if(!T&&A<S&&(x=S,S=A,A=x),O?T?S+A>0^w[1]<(ea(w[0]-M)<Go?S:A):S<=w[1]&&w[1]<=A:k>Zo^(M<=w[0]&&w[0]<=E)){var C=Ga(m,(-v+b)/g);return Xa(C,p),[w,Ha(C)]}}}function s(e,n){var i=r?t:Zo-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return pc(o,function(t){var e,n,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(h,f){var d,p=[h,f],_=o(h,f),m=r?_?0:s(h,f):_?s(h+(h<0?Zo:-Zo),f):0;if(!e&&(c=u=_)&&t.lineStart(),_!==u&&(d=a(e,p),(Gs(e,d)||Gs(p,d))&&(p[0]+=Go,p[1]+=Go,_=o(p[0],p[1]))),_!==u)l=0,_?(t.lineStart(),d=a(p,e),t.point(d[0],d[1])):(d=a(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(i&&e&&r^_){var v;m&n||!(v=a(p,e,!0))||(l=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!_||e&&Gs(e,p)||t.point(p[0],p[1]),e=p,u=_,n=m},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}},function(n,r,i,o){Ys(o,t,e,i,n,r)},r?[0,-t]:[-Zo,t-Zo])};function yc(t){return function(e){var n=new bc;for(var r in t)n[r]=t[r];return n.stream=e,n}}function bc(){}function wc(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Ia(n,t.stream(Iu));var a=Iu.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,c=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,c])}function xc(t,e,n){return wc(t,[[0,0],e],n)}bc.prototype={constructor:bc,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Mc=16,Ec=ia(30*ta),Sc=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,l,h,f,d,p,_,m){var v=c-r,g=l-i,y=v*v+g*g;if(y>4*e&&_--){var b=a+f,w=s+d,x=u+p,M=ha(b*b+w*w+x*x),E=pa(x/=M),S=ea(ea(x)-1)<Go||ea(o-h)<Go?(o+h)/2:ra(w,b),A=t(S,E),k=A[0],T=A[1],O=k-r,C=T-i,R=g*O-v*C;(R*R/y>e||ea((v*O+g*C)/y-.5)>.3||a*f+s*d+u*p<Ec)&&(n(r,i,o,a,s,u,k,T,S,b/=M,w/=M,x,_,m),m.point(k,T),n(k,T,S,b,w,x,c,l,h,f,d,p,_,m))}}return function(e){var r,i,o,a,s,u,c,l,h,f,d,p,_={point:m,lineStart:v,lineEnd:y,polygonStart:function(){e.polygonStart(),_.lineStart=b},polygonEnd:function(){e.polygonEnd(),_.lineStart=v}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){l=NaN,_.point=g,e.lineStart()}function g(r,i){var o=Ya([r,i]),a=t(r,i);n(l,h,c,f,d,p,l=a[0],h=a[1],c=r,f=o[0],d=o[1],p=o[2],Mc,e),e.point(l,h)}function y(){_.point=m,e.lineEnd()}function b(){v(),_.point=w,_.lineEnd=x}function w(t,e){g(r=t,e),i=l,o=h,a=f,s=d,u=p,_.point=g}function x(){n(l,h,c,f,d,p,i,o,r,a,s,u,Mc,e),_.lineEnd=y,y()}return _}}(t,e):function(t){return yc({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},Ac=yc({point:function(t,e){this.stream.point(t*ta,e*ta)}});function kc(t){return Tc(function(){return t})()}function Tc(t){var e,n,r,i,o,a,s,u,c,l,h=150,f=480,d=250,p=0,_=0,m=0,v=0,g=0,y=null,b=vc,w=null,x=yu,M=.5,E=Sc(k,M);function S(t){return[(t=o(t[0]*ta,t[1]*ta))[0]*h+n,r-t[1]*h]}function A(t){return(t=o.invert((t[0]-n)/h,(r-t[1])/h))&&[t[0]*Jo,t[1]*Jo]}function k(t,i){return[(t=e(t,i))[0]*h+n,r-t[1]*h]}function T(){o=Us(i=Ds(m,v,g),e);var t=e(p,_);return n=f-t[0]*h,r=d+t[1]*h,O()}function O(){return c=l=null,S}return S.stream=function(t){return c&&l===t?c:c=Ac(b(i,E(x(l=t))))},S.clipAngle=function(t){return arguments.length?(b=+t?gc(y=t*ta,6*ta):(y=null,vc),O()):y*Jo},S.clipExtent=function(t){return arguments.length?(x=null==t?(w=a=s=u=null,yu):tu(w=+t[0][0],a=+t[0][1],s=+t[1][0],u=+t[1][1]),O()):null==w?null:[[w,a],[s,u]]},S.scale=function(t){return arguments.length?(h=+t,T()):h},S.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],T()):[f,d]},S.center=function(t){return arguments.length?(p=t[0]%360*ta,_=t[1]%360*ta,T()):[p*Jo,_*Jo]},S.rotate=function(t){return arguments.length?(m=t[0]%360*ta,v=t[1]%360*ta,g=t.length>2?t[2]%360*ta:0,T()):[m*Jo,v*Jo,g*Jo]},S.precision=function(t){return arguments.length?(E=Sc(k,M=t*t),O()):ha(M)},S.fitExtent=function(t,e){return wc(S,t,e)},S.fitSize=function(t,e){return xc(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&A,T()}}function Oc(t){var e=0,n=Zo/3,r=Tc(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*ta,n=t[1]*ta):[e*Jo,n*Jo]},i}function Cc(t,e){var n=ca(t),r=(n+ca(e))/2;if(ea(r)<Go)return function(t){var e=ia(t);function n(t,n){return[t*e,ca(n)/e]}return n.invert=function(t,n){return[t/e,pa(n*e)]},n}(t);var i=1+n*(2*r-n),o=ha(i)/r;function a(t,e){var n=ha(i-2*r*ca(e))/r;return[n*ca(t*=r),o-n*ia(t)]}return a.invert=function(t,e){var n=o-e;return[ra(t,ea(n))/r*la(n),pa((i-(t*t+n*n)*r*r)/(2*r))]},a}var Rc=function(){return Oc(Cc).scale(155.424).center([0,33.6442])},jc=function(){return Rc().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function Nc(t){return function(e,n){var r=ia(e),i=ia(n),o=t(r*i);return[o*i*ca(e),o*ca(n)]}}function Pc(t){return function(e,n){var r=ha(e*e+n*n),i=t(r),o=ca(i),a=ia(i);return[ra(e*o,r*a),pa(r&&n*o/r)]}}var Ic=Nc(function(t){return ha(2/(1+t))});Ic.invert=Pc(function(t){return 2*pa(t/2)});var Lc=Nc(function(t){return(t=da(t))&&t/ca(t)});function zc(t,e){return[t,sa(fa((Ko+e)/2))]}function Uc(t){var e,n=kc(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(t){return arguments.length?(r(t),e&&n.clipExtent(null),n):r()},n.translate=function(t){return arguments.length?(i(t),e&&n.clipExtent(null),n):i()},n.clipExtent=function(t){if(!arguments.length)return e?null:o();if(e=null==t){var a=Zo*r(),s=i();t=[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]}return o(t),n},n.clipExtent(null)}function qc(t){return fa((Ko+t)/2)}function Dc(t,e){var n=ia(t),r=t===e?ca(t):sa(n/ia(e))/sa(qc(e)/qc(t)),i=n*ua(qc(t),r)/r;if(!r)return zc;function o(t,e){i>0?e<-Ko+Go&&(e=-Ko+Go):e>Ko-Go&&(e=Ko-Go);var n=i/ua(qc(e),r);return[n*ca(r*t),i-n*ia(r*t)]}return o.invert=function(t,e){var n=i-e,o=la(r)*ha(t*t+n*n);return[ra(t,ea(n))/r*la(n),2*na(ua(i/o,1/r))-Ko]},o}function Fc(t,e){return[t,e]}function Bc(t,e){var n=ia(t),r=t===e?ca(t):(n-ia(e))/(e-t),i=n/r+t;if(ea(r)<Go)return Fc;function o(t,e){var n=i-e,o=r*t;return[n*ca(o),i-n*ia(o)]}return o.invert=function(t,e){var n=i-e;return[ra(t,ea(n))/r*la(n),i-la(r)*ha(t*t+n*n)]},o}function Hc(t,e){var n=ia(e),r=ia(t)*n;return[n*ca(t)/r,ca(e)/r]}function Yc(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?yu:yc({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}function Vc(t,e){return[ia(e)*ca(t),ca(e)]}function Wc(t,e){var n=ia(e),r=1+ia(t)*n;return[n*ca(t)/r,ca(e)/r]}function Xc(t,e){return[sa(fa((Ko+e)/2)),-t]}function Gc(t,e){return t.parent===e.parent?1:2}function Zc(t,e){return t+e.x}function Kc(t,e){return Math.max(t,e.y)}function $c(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Qc(t,e){var n,r,i,o,a,s=new nl(t),u=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=Jc);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(r=n.children[o]=new nl(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(el)}function Jc(t){return t.children}function tl(t){t.data=t.data.data}function el(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function nl(t){this.data=t,this.depth=this.height=0,this.parent=null}function rl(t){this._=t,this.next=null}Lc.invert=Pc(function(t){return t}),zc.invert=function(t,e){return[t,2*na(aa(e))-Ko]},Fc.invert=Fc,Hc.invert=Pc(na),Vc.invert=Pc(pa),Wc.invert=Pc(function(t){return 2*na(t)}),Xc.invert=function(t,e){return[-e,2*na(aa(t))-Ko]},nl.prototype=Qc.prototype={constructor:nl,count:function(){return this.eachAfter($c)},each:function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return Qc(this).eachBefore(tl)}};var il=function(t){return function t(e,n){var r,i,o,a=null,s=e.head;switch(n.length){case 1:r=function(t){return{x:t.x,y:t.y,r:t.r}}(n[0]);break;case 2:r=function(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,l=s-i,h=Math.sqrt(u*u+c*c);return{x:(n+o+u/h*l)/2,y:(r+a+c/h*l)/2,r:(h+i+s)/2}}(n[0],n[1]);break;case 3:r=function(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,l=n.y,h=n.r,f=2*(r-a),d=2*(i-s),p=2*(u-o),_=r*r+i*i-o*o-a*a-s*s+u*u,m=2*(r-c),v=2*(i-l),g=2*(h-o),y=r*r+i*i-o*o-c*c-l*l+h*h,b=m*d-f*v,w=(d*y-v*_)/b-r,x=(v*p-d*g)/b,M=(m*_-f*y)/b-i,E=(f*g-m*p)/b,S=x*x+E*E-1,A=2*(w*x+M*E+o),k=w*w+M*M-o*o,T=(-A-Math.sqrt(A*A-4*S*k))/(2*S);return{x:w+x*T+r,y:M+E*T+i,r:T}}(n[0],n[1],n[2])}for(;s;)o=s._,i=s.next,r&&ol(r,o)?a=s:(a?(e.tail=a,a.next=null):e.head=e.tail=null,n.push(o),r=t(e,n),n.pop(),e.head?(s.next=e.head,e.head=s):(s.next=null,e.head=e.tail=s),(a=e.tail).next=i),s=i;return e.tail=a,r}(function(t){for(var e=(t=t.slice()).length,n=null,r=n;e;){var i=new rl(t[e-1]);r=r?r.next=i:n=i,t[void 0]=t[--e]}return{head:n,tail:r}}(t),[])};function ol(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r-e.r;return i*i+1e-6>n*n+r*r}function al(t,e,n){var r=t.x,i=t.y,o=e.r+n.r,a=t.r+n.r,s=e.x-r,u=e.y-i,c=s*s+u*u;if(c){var l=.5+((a*=a)-(o*=o))/(2*c),h=Math.sqrt(Math.max(0,2*o*(a+c)-(a-=c)*a-o*o))/(2*c);n.x=r+l*s+h*u,n.y=i+l*u-h*s}else n.x=r+a,n.y=i}function sl(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-1e-6>n*n+r*r}function ul(t,e){for(var n=t._.r;t!==e;)n+=2*(t=t.next)._.r;return n-e._.r}function cl(t,e,n){var r=t._,i=t.next._,o=r.r+i.r,a=(r.x*i.r+i.x*r.r)/o-e,s=(r.y*i.r+i.y*r.r)/o-n;return a*a+s*s}function ll(t){this._=t,this.next=null,this.previous=null}function hl(t){if(!(i=t.length))return 0;var e,n,r,i;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;al(n,e,r=t[2]);var o,a,s,u,c,l,h,f=e.r*e.r,d=n.r*n.r,p=r.r*r.r,_=f+d+p,m=f*e.x+d*n.x+p*r.x,v=f*e.y+d*n.y+p*r.y;e=new ll(e),n=new ll(n),r=new ll(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){al(e._,n._,r=t[s]),r=new ll(r),u=n.next,c=e.previous,l=n._.r,h=e._.r;do{if(l<=h){if(sl(u._,r._)){l+e._.r+n._.r>ul(u,n)?e=u:n=u,e.next=n,n.previous=e,--s;continue t}l+=u._.r,u=u.next}else{if(sl(c._,r._)){ul(e,c)>h+e._.r+n._.r?e=c:n=c,e.next=n,n.previous=e,--s;continue t}h+=c._.r,c=c.previous}}while(u!==c.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,_+=p=r._.r*r._.r,m+=p*r._.x,v+=p*r._.y,f=cl(e,o=m/_,a=v/_);(r=r.next)!==n;)(p=cl(r,o,a))<f&&(e=r,f=p);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=il(e),s=0;s<i;++s)(e=t[s]).x-=r.x,e.y-=r.y;return r.r}function fl(t){if("function"!=typeof t)throw new Error;return t}function dl(){return 0}var pl=function(t){return function(){return t}};function _l(t){return Math.sqrt(t.value)}function ml(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function vl(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=hl(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function gl(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var yl=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},bl=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c},wl="$",xl={depth:-1},Ml={};function El(t){return t.id}function Sl(t){return t.parentId}function Al(t,e){return t.parent===e.parent?1:2}function kl(t){var e=t.children;return e?e[0]:t.t}function Tl(t){var e=t.children;return e?e[e.length-1]:t.t}function Ol(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Cl(t,e,n){return t.a.parent===e.parent?t.a:n}function Rl(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Rl.prototype=Object.create(nl.prototype);var jl=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;++s<u;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c},Nl=(1+Math.sqrt(5))/2;function Pl(t,e,n,r,i,o){for(var a,s,u,c,l,h,f,d,p,_,m,v=[],g=e.children,y=0,b=0,w=g.length,x=e.value;y<w;){u=i-n,c=o-r;do{l=g[b++].value}while(!l&&b<w);for(h=f=l,_=Math.max(c/u,u/c)/(x*t),m=l*l*_,p=Math.max(f/m,m/h);b<w;++b){if(l+=s=g[b].value,s<h&&(h=s),s>f&&(f=s),m=l*l*_,(d=Math.max(f/m,m/h))>p){l-=s;break}p=d}v.push(a={value:l,dice:u<c,children:g.slice(y,b)}),a.dice?bl(a,n,r,i,x?r+=c*l/x:o):jl(a,n,r,x?n+=u*l/x:i,o),x-=l,y=b}return v}var Il=function t(e){function n(t,n,r,i,o){Pl(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Nl),Ll=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,c,l,h=-1,f=a.length,d=t.value;++h<f;){for(s=a[h],u=s.children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?bl(s,n,r,i,r+=(o-r)*s.value/d):jl(s,n,r,n+=(i-n)*s.value/d,o),d-=s.value}else t._squarify=a=Pl(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Nl),zl=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])};function Ul(t,e){return t[0]-e[0]||t[1]-e[1]}function ql(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;++i){for(;r>1&&zl(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}var Dl=[].slice,Fl={};function Bl(t){if(!(t>=1))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function Hl(t){if(!t._start)try{!function(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,i=n[r];n[r]=Yl(t,e),--t._waiting,++t._active,n=i.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||Fl)}}(t)}catch(e){if(t._tasks[t._ended+t._active-1])Vl(t,e);else if(!t._data)throw e}}function Yl(t,e){return function(n,r){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?Vl(t,n):(t._data[e]=r,t._waiting?Hl(t):Wl(t))))}}function Vl(t,e){var n,r=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--r>=0;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,Wl(t)}function Wl(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function Xl(t){return new Bl(arguments.length?+t:1/0)}Bl.prototype=Xl.prototype={constructor:Bl,defer:function(t){if("function"!=typeof t||this._call)throw new Error;if(null!=this._error)return this;var e=Dl.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),Hl(this),this},abort:function(){return null==this._error&&Vl(this,new Error("abort")),this},await:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=function(e,n){t.apply(null,[e].concat(n))},Wl(this),this},awaitAll:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=t,Wl(this),this}};var Gl=function(t,e){var n,r;return t=null==t?0:+t,e=null==e?1:+e,function(){var i;if(null!=n)i=n,n=null;else do{n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i}while(!r||r>1);return t+e*i*Math.sqrt(-2*Math.log(r)/r)}},Zl=function(t){return function(){for(var e=0,n=0;n<t;++n)e+=Math.random();return e}},Kl=function(t,e){var n,r,i,o,a=q("beforesend","progress","load","error"),s=Hi(),u=new XMLHttpRequest,c=null,l=null,h=0;function f(t){var e,r=u.status;if(!r&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(u)||r>=200&&r<300||304===r){if(i)try{e=i.call(n,u)}catch(t){return void a.call("error",n,t)}else e=u;a.call("load",n,e)}else a.call("error",n,t)}if("undefined"==typeof XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=u.ontimeout=f:u.onreadystatechange=function(t){u.readyState>3&&f(t)},u.onprogress=function(t){a.call("progress",n,t)},n={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s.get(t):(null==e?s.remove(t):s.set(t,e+""),n)},mimeType:function(t){return arguments.length?(r=null==t?null:t+"",n):r},responseType:function(t){return arguments.length?(o=t,n):o},timeout:function(t){return arguments.length?(h=+t,n):h},user:function(t){return arguments.length<1?c:(c=null==t?null:t+"",n)},password:function(t){return arguments.length<1?l:(l=null==t?null:t+"",n)},response:function(t){return i=t,n},get:function(t,e){return n.send("GET",t,e)},post:function(t,e){return n.send("POST",t,e)},send:function(e,i,f){return u.open(e,t,!0,c,l),null==r||s.has("accept")||s.set("accept",r+",*/*"),u.setRequestHeader&&s.each(function(t,e){u.setRequestHeader(e,t)}),null!=r&&u.overrideMimeType&&u.overrideMimeType(r),null!=o&&(u.responseType=o),h>0&&(u.timeout=h),null==f&&"function"==typeof i&&(f=i,i=null),null!=f&&1===f.length&&(f=function(t){return function(e,n){t(null==e?n:null)}}(f)),null!=f&&n.on("error",f).on("load",function(t){f(null,t)}),a.call("beforesend",n,u),u.send(null==i?null:i),n},abort:function(){return u.abort(),n},on:function(){var t=a.on.apply(a,arguments);return t===a?n:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return n.get(e)}return n},$l=function(t,e){return function(n,r){var i=Kl(n).mimeType(t).response(e);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}},Ql=$l("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),Jl=$l("application/json",function(t){return JSON.parse(t.responseText)}),th=$l("text/plain",function(t){return t.responseText}),eh=$l("application/xml",function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e}),nh=function(t,e){return function(n,r,i){arguments.length<3&&(i=r,r=null);var o=Kl(n).mimeType(t);return o.row=function(t){return arguments.length?o.response(function(t,e){return function(n){return t(n.responseText,e)}}(e,r=t)):r},o.row(r),i?o.get(i):o}},rh=nh("text/csv",to),ih=nh("text/tab-separated-values",oo),oh=Array.prototype,ah=oh.map,sh=oh.slice,uh={name:"implicit"};function ch(t){var e=Hi(),n=[],r=uh;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==uh)return r;e.set(o,a=n.push(i))}return t[(a-1)%t.length]}return t=null==t?[]:sh.call(t),i.domain=function(t){if(!arguments.length)return n.slice();n=[],e=Hi();for(var r,o,a=-1,s=t.length;++a<s;)e.has(o=(r=t[a])+"")||e.set(o,n.push(r));return i},i.range=function(e){return arguments.length?(t=sh.call(e),i):t.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return ch().domain(n).range(t).unknown(r)},i}function lh(){var t,e,n=ch().unknown(void 0),r=n.domain,i=n.range,o=[0,1],a=!1,s=0,u=0,c=.5;function l(){var n=r().length,l=o[1]<o[0],h=o[l-0],f=o[1-l];t=(f-h)/Math.max(1,n-s+2*u),a&&(t=Math.floor(t)),h+=(f-h-t*(n-s))*c,e=t*(1-s),a&&(h=Math.round(h),e=Math.round(e));var d=_(n).map(function(e){return h+t*e});return i(l?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),l()):r()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],l()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,l()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,l()):a},n.padding=function(t){return arguments.length?(s=u=Math.max(0,Math.min(1,t)),l()):s},n.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},n.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},n.copy=function(){return lh().domain(r()).range(o).round(a).paddingInner(s).paddingOuter(u).align(c)},l()}var hh=function(t){return function(){return t}},fh=function(t){return+t},dh=[0,1];function ph(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:hh(e)}function _h(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1];return o<i?(i=n(o,i),a=r(s,a)):(i=n(i,o),a=r(a,s)),function(t){return a(i(t))}}function mh(t,e,n,r){var o=Math.min(t.length,e.length)-1,a=new Array(o),s=new Array(o),u=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<o;)a[u]=n(t[u],t[u+1]),s[u]=r(e[u],e[u+1]);return function(e){var n=i(t,e,1,o)-1;return s[n](a[n](e))}}function vh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function gh(t,e){var n,r,i,o=dh,a=dh,s=vn,u=!1;function c(){return n=Math.min(o.length,a.length)>2?mh:_h,r=i=null,l}function l(e){return(r||(r=n(o,a,u?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,s)))(+e)}return l.invert=function(t){return(i||(i=n(a,o,ph,u?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},l.domain=function(t){return arguments.length?(o=ah.call(t,fh),c()):o.slice()},l.range=function(t){return arguments.length?(a=sh.call(t),c()):a.slice()},l.rangeRound=function(t){return a=sh.call(t),s=gn,c()},l.clamp=function(t){return arguments.length?(u=!!t,c()):u},l.interpolate=function(t){return arguments.length?(s=t,c()):s},c()}var yh=function(e,n,r){var i,o=e[0],a=e[e.length-1],s=b(o,a,null==n?10:n);switch((r=Po(null==r?",f":r)).type){case"s":var u=Math.max(Math.abs(o),Math.abs(a));return null!=r.precision||isNaN(i=Bo(s,u))||(r.precision=i),t.formatPrefix(r,u);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Ho(s,Math.max(Math.abs(o),Math.abs(a))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Fo(s))||(r.precision=i-2*("%"===r.type))}return t.format(r)};function bh(t){var e=t.domain;return t.ticks=function(t){var n=e();return y(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return yh(e(),t,n)},t.nice=function(n){var r=e(),i=r.length-1,o=null==n?10:n,a=r[0],s=r[i],u=b(a,s,o);return u&&(u=b(Math.floor(a/u)*u,Math.ceil(s/u)*u,o),r[0]=Math.floor(a/u)*u,r[i]=Math.ceil(s/u)*u,e(r)),t},t}var wh=function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t};function xh(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:hh(e)}function Mh(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function Eh(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Sh(t){return 10===t?Eh:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Ah(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function kh(t){return function(e){return-t(-e)}}function Th(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function Oh(){var t=1,e=gh(function(e,n){return(n=Th(n,t)-(e=Th(e,t)))?function(r){return(Th(r,t)-e)/n}:hh(n)},function(e,n){return n=Th(n,t)-(e=Th(e,t)),function(r){return Th(e+n*r,1/t)}}),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return vh(e,Oh().exponent(t))},bh(e)}var Ch=new Date,Rh=new Date;function jh(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;do{a.push(new Date(+n))}while(e(n,o),t(n),n<r);return a},i.filter=function(n){return jh(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return Ch.setTime(+e),Rh.setTime(+r),t(Ch),t(Rh),Math.floor(n(Ch,Rh))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Nh=jh(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Nh.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?jh(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Nh:null};var Ph=Nh.range,Ih=6e4,Lh=6048e5,zh=jh(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Uh=zh.range,qh=jh(function(t){t.setTime(Math.floor(t/Ih)*Ih)},function(t,e){t.setTime(+t+e*Ih)},function(t,e){return(e-t)/Ih},function(t){return t.getMinutes()}),Dh=qh.range,Fh=jh(function(t){var e=t.getTimezoneOffset()*Ih%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),Bh=Fh.range,Hh=jh(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ih)/864e5},function(t){return t.getDate()-1}),Yh=Hh.range;function Vh(t){return jh(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ih)/Lh})}var Wh=Vh(0),Xh=Vh(1),Gh=Vh(2),Zh=Vh(3),Kh=Vh(4),$h=Vh(5),Qh=Vh(6),Jh=Wh.range,tf=Xh.range,ef=Gh.range,nf=Zh.range,rf=Kh.range,of=$h.range,af=Qh.range,sf=jh(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),uf=sf.range,cf=jh(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});cf.every=function(t){return isFinite(t=Math.floor(t))&&t>0?jh(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var lf=cf.range,hf=jh(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Ih)},function(t,e){return(e-t)/Ih},function(t){return t.getUTCMinutes()}),ff=hf.range,df=jh(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),pf=df.range,_f=jh(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),mf=_f.range;function vf(t){return jh(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Lh})}var gf=vf(0),yf=vf(1),bf=vf(2),wf=vf(3),xf=vf(4),Mf=vf(5),Ef=vf(6),Sf=gf.range,Af=yf.range,kf=bf.range,Tf=wf.range,Of=xf.range,Cf=Mf.range,Rf=Ef.range,jf=jh(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Nf=jf.range,Pf=jh(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Pf.every=function(t){return isFinite(t=Math.floor(t))&&t>0?jh(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var If=Pf.range;function Lf(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function zf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Uf(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function qf(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=Xf(i),l=Gf(i),h=Xf(o),f=Gf(o),d=Xf(a),p=Gf(a),_=Xf(s),m=Gf(s),v=Xf(u),g=Gf(u),y={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:cd,e:cd,H:ld,I:hd,j:fd,L:dd,m:pd,M:_d,p:function(t){return i[+(t.getHours()>=12)]},S:md,U:vd,w:gd,W:yd,x:null,X:null,y:bd,Y:wd,Z:xd,"%":zd},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Md,e:Md,H:Ed,I:Sd,j:Ad,L:kd,m:Td,M:Od,p:function(t){return i[+(t.getUTCHours()>=12)]},S:Cd,U:Rd,w:jd,W:Nd,x:null,X:null,y:Pd,Y:Id,Z:Ld,"%":zd},w={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=g[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=_.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return E(t,e,n,r)},d:nd,e:nd,H:id,I:id,j:rd,L:sd,m:ed,M:od,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},S:ad,U:Kf,w:Zf,W:$f,x:function(t,e,r){return E(t,n,e,r)},X:function(t,e,n){return E(t,r,e,n)},y:Jf,Y:Qf,Z:td,"%":ud};function x(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Ff[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function M(t,e){return function(n){var r=Uf(1900),i=E(r,t,n+="",0);if(i!=n.length)return null;if("p"in r&&(r.H=r.H%12+12*r.p),"W"in r||"U"in r){"w"in r||(r.w="W"in r?1:0);var o="Z"in r?zf(Uf(r.y)).getUTCDay():e(Uf(r.y)).getDay();r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(o+5)%7:r.w+7*r.U-(o+6)%7}return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,zf(r)):e(r)}}function E(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=w[i in Ff?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return y.x=x(n,y),y.X=x(r,y),y.c=x(e,y),b.x=x(n,b),b.X=x(r,b),b.c=x(e,b),{format:function(t){var e=x(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",Lf);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t,zf);return e.toString=function(){return t},e}}}var Df,Ff={"-":"",_:" ",0:"0"},Bf=/^\s*\d+/,Hf=/^%/,Yf=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function Vf(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Wf(t){return t.replace(Yf,"\\$&")}function Xf(t){return new RegExp("^(?:"+t.map(Wf).join("|")+")","i")}function Gf(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Zf(t,e,n){var r=Bf.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Kf(t,e,n){var r=Bf.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function $f(t,e,n){var r=Bf.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Qf(t,e,n){var r=Bf.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Jf(t,e,n){var r=Bf.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function td(t,e,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ed(t,e,n){var r=Bf.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function nd(t,e,n){var r=Bf.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function rd(t,e,n){var r=Bf.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function id(t,e,n){var r=Bf.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function od(t,e,n){var r=Bf.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ad(t,e,n){var r=Bf.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function sd(t,e,n){var r=Bf.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ud(t,e,n){var r=Hf.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function cd(t,e){return Vf(t.getDate(),e,2)}function ld(t,e){return Vf(t.getHours(),e,2)}function hd(t,e){return Vf(t.getHours()%12||12,e,2)}function fd(t,e){return Vf(1+Hh.count(cf(t),t),e,3)}function dd(t,e){return Vf(t.getMilliseconds(),e,3)}function pd(t,e){return Vf(t.getMonth()+1,e,2)}function _d(t,e){return Vf(t.getMinutes(),e,2)}function md(t,e){return Vf(t.getSeconds(),e,2)}function vd(t,e){return Vf(Wh.count(cf(t),t),e,2)}function gd(t){return t.getDay()}function yd(t,e){return Vf(Xh.count(cf(t),t),e,2)}function bd(t,e){return Vf(t.getFullYear()%100,e,2)}function wd(t,e){return Vf(t.getFullYear()%1e4,e,4)}function xd(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Vf(e/60|0,"0",2)+Vf(e%60,"0",2)}function Md(t,e){return Vf(t.getUTCDate(),e,2)}function Ed(t,e){return Vf(t.getUTCHours(),e,2)}function Sd(t,e){return Vf(t.getUTCHours()%12||12,e,2)}function Ad(t,e){return Vf(1+_f.count(Pf(t),t),e,3)}function kd(t,e){return Vf(t.getUTCMilliseconds(),e,3)}function Td(t,e){return Vf(t.getUTCMonth()+1,e,2)}function Od(t,e){return Vf(t.getUTCMinutes(),e,2)}function Cd(t,e){return Vf(t.getUTCSeconds(),e,2)}function Rd(t,e){return Vf(gf.count(Pf(t),t),e,2)}function jd(t){return t.getUTCDay()}function Nd(t,e){return Vf(yf.count(Pf(t),t),e,2)}function Pd(t,e){return Vf(t.getUTCFullYear()%100,e,2)}function Id(t,e){return Vf(t.getUTCFullYear()%1e4,e,4)}function Ld(){return"+0000"}function zd(){return"%"}function Ud(e){return Df=qf(e),t.timeFormat=Df.format,t.timeParse=Df.parse,t.utcFormat=Df.utcFormat,t.utcParse=Df.utcParse,Df}Ud({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var qd=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Dd=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),Fd=1e3,Bd=60*Fd,Hd=60*Bd,Yd=24*Hd,Vd=7*Yd,Wd=30*Yd,Xd=365*Yd;function Gd(t){return new Date(t)}function Zd(t){return t instanceof Date?+t:+new Date(+t)}function Kd(t,e,r,i,o,a,s,u,c){var l=gh(ph,fn),h=l.invert,f=l.domain,d=c(".%L"),p=c(":%S"),_=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),g=c("%b %d"),y=c("%B"),w=c("%Y"),x=[[s,1,Fd],[s,5,5*Fd],[s,15,15*Fd],[s,30,30*Fd],[a,1,Bd],[a,5,5*Bd],[a,15,15*Bd],[a,30,30*Bd],[o,1,Hd],[o,3,3*Hd],[o,6,6*Hd],[o,12,12*Hd],[i,1,Yd],[i,2,2*Yd],[r,1,Vd],[e,1,Wd],[e,3,3*Wd],[t,1,Xd]];function M(n){return(s(n)<n?d:a(n)<n?p:o(n)<n?_:i(n)<n?m:e(n)<n?r(n)<n?v:g:t(n)<n?y:w)(n)}function E(e,r,i,o){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(i-r)/e,s=n(function(t){return t[2]}).right(x,a);s===x.length?(o=b(r/Xd,i/Xd,e),e=t):s?(s=x[a/x[s-1][2]<x[s][2]/a?s-1:s],o=s[1],e=s[0]):(o=b(r,i,e),e=u)}return null==o?e:e.every(o)}return l.invert=function(t){return new Date(h(t))},l.domain=function(t){return arguments.length?f(ah.call(t,Zd)):f().map(Gd)},l.ticks=function(t,e){var n,r=f(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=(n=E(t,i,o,e))?n.range(i,o+1):[],a?n.reverse():n},l.tickFormat=function(t,e){return null==e?M:c(e)},l.nice=function(t,e){var n=f();return(t=E(t,n[0],n[n.length-1],e))?f(wh(n,t)):l},l.copy=function(){return vh(l,Kd(t,e,r,i,o,a,s,u,c))},l}var $d=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})},Qd=$d("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Jd=$d("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),tp=$d("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),ep=$d("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),np=Un(Ve(300,.5,0),Ve(-240,.5,1)),rp=Un(Ve(-100,.75,.35),Ve(80,1.5,.8)),ip=Un(Ve(260,.75,.35),Ve(80,1.5,.8)),op=Ve();function ap(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var sp=ap($d("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),up=ap($d("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),cp=ap($d("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),lp=ap($d("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),hp=function(t){return function(){return t}},fp=1e-12,dp=Math.PI,pp=dp/2,_p=2*dp;function mp(t){return t.innerRadius}function vp(t){return t.outerRadius}function gp(t){return t.startAngle}function yp(t){return t.endAngle}function bp(t){return t&&t.padAngle}function wp(t){return t>=1?pp:t<=-1?-pp:Math.asin(t)}function xp(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/Math.sqrt(s*s+u*u),l=c*u,h=-c*s,f=t+l,d=e+h,p=n+l,_=r+h,m=(f+p)/2,v=(d+_)/2,g=p-f,y=_-d,b=g*g+y*y,w=i-o,x=f*_-p*d,M=(y<0?-1:1)*Math.sqrt(Math.max(0,w*w*b-x*x)),E=(x*y-g*M)/b,S=(-x*g-y*M)/b,A=(x*y+g*M)/b,k=(-x*g+y*M)/b,T=E-m,O=S-v,C=A-m,R=k-v;return T*T+O*O>C*C+R*R&&(E=A,S=k),{cx:E,cy:S,x01:-l,y01:-h,x11:E*(i/w-1),y11:S*(i/w-1)}}function Mp(t){this._context=t}Mp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Ep=function(t){return new Mp(t)};function Sp(t){return t[0]}function Ap(t){return t[1]}var kp=function(){var t=Sp,e=Ap,n=hp(!0),r=null,i=Ep,o=null;function a(a){var s,u,c,l=a.length,h=!1;for(null==r&&(o=i(c=Li())),s=0;s<=l;++s)!(s<l&&n(u=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(u,s,a),+e(u,s,a));if(c)return o=null,c+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:hp(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:hp(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:hp(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a},Tp=function(){var t=Sp,e=null,n=hp(0),r=Ap,i=hp(!0),o=null,a=Ep,s=null;function u(u){var c,l,h,f,d,p=u.length,_=!1,m=new Array(p),v=new Array(p);for(null==o&&(s=a(d=Li())),c=0;c<=p;++c){if(!(c<p&&i(f=u[c],c,u))===_)if(_=!_)l=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=c-1;h>=l;--h)s.point(m[h],v[h]);s.lineEnd(),s.areaEnd()}_&&(m[c]=+t(f,c,u),v[c]=+n(f,c,u),s.point(e?+e(f,c,u):m[c],r?+r(f,c,u):v[c]))}if(d)return s=null,d+""||null}function c(){return kp().defined(i).curve(a).context(o)}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:hp(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:hp(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:hp(+t),u):e},u.y=function(t){return arguments.length?(n="function"==typeof t?t:hp(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"==typeof t?t:hp(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:hp(+t),u):r},u.lineX0=u.lineY0=function(){return c().x(t).y(n)},u.lineY1=function(){return c().x(t).y(r)},u.lineX1=function(){return c().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:hp(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u},Op=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Cp=function(t){return t},Rp=Np(Ep);function jp(t){this._curve=t}function Np(t){function e(e){return new jp(t(e))}return e._curve=t,e}function Pp(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Np(t)):e()._curve},t}jp.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Ip={draw:function(t,e){var n=Math.sqrt(e/dp);t.moveTo(n,0),t.arc(0,0,n,0,_p)}},Lp={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},zp=Math.sqrt(1/3),Up=2*zp,qp={draw:function(t,e){var n=Math.sqrt(e/Up),r=n*zp;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Dp=Math.sin(dp/10)/Math.sin(7*dp/10),Fp=Math.sin(_p/10)*Dp,Bp=-Math.cos(_p/10)*Dp,Hp={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=Fp*n,i=Bp*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=_p*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},Yp={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},Vp=Math.sqrt(3),Wp={draw:function(t,e){var n=-Math.sqrt(e/(3*Vp));t.moveTo(0,2*n),t.lineTo(-Vp*n,-n),t.lineTo(Vp*n,-n),t.closePath()}},Xp=-.5,Gp=Math.sqrt(3)/2,Zp=1/Math.sqrt(12),Kp=3*(Zp/2+1),$p={draw:function(t,e){var n=Math.sqrt(e/Kp),r=n/2,i=n*Zp,o=r,a=n*Zp+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(Xp*r-Gp*i,Gp*r+Xp*i),t.lineTo(Xp*o-Gp*a,Gp*o+Xp*a),t.lineTo(Xp*s-Gp*u,Gp*s+Xp*u),t.lineTo(Xp*r+Gp*i,Xp*i-Gp*r),t.lineTo(Xp*o+Gp*a,Xp*a-Gp*o),t.lineTo(Xp*s+Gp*u,Xp*u-Gp*s),t.closePath()}},Qp=[Ip,Lp,qp,Yp,Hp,Wp,$p],Jp=function(){};function t_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function e_(t){this._context=t}function n_(t){this._context=t}function r_(t){this._context=t}function i_(t,e){this._basis=new e_(t),this._beta=e}e_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:t_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:t_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},n_.prototype={areaStart:Jp,areaEnd:Jp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:t_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},r_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:t_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},i_.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var o_=function t(e){function n(t){return 1===e?new e_(t):new i_(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function a_(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function s_(t,e){this._context=t,this._k=(1-e)/6}s_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:a_(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:a_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var u_=function t(e){function n(t){return new s_(t,e)}return n.tension=function(e){return t(+e)},n}(0);function c_(t,e){this._context=t,this._k=(1-e)/6}c_.prototype={areaStart:Jp,areaEnd:Jp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:a_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var l_=function t(e){function n(t){return new c_(t,e)}return n.tension=function(e){return t(+e)},n}(0);function h_(t,e){this._context=t,this._k=(1-e)/6}h_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:a_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var f_=function t(e){function n(t){return new h_(t,e)}return n.tension=function(e){return t(+e)},n}(0);function d_(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>fp){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>fp){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function p_(t,e){this._context=t,this._alpha=e}p_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:d_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var __=function t(e){function n(t){return e?new p_(t,e):new s_(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function m_(t,e){this._context=t,this._alpha=e}m_.prototype={areaStart:Jp,areaEnd:Jp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:d_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var v_=function t(e){function n(t){return e?new m_(t,e):new c_(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function g_(t,e){this._context=t,this._alpha=e}g_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:d_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var y_=function t(e){function n(t){return e?new g_(t,e):new h_(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function b_(t){this._context=t}function w_(t){return t<0?-1:1}function x_(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(w_(o)+w_(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function M_(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function E_(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function S_(t){this._context=t}function A_(t){this._context=new k_(t)}function k_(t){this._context=t}function T_(t){this._context=t}function O_(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function C_(t,e){this._context=t,this._t=e}b_.prototype={areaStart:Jp,areaEnd:Jp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},S_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:E_(this,this._t0,M_(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,E_(this,M_(this,n=x_(this,t,e)),n);break;default:E_(this,this._t0,n=x_(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(A_.prototype=Object.create(S_.prototype)).point=function(t,e){S_.prototype.point.call(this,e,t)},k_.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},T_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=O_(t),i=O_(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},C_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var R_=Array.prototype.slice,j_=function(t,e){if((r=t.length)>1)for(var n,r,i=1,o=t[e[0]],a=o.length;i<r;++i){n=o,o=t[e[i]];for(var s=0;s<a;++s)o[s][1]+=o[s][0]=isNaN(n[s][1])?n[s][0]:n[s][1]}},N_=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function P_(t,e){return t[e]}var I_=function(t){var e=t.map(L_);return N_(t).sort(function(t,n){return e[t]-e[n]})};function L_(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var z_=function(t){return function(){return t}};function U_(t){return t[0]}function q_(t){return t[1]}function D_(){this._=null}function F_(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function B_(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function H_(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Y_(t){for(;t.L;)t=t.L;return t}function V_(t,e,n,r){var i=[null,null],o=dm.push(i)-1;return i.left=t,i.right=e,n&&X_(i,t,e,n),r&&X_(i,e,t,r),hm[t.index].halfedges.push(o),hm[e.index].halfedges.push(o),i}function W_(t,e,n){var r=[e,n];return r.left=t,r}function X_(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function G_(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],l=s[0],h=s[1],f=0,d=1,p=l-u,_=h-c;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<f)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>f&&(f=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>f&&(f=o)}else if(p>0){if(o<f)return;o<d&&(d=o)}if(o=n-c,_||!(o>0)){if(o/=_,_<0){if(o<f)return;o<d&&(d=o)}else if(_>0){if(o>d)return;o>f&&(f=o)}if(o=i-c,_||!(o<0)){if(o/=_,_<0){if(o>d)return;o>f&&(f=o)}else if(_>0){if(o<f)return;o<d&&(d=o)}return!(f>0||d<1)||(f>0&&(t[0]=[u+f*p,c+f*_]),d<1&&(t[1]=[u+d*p,c+d*_]),!0)}}}}}function Z_(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,l=t.right,h=c[0],f=c[1],d=l[0],p=l[1],_=(h+d)/2,m=(f+p)/2;if(p===f){if(_<e||_>=r)return;if(h>d){if(u){if(u[1]>=i)return}else u=[_,n];o=[_,i]}else{if(u){if(u[1]<n)return}else u=[_,i];o=[_,n]}}else if(s=m-(a=(h-d)/(p-f))*_,a<-1||a>1)if(h>d){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<p){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function K_(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function $_(t,e){return e[+(e.left!==t.site)]}function Q_(t,e){return e[+(e.left===t.site)]}D_.prototype={constructor:D_,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Y_(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(B_(this,n),n=(t=n).U),n.C=!1,r.C=!0,H_(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(H_(this,n),n=(t=n).U),n.C=!1,r.C=!0,B_(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Y_(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,B_(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,H_(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,B_(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,H_(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,B_(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,H_(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var J_,tm=[];function em(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,c=r[1]-s,l=o[0]-a,h=o[1]-s,f=2*(u*h-c*l);if(!(f>=-_m)){var d=u*u+c*c,p=l*l+h*h,_=(h*d-c*p)/f,m=(u*p-l*d)/f,v=tm.pop()||new function(){F_(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=i,v.x=_+a,v.y=(v.cy=m+s)+Math.sqrt(_*_+m*m),t.circle=v;for(var g=null,y=fm._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){g=y.P;break}y=y.L}else{if(!y.R){g=y;break}y=y.R}fm.insert(g,v),g||(J_=v)}}}}function nm(t){var e=t.circle;e&&(e.P||(J_=e.N),fm.remove(e),tm.push(e),F_(e),t.circle=null)}var rm=[];function im(t){var e=rm.pop()||new function(){F_(this),this.edge=this.site=this.circle=null};return e.site=t,e}function om(t){nm(t),lm.remove(t),rm.push(t),F_(t)}function am(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];om(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<pm&&Math.abs(r-u.circle.cy)<pm;)o=u.P,s.unshift(u),om(u),u=o;s.unshift(u),nm(u);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<pm&&Math.abs(r-c.circle.cy)<pm;)a=c.N,s.push(c),om(c),c=a;s.push(c),nm(c);var l,h=s.length;for(l=1;l<h;++l)c=s[l],u=s[l-1],X_(c.edge,u.site,c.site,i);u=s[0],(c=s[h-1]).edge=V_(u.site,c.site,null,i),em(u),em(c)}function sm(t){for(var e,n,r,i,o=t[0],a=t[1],s=lm._;s;)if((r=um(s,a)-o)>pm)s=s.L;else{if(!((i=o-cm(s,a))>pm)){r>-pm?(e=s.P,n=s):i>-pm?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){hm[t.index]={site:t,halfedges:[]}}(t);var u=im(t);if(lm.insert(e,u),e||n){if(e===n)return nm(e),n=im(e.site),lm.insert(u,n),u.edge=n.edge=V_(e.site,u.site),em(e),void em(n);if(n){nm(e),nm(n);var c=e.site,l=c[0],h=c[1],f=t[0]-l,d=t[1]-h,p=n.site,_=p[0]-l,m=p[1]-h,v=2*(f*m-d*_),g=f*f+d*d,y=_*_+m*m,b=[(m*g-d*y)/v+l,(f*y-_*g)/v+h];X_(n.edge,c,p,b),u.edge=V_(c,t,null,b),n.edge=V_(t,p,null,b),em(e),em(n)}else u.edge=V_(e.site,u.site)}}function um(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],c=u-e;if(!c)return s;var l=s-r,h=1/o-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+s)/2}function cm(t,e){var n=t.N;if(n)return um(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var lm,hm,fm,dm,pm=1e-6,_m=1e-12;function mm(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function vm(t,e){return e[1]-t[1]||e[0]-t[0]}function gm(t,e){var n,r,i,o=t.sort(vm).pop();for(dm=[],hm=new Array(t.length),lm=new D_,fm=new D_;;)if(i=J_,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(sm(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;am(i.arc)}if(function(){for(var t,e,n,r,i=0,o=hm.length;i<o;++i)if((t=hm[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=K_(t,dm[e[n]]);for(a.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=dm.length;o--;)Z_(i=dm[o],t,e,n,r)&&G_(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>pm||Math.abs(i[0][1]-i[1][1])>pm)||delete dm[o]}(a,s,u,c),function(t,e,n,r){var i,o,a,s,u,c,l,h,f,d,p,_,m=hm.length,v=!0;for(i=0;i<m;++i)if(o=hm[i]){for(a=o.site,u=o.halfedges,s=u.length;s--;)dm[u[s]]||u.splice(s,1);for(s=0,c=u.length;s<c;)d=Q_(o,dm[u[s]]),p=d[0],_=d[1],l=$_(o,dm[u[++s%c]]),h=l[0],f=l[1],(Math.abs(p-h)>pm||Math.abs(_-f)>pm)&&(u.splice(s,0,dm.push(W_(a,d,Math.abs(p-t)<pm&&r-_>pm?[t,Math.abs(h-t)<pm?f:r]:Math.abs(_-r)<pm&&n-p>pm?[Math.abs(f-r)<pm?h:n,r]:Math.abs(p-n)<pm&&_-e>pm?[n,Math.abs(h-n)<pm?f:e]:Math.abs(_-e)<pm&&p-t>pm?[Math.abs(f-e)<pm?h:t,e]:null))-1),++c);c&&(v=!1)}if(v){var g,y,b,w=1/0;for(i=0,v=null;i<m;++i)(o=hm[i])&&(a=o.site,g=a[0]-t,y=a[1]-e,(b=g*g+y*y)<w&&(w=b,v=o));if(v){var x=[t,e],M=[t,r],E=[n,r],S=[n,e];v.halfedges.push(dm.push(W_(a=v.site,x,M))-1,dm.push(W_(a,M,E))-1,dm.push(W_(a,E,S))-1,dm.push(W_(a,S,x))-1)}}for(i=0;i<m;++i)(o=hm[i])&&(o.halfedges.length||delete hm[i])}(a,s,u,c)}this.edges=dm,this.cells=hm,lm=fm=dm=hm=null}gm.prototype={constructor:gm,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return $_(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,u=-1,c=e[i[o-1]],l=c.left===s?c.right:c.left;++u<o;)a=l,c=e[i[u]],l=c.left===s?c.right:c.left,a&&l&&r<a.index&&r<l.index&&mm(s,a,l)<0&&t.push([s.data,a.data,l.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],h=u*u+c*c;h<l&&(l=h,a=s.index)}})}while(null!==a);return o._found=r,null==n||l<=n*n?i.site:null}};var ym=function(t){return function(){return t}};function bm(t,e,n){this.k=t,this.x=e,this.y=n}bm.prototype={constructor:bm,scale:function(t){return 1===t?this:new bm(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new bm(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wm=new bm(1,0,0);function xm(t){return t.__zoom||wm}function Mm(){t.event.stopImmediatePropagation()}xm.prototype=bm.prototype;var Em=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()};function Sm(){return!t.event.button}function Am(){var t,e,n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,t=n.width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function km(){return this.__zoom||wm}t.version="4.6.0",t.bisect=i,t.bisectRight=i,t.bisectLeft=o,t.ascending=e,t.bisector=n,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.deviation=u,t.extent=c,t.histogram=function(){var t=p,e=c,n=w;function r(r){var o,a,s=r.length,u=new Array(s);for(o=0;o<s;++o)u[o]=t(r[o],o,r);var c=e(u),l=c[0],h=c[1],f=n(u,l,h);Array.isArray(f)||(f=y(l,h,f));for(var d=f.length;f[0]<=l;)f.shift(),--d;for(;f[d-1]>=h;)f.pop(),--d;var p,_=new Array(d+1);for(o=0;o<=d;++o)(p=_[o]=[]).x0=o>0?f[o-1]:l,p.x1=o<d?f[o]:h;for(o=0;o<s;++o)a=u[o],l<=a&&a<=h&&_[i(f,a,0,d)].push(r[o]);return _}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:d(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:d([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?d(h.call(t)):d(t),r):n},r},t.thresholdFreedmanDiaconis=function(t,n,r){return t=f.call(t,a).sort(e),Math.ceil((r-n)/(2*(x(t,.75)-x(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*u(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=w,t.max=function(t,e){var n,r,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e(t[i],i,t))&&r>n&&(n=r)}return n},t.mean=function(t,e){var n,r=0,i=t.length,o=-1,s=i;if(null==e)for(;++o<i;)isNaN(n=a(t[o]))?--s:r+=n;else for(;++o<i;)isNaN(n=a(e(t[o],o,t)))?--s:r+=n;if(s)return r/s},t.median=function(t,n){var r,i=[],o=t.length,s=-1;if(null==n)for(;++s<o;)isNaN(r=a(t[s]))||i.push(r);else for(;++s<o;)isNaN(r=a(n(t[s],s,t)))||i.push(r);return x(i.sort(e),.5)},t.merge=M,t.min=E,t.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},t.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},t.quantile=x,t.range=_,t.scan=function(t,n){if(r=t.length){var r,i,o=0,a=0,s=t[a];for(n||(n=e);++o<r;)(n(i=t[o],s)<0||0!==n(s,s))&&(s=i,a=o);return 0===n(s,s)?a:void 0}},t.shuffle=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},t.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(null==e)for(;++o<i;)(n=+t[o])&&(r+=n);else for(;++o<i;)(n=+e(t[o],o,t))&&(r+=n);return r},t.ticks=y,t.tickStep=b,t.transpose=S,t.variance=s,t.zip=function(){return S(arguments)},t.axisTop=function(t){return z(O,t)},t.axisRight=function(t){return z(C,t)},t.axisBottom=function(t){return z(R,t)},t.axisLeft=function(t){return z(j,t)},t.brush=function(){return Mi(fi)},t.brushX=function(){return Mi(li)},t.brushY=function(){return Mi(hi)},t.brushSelection=function(t){var e=t.__brush;return e?e.dim.output(e.selection):null},t.chord=function(){var t=0,e=null,n=null,r=null;function i(i){var o,a,s,u,c,l,h=i.length,f=[],d=_(h),p=[],m=[],v=m.groups=new Array(h),g=new Array(h*h);for(o=0,c=-1;++c<h;){for(a=0,l=-1;++l<h;)a+=i[c][l];f.push(a),p.push(_(h)),o+=a}for(e&&d.sort(function(t,n){return e(f[t],f[n])}),n&&p.forEach(function(t,e){t.sort(function(t,r){return n(i[e][t],i[e][r])})}),o=Oi(0,Ti-t*h)/o,u=o?t:Ti/h,a=0,c=-1;++c<h;){for(s=a,l=-1;++l<h;){var y=d[c],b=p[y][l],w=i[y][b],x=a,M=a+=w*o;g[b*h+y]={index:y,subindex:b,startAngle:x,endAngle:M,value:w}}v[y]={index:y,startAngle:s,endAngle:a,value:f[y]},a+=u}for(c=-1;++c<h;)for(l=c-1;++l<h;){var E=g[l*h+c],S=g[c*h+l];(E.value||S.value)&&m.push(E.value<S.value?{source:S,target:E}:{source:E,target:S})}return r?m.sort(r):m}return i.padAngle=function(e){return arguments.length?(t=Oi(0,e),i):t},i.sortGroups=function(t){return arguments.length?(e=t,i):e},i.sortSubgroups=function(t){return arguments.length?(n=t,i):n},i.sortChords=function(t){return arguments.length?(null==t?r=null:(r=function(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}(t))._=t,i):r&&r._},i},t.ribbon=function(){var t=zi,e=Ui,n=qi,r=Di,i=Fi,o=null;function a(){var a,s=Ci.call(arguments),u=t.apply(this,s),c=e.apply(this,s),l=+n.apply(this,(s[0]=u,s)),h=r.apply(this,s)-ki,f=i.apply(this,s)-ki,d=l*Ei(h),p=l*Si(h),_=+n.apply(this,(s[0]=c,s)),m=r.apply(this,s)-ki,v=i.apply(this,s)-ki;if(o||(o=a=Li()),o.moveTo(d,p),o.arc(0,0,l,h,f),h===m&&f===v||(o.quadraticCurveTo(0,0,_*Ei(m),_*Si(m)),o.arc(0,0,_,m,v)),o.quadraticCurveTo(0,0,d,p),o.closePath(),a)return o=null,a+""||null}return a.radius=function(t){return arguments.length?(n="function"==typeof t?t:Ri(+t),a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Ri(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Ri(+t),a):i},a.source=function(e){return arguments.length?(t=e,a):t},a.target=function(t){return arguments.length?(e=t,a):e},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a},t.nest=function(){var t,e,n,r=[],i=[];function o(n,i,a,s){if(i>=r.length)return null!=e?e(n):null!=t?n.sort(t):n;for(var u,c,l,h=-1,f=n.length,d=r[i++],p=Hi(),_=a();++h<f;)(l=p.get(u=d(c=n[h])+""))?l.push(c):p.set(u,[c]);return p.each(function(t,e){s(_,e,o(t,i,a,s))}),_}return n={object:function(t){return o(t,0,Yi,Vi)},map:function(t){return o(t,0,Wi,Xi)},entries:function(t){return function t(n,o){if(++o>r.length)return n;var a,s=i[o-1];return null!=e&&o>=r.length?a=n.entries():(a=[],n.each(function(e,n){a.push({key:n,values:t(e,o)})})),null!=s?a.sort(function(t,e){return s(t.key,e.key)}):a}(o(t,0,Wi,Xi),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}},t.set=Ki,t.map=Hi,t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.color=ce,t.rgb=de,t.hsl=me,t.lab=Oe,t.hcl=Ie,t.cubehelix=Ve,t.dispatch=q,t.drag=function(){var e,n,r=Yt,i=Vt,o=Wt,a={},s=q("start","drag","end"),u=0;function c(t){t.on("mousedown.drag",l).on("touchstart.drag",d).on("touchmove.drag",p).on("touchend.drag touchcancel.drag",_).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){if(!n&&r.apply(this,arguments)){var o=m("mouse",i.apply(this,arguments),ct,this,arguments);o&&(Lt(t.event.view).on("mousemove.drag",h,!0).on("mouseup.drag",f,!0),Dt(t.event.view),Ut(),e=!1,o("start"))}}function h(){qt(),e=!0,a.mouse("drag")}function f(){Lt(t.event.view).on("mousemove.drag mouseup.drag",null),Ft(t.event.view,e),qt(),a.mouse("end")}function d(){if(r.apply(this,arguments)){var e,n,o=t.event.changedTouches,a=i.apply(this,arguments),s=o.length;for(e=0;e<s;++e)(n=m(o[e].identifier,a,zt,this,arguments))&&(Ut(),n("start"))}}function p(){var e,n,r=t.event.changedTouches,i=r.length;for(e=0;e<i;++e)(n=a[r[e].identifier])&&(qt(),n("drag"))}function _(){var e,r,i=t.event.changedTouches,o=i.length;for(n&&clearTimeout(n),n=setTimeout(function(){n=null},500),e=0;e<o;++e)(r=a[i[e].identifier])&&(Ut(),r("end"))}function m(e,n,r,i,l){var h,f,d,p=r(n,e),_=s.copy();if(at(new Ht(c,"beforestart",h,e,u,p[0],p[1],0,0,_),function(){return null!=(t.event.subject=h=o.apply(i,l))&&(f=h.x-p[0]||0,d=h.y-p[1]||0,!0)}))return function t(o){var s,m=p;switch(o){case"start":a[e]=t,s=u++;break;case"end":delete a[e],--u;case"drag":p=r(n,e),s=u}at(new Ht(c,o,h,e,s,p[0]+f,p[1]+d,p[0]-m[0],p[1]-m[1],_),_.apply,_,[o,i,l])}}return c.filter=function(t){return arguments.length?(r="function"==typeof t?t:Bt(!!t),c):r},c.container=function(t){return arguments.length?(i="function"==typeof t?t:Bt(t),c):i},c.subject=function(t){return arguments.length?(o="function"==typeof t?t:Bt(t),c):o},c.on=function(){var t=s.on.apply(s,arguments);return t===s?c:t},c},t.dragDisable=Dt,t.dragEnable=Ft,t.dsvFormat=Qi,t.csvParse=to,t.csvParseRows=eo,t.csvFormat=no,t.csvFormatRows=ro,t.tsvParse=oo,t.tsvParseRows=ao,t.tsvFormat=so,t.tsvFormatRows=uo,t.easeLinear=function(t){return+t},t.easeQuad=Sr,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=Sr,t.easeCubic=Ar,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=Ar,t.easePoly=Or,t.easePolyIn=kr,t.easePolyOut=Tr,t.easePolyInOut=Or,t.easeSin=jr,t.easeSinIn=function(t){return 1-Math.cos(t*Rr)},t.easeSinOut=function(t){return Math.sin(t*Rr)},t.easeSinInOut=jr,t.easeExp=Nr,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=Nr,t.easeCircle=Pr,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=Pr,t.easeBounce=Vr,t.easeBounceIn=function(t){return 1-Vr(1-t)},t.easeBounceOut=Vr,t.easeBounceInOut=function(t){return((t*=2)<=1?1-Vr(1-t):Vr(t-1)+1)/2},t.easeBack=Gr,t.easeBackIn=Wr,t.easeBackOut=Xr,t.easeBackInOut=Gr,t.easeElastic=$r,t.easeElasticIn=Kr,t.easeElasticOut=$r,t.easeElasticInOut=Qr,t.forceCenter=function(t,e){var n;function r(){var r,i,o=n.length,a=0,s=0;for(r=0;r<o;++r)i=n[r],a+=i.x,s+=i.y;for(a=a/o-t,s=s/o-e,r=0;r<o;++r)(i=n[r]).x-=a,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},t.forceCollide=function(t){var e,n,r=1,i=1;function o(){for(var t,o,s,u,c,l,h,f=e.length,d=0;d<i;++d)for(o=mo(e,bo,wo).visitAfter(a),t=0;t<f;++t)s=e[t],l=n[s.index],h=l*l,u=s.x+s.vx,c=s.y+s.vy,o.visit(p);function p(t,e,n,i,o){var a=t.data,f=t.r,d=l+f;if(!a)return e>u+d||i<u-d||n>c+d||o<c-d;if(a.index>s.index){var p=u-a.x-a.vx,_=c-a.y-a.vy,m=p*p+_*_;m<d*d&&(0===p&&(p=lo(),m+=p*p),0===_&&(_=lo(),m+=_*_),m=(d-(m=Math.sqrt(m)))/m*r,s.vx+=(p*=m)*(d=(f*=f)/(h+f)),s.vy+=(_*=m)*d,a.vx-=p*(d=1-d),a.vy-=_*d)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=co(null==t?1:+t)),o.initialize=function(t){e=t,s()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:co(+e),s(),o):t},o},t.forceLink=function(t){var e,n,r,i,o,a=xo,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=co(30),c=1;function l(r){for(var i=0,a=t.length;i<c;++i)for(var s,u,l,h,f,d,p,_=0;_<a;++_)s=t[_],u=s.source,l=s.target,h=l.x+l.vx-u.x-u.vx||lo(),f=l.y+l.vy-u.y-u.vy||lo(),d=((d=Math.sqrt(h*h+f*f))-n[_])/d*r*e[_],h*=d,f*=d,l.vx-=h*(p=o[_]),l.vy-=f*p,u.vx+=h*(p=1-p),u.vy+=f*p}function h(){if(r){var s,u,c=r.length,l=t.length,h=Hi(r,a);for(s=0,i=new Array(c);s<l;++s)(u=t[s]).index=s,"object"!=typeof u.source&&(u.source=Mo(h,u.source)),"object"!=typeof u.target&&(u.target=Mo(h,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,o=new Array(l);s<l;++s)u=t[s],o[s]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),f(),n=new Array(l),d()}}function f(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t){r=t,h()},l.links=function(e){return arguments.length?(t=e,h(),l):t},l.id=function(t){return arguments.length?(a=t,l):a},l.iterations=function(t){return arguments.length?(c=+t,l):c},l.strength=function(t){return arguments.length?(s="function"==typeof t?t:co(+t),f(),l):s},l.distance=function(t){return arguments.length?(u="function"==typeof t?t:co(+t),d(),l):u},l},t.forceManyBody=function(){var t,e,n,r,i=co(-30),o=1,a=1/0,s=.81;function u(r){var i,o=t.length,a=mo(t,Eo,So).visitAfter(l);for(n=r,i=0;i<o;++i)e=t[i],a.visit(h)}function c(){if(t){var e,n,o=t.length;for(r=new Array(o),e=0;e<o;++e)n=t[e],r[n.index]=+i(n,e,t)}}function l(t){var e,n,i,o,a,s=0;if(t.length){for(i=o=a=0;a<4;++a)(e=t[a])&&(n=e.value)&&(s+=n,i+=n*e.x,o+=n*e.y);t.x=i/s,t.y=o/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function h(t,i,u,c){if(!t.value)return!0;var l=t.x-e.x,h=t.y-e.y,f=c-i,d=l*l+h*h;if(f*f/s<d)return d<a&&(0===l&&(l=lo(),d+=l*l),0===h&&(h=lo(),d+=h*h),d<o&&(d=Math.sqrt(o*d)),e.vx+=l*t.value*n/d,e.vy+=h*t.value*n/d),!0;if(!(t.length||d>=a)){(t.data!==e||t.next)&&(0===l&&(l=lo(),d+=l*l),0===h&&(h=lo(),d+=h*h),d<o&&(d=Math.sqrt(o*d)));do{t.data!==e&&(f=r[t.data.index]*n/d,e.vx+=l*f,e.vy+=h*f)}while(t=t.next)}}return u.initialize=function(e){t=e,c()},u.strength=function(t){return arguments.length?(i="function"==typeof t?t:co(+t),c(),u):i},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u},t.forceSimulation=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=Hi(),u=$n(l),c=q("tick","end");function l(){h(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function h(){var e,r,u=t.length;for(n+=(o-n)*i,s.each(function(t){t(n)}),e=0;e<u;++e)null==(r=t[e]).fx?r.x+=r.vx*=a:(r.x=r.fx,r.vx=0),null==r.fy?r.y+=r.vy*=a:(r.y=r.fy,r.vy=0)}function f(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,isNaN(e.x)||isNaN(e.y)){var i=ko*Math.sqrt(n),o=n*To;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),f(),e={tick:h,restart:function(){return u.restart(l),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.each(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},force:function(t,n){return arguments.length>1?(null==n?s.remove(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}},t.forceX=function(t){var e,n,r,i=co(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=co(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:co(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:co(+e),a(),o):t},o},t.forceY=function(t){var e,n,r,i=co(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=co(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:co(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:co(+e),a(),o):t},o},t.formatDefaultLocale=Do,t.formatLocale=qo,t.formatSpecifier=Po,t.precisionFixed=Fo,t.precisionPrefix=Bo,t.precisionRound=Ho,t.geoArea=function(t){return za.reset(),Ia(t,Ua),2*za},t.geoBounds=function(t){var e,n,r,i,o,a,s;if(Ca=Oa=-(ka=Ta=1/0),Ka=[],Ia(t,Ja),n=Ka.length){for(Ka.sort(us),e=1,r=Ka[0],o=[r];e<n;++e)i=Ka[e],cs(r,i[0])||cs(r,i[1])?(ss(r[0],i[1])>ss(r[0],r[1])&&(r[1]=i[1]),ss(i[0],r[1])>ss(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,e=0,r=o[n];e<=n;r=i,++e)i=o[e],(s=ss(r[1],i[0]))>a&&(a=s,ka=i[0],Oa=r[1])}return Ka=$a=null,ka===1/0||Ta===1/0?[[NaN,NaN],[NaN,NaN]]:[[ka,Ta],[Oa,Ca]]},t.geoCentroid=function(t){ls=hs=fs=ds=ps=_s=ms=vs=gs=ys=bs=0,Ia(t,As);var e=gs,n=ys,r=bs,i=e*e+n*n+r*r;return i<1e-12&&(e=_s,n=ms,r=vs,hs<Go&&(e=fs,n=ds,r=ps),(i=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[ra(n,e)*Jo,pa(r/ha(i))*Jo]},t.geoCircle=function(){var t,e,n=zs([0,0]),r=zs(90),i=zs(6),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=Jo,n[1]*=Jo}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*ta,u=i.apply(this,arguments)*ta;return t=[],e=Ds(-a[0]*ta,-a[1]*ta,0).invert,Ys(o,s,u,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:zs([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:zs(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:zs(+t),a):i},a},t.geoClipExtent=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=tu(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}},t.geoDistance=function(t,e){return lu[0]=t,lu[1]=e,cu(hu)},t.geoGraticule=pu,t.geoGraticule10=function(){return pu()()},t.geoInterpolate=function(t,e){var n=t[0]*ta,r=t[1]*ta,i=e[0]*ta,o=e[1]*ta,a=ia(r),s=ca(r),u=ia(o),c=ca(o),l=a*ia(n),h=a*ca(n),f=u*ia(i),d=u*ca(i),p=2*pa(ha(_a(o-r)+a*u*_a(i-n))),_=ca(p),m=p?function(t){var e=ca(t*=p)/_,n=ca(p-t)/_,r=n*l+e*f,i=n*h+e*d,o=n*s+e*c;return[ra(i,r)*Jo,ra(o,ha(r*r+i*i))*Jo]}:function(){return[n*Jo,r*Jo]};return m.distance=p,m},t.geoLength=cu,t.geoPath=function(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),Ia(t,n(r))),r.result()}return o.area=function(t){return Ia(t,n(xu)),xu.result()},o.measure=function(t){return Ia(t,n(uc)),uc.result()},o.bounds=function(t){return Ia(t,n(Iu)),Iu.result()},o.centroid=function(t){return Ia(t,n(Vu)),Vu.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,yu):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new hc):new ec(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)},t.geoAlbers=jc,t.geoAlbersUsa=function(){var t,e,n,r,i,o,a=jc(),s=Rc().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Rc().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function l(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function h(){return t=e=null,l}return l.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},l.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([a.stream(e=n),s.stream(n),u.stream(n)])},l.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),h()):a.precision()},l.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),l.translate(a.translate())):a.scale()},l.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],l=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,l-.238*e],[o+.455*e,l+.238*e]]).stream(c),r=s.translate([o-.307*e,l+.201*e]).clipExtent([[o-.425*e+Go,l+.12*e+Go],[o-.214*e-Go,l+.234*e-Go]]).stream(c),i=u.translate([o-.205*e,l+.212*e]).clipExtent([[o-.214*e+Go,l+.166*e+Go],[o-.115*e-Go,l+.234*e-Go]]).stream(c),h()},l.fitExtent=function(t,e){return wc(l,t,e)},l.fitSize=function(t,e){return xc(l,t,e)},l.scale(1070)},t.geoAzimuthalEqualArea=function(){return kc(Ic).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=Ic,t.geoAzimuthalEquidistant=function(){return kc(Lc).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=Lc,t.geoConicConformal=function(){return Oc(Dc).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=Dc,t.geoConicEqualArea=Rc,t.geoConicEqualAreaRaw=Cc,t.geoConicEquidistant=function(){return Oc(Bc).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=Bc,t.geoEquirectangular=function(){return kc(Fc).scale(152.63)},t.geoEquirectangularRaw=Fc,t.geoGnomonic=function(){return kc(Hc).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=Hc,t.geoIdentity=function(){var t,e,n,r,i,o,a=1,s=0,u=0,c=1,l=1,h=yu,f=null,d=yu;function p(){return r=i=null,o}return o={stream:function(t){return r&&i===t?r:r=h(d(i=t))},clipExtent:function(r){return arguments.length?(d=null==r?(f=t=e=n=null,yu):tu(f=+r[0][0],t=+r[0][1],e=+r[1][0],n=+r[1][1]),p()):null==f?null:[[f,t],[e,n]]},scale:function(t){return arguments.length?(h=Yc((a=+t)*c,a*l,s,u),p()):a},translate:function(t){return arguments.length?(h=Yc(a*c,a*l,s=+t[0],u=+t[1]),p()):[s,u]},reflectX:function(t){return arguments.length?(h=Yc(a*(c=t?-1:1),a*l,s,u),p()):c<0},reflectY:function(t){return arguments.length?(h=Yc(a*c,a*(l=t?-1:1),s,u),p()):l<0},fitExtent:function(t,e){return wc(o,t,e)},fitSize:function(t,e){return xc(o,t,e)}}},t.geoProjection=kc,t.geoProjectionMutator=Tc,t.geoMercator=function(){return Uc(zc).scale(961/Qo)},t.geoMercatorRaw=zc,t.geoOrthographic=function(){return kc(Vc).scale(249.5).clipAngle(90+Go)},t.geoOrthographicRaw=Vc,t.geoStereographic=function(){return kc(Wc).scale(250).clipAngle(142)},t.geoStereographicRaw=Wc,t.geoTransverseMercator=function(){var t=Uc(Xc),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=Xc,t.geoRotation=function(t){function e(e){return(e=t(e[0]*ta,e[1]*ta))[0]*=Jo,e[1]*=Jo,e}return t=Ds(t[0]*ta,t[1]*ta,t.length>2?t[2]*ta:0),e.invert=function(e){return(e=t.invert(e[0]*ta,e[1]*ta))[0]*=Jo,e[1]*=Jo,e},e},t.geoStream=Ia,t.geoTransform=function(t){return{stream:yc(t)}},t.cluster=function(){var t=Gc,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter(function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Zc,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Kc,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)});var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=s.x-t(s,u)/2,l=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(l-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},t.hierarchy=Qc,t.pack=function(){var t=null,e=1,n=1,r=dl;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(ml(t)).eachAfter(vl(r,.5)).eachBefore(gl(1)):i.eachBefore(ml(_l)).eachAfter(vl(dl,1)).eachAfter(vl(r,i.r/Math.min(e,n))).eachBefore(gl(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=function(t){return null==t?null:fl(t)}(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:pl(+t),i):r},i},t.packSiblings=function(t){return hl(t),t},t.packEnclose=il,t.partition=function(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&bl(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(e,o)),r&&i.eachBefore(yl),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},t.stratify=function(){var t=El,e=Sl;function n(n){var r,i,o,a,s,u,c,l=n.length,h=new Array(l),f={};for(i=0;i<l;++i)r=n[i],s=h[i]=new nl(r),null!=(u=t(r,i,n))&&(u+="")&&(c=wl+(s.id=u),f[c]=c in f?Ml:s);for(i=0;i<l;++i)if(s=h[i],null!=(u=e(n[i],i,n))&&(u+="")){if(!(a=f[wl+u]))throw new Error("missing: "+u);if(a===Ml)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=xl,o.eachBefore(function(t){t.depth=t.parent.depth+1,--l}).eachBefore(el),o.parent=null,l>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=fl(e),n):t},n.parentId=function(t){return arguments.length?(e=fl(t),n):e},n},t.tree=function(){var t=Al,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,o,a=new Rl(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new Rl(r[i],i)),n.parent=e;return(a.parent=new Rl(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var c=i,l=i,h=i;i.eachBefore(function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>h.depth&&(h=t)});var f=c===l?1:t(c,l)/2,d=f-c.x,p=e/(l.x+f+d),_=n/(h.depth||1);i.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*_})}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,u=o.parent.children[0],c=o.m,l=a.m,h=s.m,f=u.m;s=Tl(s),o=kl(o),s&&o;)u=kl(u),(a=Tl(a)).a=e,(i=s.z+h-o.z-c+t(s._,o._))>0&&(Ol(Cl(s,e,r),e,i),c+=i,l+=i),h+=s.m,c+=o.m,f+=u.m,l+=a.m;s&&!Tl(a)&&(a.t=s,a.m+=h-l),o&&!kl(u)&&(u.t=o,u.m+=c-f,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},t.treemap=function(){var t=Il,e=!1,n=1,r=1,i=[0],o=dl,a=dl,s=dl,u=dl,c=dl;function l(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(h),i=[0],e&&t.eachBefore(yl),t}function h(e){var n=i[e.depth],r=e.x0+n,l=e.y0+n,h=e.x1-n,f=e.y1-n;h<r&&(r=h=(r+h)/2),f<l&&(l=f=(l+f)/2),e.x0=r,e.y0=l,e.x1=h,e.y1=f,e.children&&(n=i[e.depth+1]=o(e)/2,r+=c(e)-n,l+=a(e)-n,h-=s(e)-n,f-=u(e)-n,h<r&&(r=h=(r+h)/2),f<l&&(l=f=(l+f)/2),t(e,r,l,h,f))}return l.round=function(t){return arguments.length?(e=!!t,l):e},l.size=function(t){return arguments.length?(n=+t[0],r=+t[1],l):[n,r]},l.tile=function(e){return arguments.length?(t=fl(e),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:pl(+t),l):o},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:pl(+t),l):a},l.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:pl(+t),l):s},l.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:pl(+t),l):u},l.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:pl(+t),l):c},l},t.treemapBinary=function(t,e,n,r,i){var o,a,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=a=o=0;o<u;++o)c[o+1]=a+=s[o].value;!function t(e,n,r,i,o,a,u){if(e>=n-1){var l=s[e];return l.x0=i,l.y0=o,l.x1=a,void(l.y1=u)}for(var h=c[e],f=r/2+h,d=e+1,p=n-1;d<p;){var _=d+p>>>1;c[_]<f?d=_+1:p=_}var m=c[d]-h,v=r-m;if(u-o>a-i){var g=(o*v+u*m)/r;t(e,d,m,i,o,a,g),t(d,n,v,i,g,a,u)}else{var y=(i*v+a*m)/r;t(e,d,m,i,o,y,u),t(d,n,v,y,o,a,u)}}(0,u,t.value,e,n,r,i)},t.treemapDice=bl,t.treemapSlice=jl,t.treemapSliceDice=function(t,e,n,r,i){(1&t.depth?jl:bl)(t,e,n,r,i)},t.treemapSquarify=Il,t.treemapResquarify=Ll,t.interpolate=vn,t.interpolateArray=ln,t.interpolateBasis=Ge,t.interpolateBasisClosed=Ze,t.interpolateDate=hn,t.interpolateNumber=fn,t.interpolateObject=dn,t.interpolateRound=gn,t.interpolateString=mn,t.interpolateTransformCss=Mn,t.interpolateTransformSvg=En,t.interpolateZoom=kn,t.interpolateRgb=en,t.interpolateRgbBasis=un,t.interpolateRgbBasisClosed=cn,t.interpolateHsl=On,t.interpolateHslLong=Cn,t.interpolateLab=function(t,e){var n=tn((t=Oe(t)).l,(e=Oe(e)).l),r=tn(t.a,e.a),i=tn(t.b,e.b),o=tn(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}},t.interpolateHcl=jn,t.interpolateHclLong=Nn,t.interpolateCubehelix=zn,t.interpolateCubehelixLong=Un,t.quantize=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},t.path=Li,t.polygonArea=function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2},t.polygonCentroid=function(t){for(var e,n,r=-1,i=t.length,o=0,a=0,s=t[i-1],u=0;++r<i;)e=s,s=t[r],u+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o/(u*=3),a/u]},t.polygonHull=function(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(Ul),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var o=ql(r),a=ql(i),s=a[0]===o[0],u=a[a.length-1]===o[o.length-1],c=[];for(e=o.length-1;e>=0;--e)c.push(t[r[o[e]][2]]);for(e=+s;e<a.length-u;++e)c.push(t[r[a[e]][2]]);return c},t.polygonContains=function(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],s=e[1],u=o[0],c=o[1],l=!1,h=0;h<i;++h)o=t[h],n=o[0],(r=o[1])>s!=c>s&&a<(u-n)*(s-r)/(c-r)+n&&(l=!l),u=n,c=r;return l},t.polygonLength=function(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],s=o[1],u=0;++r<i;)e=a,n=s,o=t[r],a=o[0],s=o[1],e-=a,n-=s,u+=Math.sqrt(e*e+n*n);return u},t.quadtree=mo,t.queue=Xl,t.randomUniform=function(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return Math.random()*e+t}},t.randomNormal=Gl,t.randomLogNormal=function(){var t=Gl.apply(this,arguments);return function(){return Math.exp(t())}},t.randomBates=function(t){var e=Zl(t);return function(){return e()/t}},t.randomIrwinHall=Zl,t.randomExponential=function(t){return function(){return-Math.log(1-Math.random())/t}},t.request=Kl,t.html=Ql,t.json=Jl,t.text=th,t.xml=eh,t.csv=rh,t.tsv=ih,t.scaleBand=lh,t.scalePoint=function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(lh().paddingInner(1))},t.scaleIdentity=function t(){var e=[0,1];function n(t){return+t}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=ah.call(t,fh),n):e.slice()},n.copy=function(){return t().domain(e)},bh(n)},t.scaleLinear=function t(){var e=gh(ph,fn);return e.copy=function(){return vh(e,t())},bh(e)},t.scaleLog=function e(){var n=gh(xh,Mh).domain([1,10]),r=n.domain,i=10,o=Ah(10),a=Sh(10);function s(){return o=Ah(i),a=Sh(i),r()[0]<0&&(o=kh(o),a=kh(a)),n}return n.base=function(t){return arguments.length?(i=+t,s()):i},n.domain=function(t){return arguments.length?(r(t),s()):r()},n.ticks=function(t){var e,n=r(),s=n[0],u=n[n.length-1];(e=u<s)&&(f=s,s=u,u=f);var c,l,h,f=o(s),d=o(u),p=null==t?10:+t,_=[];if(!(i%1)&&d-f<p){if(f=Math.round(f)-1,d=Math.round(d)+1,s>0){for(;f<d;++f)for(l=1,c=a(f);l<i;++l)if(!((h=c*l)<s)){if(h>u)break;_.push(h)}}else for(;f<d;++f)for(l=i-1,c=a(f);l>=1;--l)if(!((h=c*l)<s)){if(h>u)break;_.push(h)}}else _=y(f,d,Math.min(d-f,p)).map(a);return e?_.reverse():_},n.tickFormat=function(e,r){if(null==r&&(r=10===i?".0e":","),"function"!=typeof r&&(r=t.format(r)),e===1/0)return r;null==e&&(e=10);var s=Math.max(1,i*e/n.ticks().length);return function(t){var e=t/a(Math.round(o(t)));return e*i<i-.5&&(e*=i),e<=s?r(t):""}},n.nice=function(){return r(wh(r(),{floor:function(t){return a(Math.floor(o(t)))},ceil:function(t){return a(Math.ceil(o(t)))}}))},n.copy=function(){return vh(n,e().base(i))},n},t.scaleOrdinal=ch,t.scaleImplicit=uh,t.scalePow=Oh,t.scaleSqrt=function(){return Oh().exponent(.5)},t.scaleQuantile=function t(){var n=[],r=[],o=[];function a(){var t=0,e=Math.max(1,r.length);for(o=new Array(e-1);++t<e;)o[t-1]=x(n,t/e);return s}function s(t){if(!isNaN(t=+t))return r[i(o,t)]}return s.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?o[e-1]:n[0],e<o.length?o[e]:n[n.length-1]]},s.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var r,i=0,o=t.length;i<o;++i)null==(r=t[i])||isNaN(r=+r)||n.push(r);return n.sort(e),a()},s.range=function(t){return arguments.length?(r=sh.call(t),a()):r.slice()},s.quantiles=function(){return o.slice()},s.copy=function(){return t().domain(n).range(r)},s},t.scaleQuantize=function t(){var e=0,n=1,r=1,o=[.5],a=[0,1];function s(t){if(t<=t)return a[i(o,t,0,r)]}function u(){var t=-1;for(o=new Array(r);++t<r;)o[t]=((t+1)*n-(t-r)*e)/(r+1);return s}return s.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],u()):[e,n]},s.range=function(t){return arguments.length?(r=(a=sh.call(t)).length-1,u()):a.slice()},s.invertExtent=function(t){var i=a.indexOf(t);return i<0?[NaN,NaN]:i<1?[e,o[0]]:i>=r?[o[r-1],n]:[o[i-1],o[i]]},s.copy=function(){return t().domain([e,n]).range(a)},bh(s)},t.scaleThreshold=function t(){var e=[.5],n=[0,1],r=1;function o(t){if(t<=t)return n[i(e,t,0,r)]}return o.domain=function(t){return arguments.length?(e=sh.call(t),r=Math.min(e.length,n.length-1),o):e.slice()},o.range=function(t){return arguments.length?(n=sh.call(t),r=Math.min(e.length,n.length-1),o):n.slice()},o.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},o.copy=function(){return t().domain(e).range(n)},o},t.scaleTime=function(){return Kd(cf,sf,Wh,Hh,Fh,qh,zh,Nh,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},t.scaleUtc=function(){return Kd(Pf,jf,gf,_f,df,hf,zh,Nh,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},t.schemeCategory10=Qd,t.schemeCategory20b=Jd,t.schemeCategory20c=tp,t.schemeCategory20=ep,t.interpolateCubehelixDefault=np,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return op.h=360*t-100,op.s=1.5-1.5*e,op.l=.8-.9*e,op+""},t.interpolateWarm=rp,t.interpolateCool=ip,t.interpolateViridis=sp,t.interpolateMagma=up,t.interpolateInferno=cp,t.interpolatePlasma=lp,t.scaleSequential=function t(e){var n=0,r=1,i=!1;function o(t){var o=(t-n)/(r-n);return e(i?Math.max(0,Math.min(1,o)):o)}return o.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],o):[n,r]},o.clamp=function(t){return arguments.length?(i=!!t,o):i},o.interpolator=function(t){return arguments.length?(e=t,o):e},o.copy=function(){return t(e).domain([n,r]).clamp(i)},bh(o)},t.creator=W,t.local=G,t.matcher=J,t.mouse=ct,t.namespace=V,t.namespaces=Y,t.select=Lt,t.selectAll=function(t){return"string"==typeof t?new Pt([document.querySelectorAll(t)],[document.documentElement]):new Pt([null==t?[]:t],Nt)},t.selection=It,t.selector=ht,t.selectorAll=dt,t.touch=zt,t.touches=function(t,e){null==e&&(e=st().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=ut(t,e[n]);return i},t.window=bt,t.customEvent=at,t.arc=function(){var t=mp,e=vp,n=hp(0),r=null,i=gp,o=yp,a=bp,s=null;function u(){var u,c,l=+t.apply(this,arguments),h=+e.apply(this,arguments),f=i.apply(this,arguments)-pp,d=o.apply(this,arguments)-pp,p=Math.abs(d-f),_=d>f;if(s||(s=u=Li()),h<l&&(c=h,h=l,l=c),h>fp)if(p>_p-fp)s.moveTo(h*Math.cos(f),h*Math.sin(f)),s.arc(0,0,h,f,d,!_),l>fp&&(s.moveTo(l*Math.cos(d),l*Math.sin(d)),s.arc(0,0,l,d,f,_));else{var m,v,g=f,y=d,b=f,w=d,x=p,M=p,E=a.apply(this,arguments)/2,S=E>fp&&(r?+r.apply(this,arguments):Math.sqrt(l*l+h*h)),A=Math.min(Math.abs(h-l)/2,+n.apply(this,arguments)),k=A,T=A;if(S>fp){var O=wp(S/l*Math.sin(E)),C=wp(S/h*Math.sin(E));(x-=2*O)>fp?(b+=O*=_?1:-1,w-=O):(x=0,b=w=(f+d)/2),(M-=2*C)>fp?(g+=C*=_?1:-1,y-=C):(M=0,g=y=(f+d)/2)}var R=h*Math.cos(g),j=h*Math.sin(g),N=l*Math.cos(w),P=l*Math.sin(w);if(A>fp){var I=h*Math.cos(y),L=h*Math.sin(y),z=l*Math.cos(b),U=l*Math.sin(b);if(p<dp){var q=x>fp?function(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,l=a-i,h=s-o,f=(l*(e-o)-h*(t-i))/(h*u-l*c);return[t+f*u,e+f*c]}(R,j,z,U,I,L,N,P):[N,P],D=R-q[0],F=j-q[1],B=I-q[0],H=L-q[1],Y=1/Math.sin(Math.acos((D*B+F*H)/(Math.sqrt(D*D+F*F)*Math.sqrt(B*B+H*H)))/2),V=Math.sqrt(q[0]*q[0]+q[1]*q[1]);k=Math.min(A,(l-V)/(Y-1)),T=Math.min(A,(h-V)/(Y+1))}}M>fp?T>fp?(m=xp(z,U,R,j,h,T,_),v=xp(I,L,N,P,h,T,_),s.moveTo(m.cx+m.x01,m.cy+m.y01),T<A?s.arc(m.cx,m.cy,T,Math.atan2(m.y01,m.x01),Math.atan2(v.y01,v.x01),!_):(s.arc(m.cx,m.cy,T,Math.atan2(m.y01,m.x01),Math.atan2(m.y11,m.x11),!_),s.arc(0,0,h,Math.atan2(m.cy+m.y11,m.cx+m.x11),Math.atan2(v.cy+v.y11,v.cx+v.x11),!_),s.arc(v.cx,v.cy,T,Math.atan2(v.y11,v.x11),Math.atan2(v.y01,v.x01),!_))):(s.moveTo(R,j),s.arc(0,0,h,g,y,!_)):s.moveTo(R,j),l>fp&&x>fp?k>fp?(m=xp(N,P,I,L,l,-k,_),v=xp(R,j,z,U,l,-k,_),s.lineTo(m.cx+m.x01,m.cy+m.y01),k<A?s.arc(m.cx,m.cy,k,Math.atan2(m.y01,m.x01),Math.atan2(v.y01,v.x01),!_):(s.arc(m.cx,m.cy,k,Math.atan2(m.y01,m.x01),Math.atan2(m.y11,m.x11),!_),s.arc(0,0,l,Math.atan2(m.cy+m.y11,m.cx+m.x11),Math.atan2(v.cy+v.y11,v.cx+v.x11),_),s.arc(v.cx,v.cy,k,Math.atan2(v.y11,v.x11),Math.atan2(v.y01,v.x01),!_))):s.arc(0,0,l,w,b,_):s.lineTo(N,P)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-dp/2;return[Math.cos(r)*n,Math.sin(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:hp(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:hp(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:hp(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:hp(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:hp(+t),u):i},u.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:hp(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:hp(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u},t.area=Tp,t.line=kp,t.pie=function(){var t=Cp,e=Op,n=null,r=hp(0),i=hp(_p),o=hp(0);function a(a){var s,u,c,l,h,f=a.length,d=0,p=new Array(f),_=new Array(f),m=+r.apply(this,arguments),v=Math.min(_p,Math.max(-_p,i.apply(this,arguments)-m)),g=Math.min(Math.abs(v)/f,o.apply(this,arguments)),y=g*(v<0?-1:1);for(s=0;s<f;++s)(h=_[p[s]=s]=+t(a[s],s,a))>0&&(d+=h);for(null!=e?p.sort(function(t,n){return e(_[t],_[n])}):null!=n&&p.sort(function(t,e){return n(a[t],a[e])}),s=0,c=d?(v-f*y)/d:0;s<f;++s,m=l)u=p[s],h=_[u],l=m+(h>0?h*c:0)+y,_[u]={data:a[u],index:s,value:h,startAngle:m,endAngle:l,padAngle:g};return _}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:hp(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:hp(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:hp(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:hp(+t),a):o},a},t.radialArea=function(){var t=Tp().curve(Rp),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Pp(n())},delete t.lineX0,t.lineEndAngle=function(){return Pp(r())},delete t.lineX1,t.lineInnerRadius=function(){return Pp(i())},delete t.lineY0,t.lineOuterRadius=function(){return Pp(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Np(t)):e()._curve},t},t.radialLine=function(){return Pp(kp().curve(Rp))},t.symbol=function(){var t=hp(Ip),e=hp(64),n=null;function r(){var r;if(n||(n=r=Li()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:hp(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:hp(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},t.symbols=Qp,t.symbolCircle=Ip,t.symbolCross=Lp,t.symbolDiamond=qp,t.symbolSquare=Yp,t.symbolStar=Hp,t.symbolTriangle=Wp,t.symbolWye=$p,t.curveBasisClosed=function(t){return new n_(t)},t.curveBasisOpen=function(t){return new r_(t)},t.curveBasis=function(t){return new e_(t)},t.curveBundle=o_,t.curveCardinalClosed=l_,t.curveCardinalOpen=f_,t.curveCardinal=u_,t.curveCatmullRomClosed=v_,t.curveCatmullRomOpen=y_,t.curveCatmullRom=__,t.curveLinearClosed=function(t){return new b_(t)},t.curveLinear=Ep,t.curveMonotoneX=function(t){return new S_(t)},t.curveMonotoneY=function(t){return new A_(t)},t.curveNatural=function(t){return new T_(t)},t.curveStep=function(t){return new C_(t,.5)},t.curveStepAfter=function(t){return new C_(t,1)},t.curveStepBefore=function(t){return new C_(t,0)},t.stack=function(){var t=hp([]),e=N_,n=j_,r=P_;function i(i){var o,a,s=t.apply(this,arguments),u=i.length,c=s.length,l=new Array(c);for(o=0;o<c;++o){for(var h,f=s[o],d=l[o]=new Array(u),p=0;p<u;++p)d[p]=h=[0,+r(i[p],f,p,i)],h.data=i[p];d.key=f}for(o=0,a=e(l);o<c;++o)l[a[o]].index=o;return n(l,a),l}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:hp(R_.call(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:hp(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?N_:"function"==typeof t?t:hp(R_.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?j_:t,i):n},i},t.stackOffsetExpand=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}j_(t,e)}},t.stackOffsetNone=j_,t.stackOffsetSilhouette=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}j_(t,e)}},t.stackOffsetWiggle=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,c=0;s<i;++s){for(var l=t[e[s]],h=l[a][1]||0,f=l[a-1][1]||0,d=(h-f)/2,p=0;p<s;++p){var _=t[e[p]],m=_[a][1]||0,v=_[a-1][1]||0;d+=m-v}u+=h,c+=d*h}n[a-1][1]+=n[a-1][0]=o,u&&(o-=c/u)}n[a-1][1]+=n[a-1][0]=o,j_(t,e)}},t.stackOrderAscending=I_,t.stackOrderDescending=function(t){return I_(t).reverse()},t.stackOrderInsideOut=function(t){var e,n,r=t.length,i=t.map(L_),o=N_(t).sort(function(t,e){return i[e]-i[t]}),a=0,s=0,u=[],c=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(u)},t.stackOrderNone=N_,t.stackOrderReverse=function(t){return N_(t).reverse()},t.timeInterval=jh,t.timeMillisecond=Nh,t.timeMilliseconds=Ph,t.utcMillisecond=Nh,t.utcMilliseconds=Ph,t.timeSecond=zh,t.timeSeconds=Uh,t.utcSecond=zh,t.utcSeconds=Uh,t.timeMinute=qh,t.timeMinutes=Dh,t.timeHour=Fh,t.timeHours=Bh,t.timeDay=Hh,t.timeDays=Yh,t.timeWeek=Wh,t.timeWeeks=Jh,t.timeSunday=Wh,t.timeSundays=Jh,t.timeMonday=Xh,t.timeMondays=tf,t.timeTuesday=Gh,t.timeTuesdays=ef,t.timeWednesday=Zh,t.timeWednesdays=nf,t.timeThursday=Kh,t.timeThursdays=rf,t.timeFriday=$h,t.timeFridays=of,t.timeSaturday=Qh,t.timeSaturdays=af,t.timeMonth=sf,t.timeMonths=uf,t.timeYear=cf,t.timeYears=lf,t.utcMinute=hf,t.utcMinutes=ff,t.utcHour=df,t.utcHours=pf,t.utcDay=_f,t.utcDays=mf,t.utcWeek=gf,t.utcWeeks=Sf,t.utcSunday=gf,t.utcSundays=Sf,t.utcMonday=yf,t.utcMondays=Af,t.utcTuesday=bf,t.utcTuesdays=kf,t.utcWednesday=wf,t.utcWednesdays=Tf,t.utcThursday=xf,t.utcThursdays=Of,t.utcFriday=Mf,t.utcFridays=Cf,t.utcSaturday=Ef,t.utcSaturdays=Rf,t.utcMonth=jf,t.utcMonths=Nf,t.utcYear=Pf,t.utcYears=If,t.timeFormatDefaultLocale=Ud,t.timeFormatLocale=qf,t.isoFormat=qd,t.isoParse=Dd,t.now=Gn,t.timer=$n,t.timerFlush=Qn,t.timeout=nr,t.interval=function(t,e,n){var r=new Kn,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?Gn():+n,r.restart(function o(a){a+=i,r.restart(o,i+=e,n),t(a)},e,n),r)},t.transition=xr,t.active=function(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>ar&&n.name===e)return new wr([[t]],ei,e,+r);return null},t.interrupt=mr,t.voronoi=function(){var t=U_,e=q_,n=null;function r(r){return new gm(r.map(function(n,i){var o=[Math.round(t(n,i,r)/pm)*pm,Math.round(e(n,i,r)/pm)*pm];return o.index=i,o.data=n,o}),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:z_(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:z_(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r},t.zoom=function(){var e,n,r=Sm,i=Am,o=0,a=1/0,s=-a,u=a,c=s,l=u,h=250,f=kn,d=[],p=q("start","zoom","end"),_=500,m=150;function v(t){t.on("wheel.zoom",S).on("mousedown.zoom",A).on("dblclick.zoom",k).on("touchstart.zoom",T).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",km)}function g(t,e){return(e=Math.max(o,Math.min(a,e)))===t.k?t:new bm(e,t.x,t.y)}function y(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new bm(t.k,r,i)}function b(t,e){var n=t.invertX(e[0][0])-s,r=t.invertX(e[1][0])-u,i=t.invertY(e[0][1])-c,o=t.invertY(e[1][1])-l;return t.translate(r>n?(n+r)/2:Math.min(0,n)||Math.max(0,r),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function w(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,e,n){t.on("start.zoom",function(){M(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).end()}).tween("zoom",function(){var t=arguments,r=M(this,t),o=i.apply(this,t),a=n||w(o),s=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),u=this.__zoom,c="function"==typeof e?e.apply(this,t):e,l=f(u.invert(a).concat(s/u.k),c.invert(a).concat(s/c.k));return function(t){if(1===t)t=c;else{var e=l(t),n=s/e[2];t=new bm(n,a[0]-e[0]*n,a[1]-e[1]*n)}r.zoom(null,t)}})}function M(t,e){for(var n,r=0,i=d.length;r<i;++r)if((n=d[r]).that===t)return n;return new E(t,e)}function E(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=i.apply(t,e)}function S(){if(r.apply(this,arguments)){var e=M(this,arguments),n=this.__zoom,i=Math.max(o,Math.min(a,n.k*Math.pow(2,-t.event.deltaY*(t.event.deltaMode?120:1)/500))),s=ct(this);if(e.wheel)e.mouse[0][0]===s[0]&&e.mouse[0][1]===s[1]||(e.mouse[1]=n.invert(e.mouse[0]=s)),clearTimeout(e.wheel);else{if(n.k===i)return;e.mouse=[s,n.invert(s)],mr(this),e.start()}Em(),e.wheel=setTimeout(function(){e.wheel=null,e.end()},m),e.zoom("mouse",b(y(g(n,i),e.mouse[0],e.mouse[1]),e.extent))}}function A(){if(!n&&r.apply(this,arguments)){var e=M(this,arguments),i=Lt(t.event.view).on("mousemove.zoom",function(){Em(),e.moved=!0,e.zoom("mouse",b(y(e.that.__zoom,e.mouse[0]=ct(e.that),e.mouse[1]),e.extent))},!0).on("mouseup.zoom",function(){i.on("mousemove.zoom mouseup.zoom",null),Ft(t.event.view,e.moved),Em(),e.end()},!0),o=ct(this);Dt(t.event.view),Mm(),e.mouse=[o,this.__zoom.invert(o)],mr(this),e.start()}}function k(){if(r.apply(this,arguments)){var e=this.__zoom,n=ct(this),o=e.invert(n),a=e.k*(t.event.shiftKey?.5:2),s=b(y(g(e,a),n,o),i.apply(this,arguments));Em(),h>0?Lt(this).transition().duration(h).call(x,s,n):Lt(this).call(v.transform,s)}}function T(){if(r.apply(this,arguments)){var n,i,o,a,s=M(this,arguments),u=t.event.changedTouches,c=u.length;for(Mm(),i=0;i<c;++i)o=u[i],a=[a=zt(this,u,o.identifier),this.__zoom.invert(a),o.identifier],s.touch0?s.touch1||(s.touch1=a):(s.touch0=a,n=!0);if(e&&(e=clearTimeout(e),!s.touch1))return s.end(),void((a=Lt(this).on("dblclick.zoom"))&&a.apply(this,arguments));n&&(e=setTimeout(function(){e=null},_),mr(this),s.start())}}function O(){var n,r,i,o,a=M(this,arguments),s=t.event.changedTouches,u=s.length;for(Em(),e&&(e=clearTimeout(e)),n=0;n<u;++n)r=s[n],i=zt(this,s,r.identifier),a.touch0&&a.touch0[2]===r.identifier?a.touch0[0]=i:a.touch1&&a.touch1[2]===r.identifier&&(a.touch1[0]=i);if(r=a.that.__zoom,a.touch1){var c=a.touch0[0],l=a.touch0[1],h=a.touch1[0],f=a.touch1[1],d=(d=h[0]-c[0])*d+(d=h[1]-c[1])*d,p=(p=f[0]-l[0])*p+(p=f[1]-l[1])*p;r=g(r,Math.sqrt(d/p)),i=[(c[0]+h[0])/2,(c[1]+h[1])/2],o=[(l[0]+f[0])/2,(l[1]+f[1])/2]}else{if(!a.touch0)return;i=a.touch0[0],o=a.touch0[1]}a.zoom("touch",b(y(r,i,o),a.extent))}function C(){var e,r,i=M(this,arguments),o=t.event.changedTouches,a=o.length;for(Mm(),n&&clearTimeout(n),n=setTimeout(function(){n=null},_),e=0;e<a;++e)r=o[e],i.touch0&&i.touch0[2]===r.identifier?delete i.touch0:i.touch1&&i.touch1[2]===r.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0||i.end()}return v.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",km),t!==n?x(t,e):n.interrupt().each(function(){M(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},v.scaleBy=function(t,e){v.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)})},v.scaleTo=function(t,e){v.transform(t,function(){var t=i.apply(this,arguments),n=this.__zoom,r=w(t),o=n.invert(r);return b(y(g(n,"function"==typeof e?e.apply(this,arguments):e),r,o),t)})},v.translateBy=function(t,e,n){v.transform(t,function(){return b(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments))})},E.prototype={start:function(){return 1==++this.active&&(this.index=d.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(d.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){at(new function(t,e,n){this.target=t,this.type=e,this.transform=n}(v,t,this.that.__zoom),p.apply,p,[t,this.that,this.args])}},v.filter=function(t){return arguments.length?(r="function"==typeof t?t:ym(!!t),v):r},v.extent=function(t){return arguments.length?(i="function"==typeof t?t:ym([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),v):i},v.scaleExtent=function(t){return arguments.length?(o=+t[0],a=+t[1],v):[o,a]},v.translateExtent=function(t){return arguments.length?(s=+t[0][0],u=+t[1][0],c=+t[0][1],l=+t[1][1],v):[[s,c],[u,l]]},v.duration=function(t){return arguments.length?(h=+t,v):h},v.interpolate=function(t){return arguments.length?(f=t,v):f},v.on=function(){var t=p.on.apply(p,arguments);return t===p?v:t},v},t.zoomTransform=xm,t.zoomIdentity=wm,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e){
/*!
* screenfull
* v3.3.2 - 2017-10-27
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=void 0!==t&&t.exports,r="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,i=function(){for(var t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,i=n.length,o={};r<i;r++)if((t=n[r])&&t[1]in e){for(r=0;r<t.length;r++)o[n[0][r]]=t[r];return o}return!1}(),o={change:i.fullscreenchange,error:i.fullscreenerror},a={request:function(t){var n=i.requestFullscreen;t=t||e.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?t[n]():t[n](r&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){e[i.exitFullscreen]()},toggle:function(t){this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,n){var r=o[t];r&&e.addEventListener(r,n,!1)},off:function(t,n){var r=o[t];r&&e.removeEventListener(r,n,!1)},raw:i};i?(Object.defineProperties(a,{isFullscreen:{get:function(){return Boolean(e[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[i.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(e[i.fullscreenEnabled])}}}),n?t.exports=a:window.screenfull=a):n?t.exports=!1:window.screenfull=!1}()},function(t,e,n){var r,i,o;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
!function(n,a){"object"==typeof e&&e&&"string"!=typeof e.nodeName?a(e):(i=[e],void 0===(o="function"==typeof(r=a)?r.apply(e,i):r)||(t.exports=o))}(0,function(t){var e=Object.prototype.toString,n=Array.isArray||function(t){return"[object Array]"===e.call(t)};function r(t){return"function"==typeof t}function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(t,e){return null!=t&&"object"==typeof t&&e in t}var a=RegExp.prototype.test;var s=/\S/;function u(t){return!function(t,e){return a.call(t,e)}(s,t)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var l=/\s*/,h=/\s+/,f=/\s*=/,d=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function _(t){this.string=t,this.tail=t,this.pos=0}function m(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function v(){this.cache={}}_.prototype.eos=function(){return""===this.tail},_.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},_.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},m.prototype.push=function(t){return new m(t,this)},m.prototype.lookup=function(t){var e,n=this.cache;if(n.hasOwnProperty(t))e=n[t];else{for(var i,a,s=this,u=!1;s;){if(t.indexOf(".")>0)for(e=s.view,i=t.split("."),a=0;null!=e&&a<i.length;)a===i.length-1&&(u=o(e,i[a])),e=e[i[a++]];else e=s.view[t],u=o(s.view,t);if(u)break;s=s.parent}n[t]=e}return r(e)&&(e=e.call(this.view)),e},v.prototype.clearCache=function(){this.cache={}},v.prototype.parse=function(e,r){var o=this.cache,a=e+":"+(r||t.tags).join(":"),s=o[a];return null==s&&(s=o[a]=function(e,r){if(!e)return[];var o,a,s,c=[],m=[],v=[],g=!1,y=!1;function b(){if(g&&!y)for(;v.length;)delete m[v.pop()];else v=[];g=!1,y=!1}function w(t){if("string"==typeof t&&(t=t.split(h,2)),!n(t)||2!==t.length)throw new Error("Invalid tags: "+t);o=new RegExp(i(t[0])+"\\s*"),a=new RegExp("\\s*"+i(t[1])),s=new RegExp("\\s*"+i("}"+t[1]))}w(r||t.tags);for(var x,M,E,S,A,k,T=new _(e);!T.eos();){if(x=T.pos,E=T.scanUntil(o))for(var O=0,C=E.length;O<C;++O)u(S=E.charAt(O))?v.push(m.length):y=!0,m.push(["text",S,x,x+1]),x+=1,"\n"===S&&b();if(!T.scan(o))break;if(g=!0,M=T.scan(p)||"name",T.scan(l),"="===M?(E=T.scanUntil(f),T.scan(f),T.scanUntil(a)):"{"===M?(E=T.scanUntil(s),T.scan(d),T.scanUntil(a),M="&"):E=T.scanUntil(a),!T.scan(a))throw new Error("Unclosed tag at "+T.pos);if(A=[M,E,x,T.pos],m.push(A),"#"===M||"^"===M)c.push(A);else if("/"===M){if(!(k=c.pop()))throw new Error('Unopened section "'+E+'" at '+x);if(k[1]!==E)throw new Error('Unclosed section "'+k[1]+'" at '+x)}else"name"===M||"{"===M||"&"===M?y=!0:"="===M&&w(E)}if(k=c.pop())throw new Error('Unclosed section "'+k[1]+'" at '+T.pos);return function(t){for(var e,n=[],r=n,i=[],o=0,a=t.length;o<a;++o)switch((e=t[o])[0]){case"#":case"^":r.push(e),i.push(e),r=e[4]=[];break;case"/":i.pop()[5]=e[2],r=i.length>0?i[i.length-1][4]:n;break;default:r.push(e)}return n}(function(t){for(var e,n,r=[],i=0,o=t.length;i<o;++i)(e=t[i])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(r.push(e),n=e));return r}(m))}(e,r)),s},v.prototype.render=function(t,e,n){var r=this.parse(t),i=e instanceof m?e:new m(e);return this.renderTokens(r,i,n,t)},v.prototype.renderTokens=function(t,e,n,r){for(var i,o,a,s="",u=0,c=t.length;u<c;++u)a=void 0,"#"===(o=(i=t[u])[0])?a=this.renderSection(i,e,n,r):"^"===o?a=this.renderInverted(i,e,n,r):">"===o?a=this.renderPartial(i,e,n,r):"&"===o?a=this.unescapedValue(i,e):"name"===o?a=this.escapedValue(i,e):"text"===o&&(a=this.rawValue(i)),void 0!==a&&(s+=a);return s},v.prototype.renderSection=function(t,e,i,o){var a=this,s="",u=e.lookup(t[1]);if(u){if(n(u))for(var c=0,l=u.length;c<l;++c)s+=this.renderTokens(t[4],e.push(u[c]),i,o);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)s+=this.renderTokens(t[4],e.push(u),i,o);else if(r(u)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(e.view,o.slice(t[3],t[5]),function(t){return a.render(t,e,i)}))&&(s+=u)}else s+=this.renderTokens(t[4],e,i,o);return s}},v.prototype.renderInverted=function(t,e,r,i){var o=e.lookup(t[1]);if(!o||n(o)&&0===o.length)return this.renderTokens(t[4],e,r,i)},v.prototype.renderPartial=function(t,e,n){if(n){var i=r(n)?n(t[1]):n[t[1]];return null!=i?this.renderTokens(this.parse(i),e,n,i):void 0}},v.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},v.prototype.escapedValue=function(e,n){var r=n.lookup(e[1]);if(null!=r)return t.escape(r)},v.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.3.1",t.tags=["{{","}}"];var g=new v;return t.clearCache=function(){return g.clearCache()},t.parse=function(t,e){return g.parse(t,e)},t.render=function(t,e,r){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+function(t){return n(t)?"array":typeof t}(t)+'" was given as the first argument for mustache#render(template, view, partials)');return g.render(t,e,r)},t.to_html=function(e,n,i,o){var a=t.render(e,n,i);if(!r(o))return a;o(a)},t.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return c[t]})},t.Scanner=_,t.Context=m,t.Writer=v,t})},function(t,e,n){var r=n(62);"string"==typeof r&&(r=[[t.i,r,""]]);var i={transform:void 0};n(64)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(63)(!1)).push([t.i,".ipyvolume-toolicon  {\n    text-align: center;\n    padding: 2px 2px; /* Some top and bottom padding */\n    color: #337ab7;\n    position: relative;\n    display: inline-block;\n}\n\n.fa-inactive {\n    opacity: 0.3;\n}\n.fa-disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n\n.ipyvolume-toolicon-inactive {\n    opacity: 0.3;\n}\n\n.ipyvolume-toolicon:hover .ipyvolume-toolicon-dropdown-container {\n\tdisplay: block;\n}\n.ipyvolume-toolicon-dropdown-container  {\n\tdisplay: none;\n\tposition: absolute;\n\tz-index: 10;\n\tmin-width: 200px;\n\tbackground-color: #999;\n\tbox-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n\tbackground-color: #f9f9f9;\n\tpadding-left: 2px;\n\n}\n.ipyvolume-toolicon-dropdown  {\n\ttext-align: left;\n\tdisplay: block;\n}\n",""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r={},i=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),o=function(t){var e={};return function(t){return void 0===e[t]&&(e[t]=function(t){return document.querySelector(t)}.call(this,t)),e[t]}}(),a=null,s=0,u=[],c=n(65);function l(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(m(i.parts[a],e))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(m(i.parts[a],e));r[i.id]={id:i.id,refs:1,parts:s}}}}function h(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function f(t,e){var n=o(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function d(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function p(t){var e=document.createElement("style");return t.attrs.type="text/css",_(e,t.attrs),f(t,e),e}function _(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function m(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var u=s++;n=a||(a=p(e)),r=g.bind(null,n,u,!1),i=g.bind(null,n,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",_(e,t.attrs),f(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=c(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),i=function(){d(n),n.href&&URL.revokeObjectURL(n.href)}):(n=p(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){d(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=i()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return l(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var a=n[o];(s=r[a.id]).refs--,i.push(s)}t&&l(h(t,e),e);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete r[s.id]}}}};var v=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function g(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=v(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e){t.exports=i,i.strict=o,i.loose=a;var n=Object.prototype.toString,r={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function i(t){return o(t)||a(t)}function o(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function a(t){return r[n.call(t)]}},function(t){t.exports={demo:{"background-color":"white",box:{color:"pink",visible:!0},axes:{z:{color:"#00f",ticklabel:{color:"#0f0"},label:{color:"#f00"}},ticklabel:{color:"black"},label:{color:"black"},x:{color:"#f00",ticklabel:{color:"#00f"},label:{color:"#0f0"}},y:{color:"#0f0",ticklabel:{color:"#f00"},label:{color:"#00f"}},color:"black",visible:!0}},dark:{"background-color":"black",box:{visible:!0},axes:{color:"white",ticklabel:{color:"white"},visible:!0,label:{color:"white"}}},light:{"background-color":"white",box:{visible:!0},axes:{color:"black",ticklabel:{color:"black"},visible:!0,label:{color:"black"}}}}},function(t,e,n){"use strict";t.exports=function(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return e}},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){t.exports=n(71)({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},function(t,e,n){"use strict";var r=n(72);t.exports=function(t){var e=new function(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1};e.pre=t.pre,e.body=t.body,e.post=t.post;var n=t.args.slice(0);e.argTypes=n;for(var i=0;i<n.length;++i){var o=n[i];if("array"===o||"object"==typeof o&&o.blockIndices){if(e.argTypes[i]="array",e.arrayArgs.push(i),e.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),e.shimArgs.push("array"+i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)e.scalarArgs.push(i),e.shimArgs.push("scalar"+i);else if("index"===o){if(e.indexArgs.push(i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(e.shapeArgs.push(i),i<e.pre.args.length&&e.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<e.post.args.length&&e.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+n[i]);e.argTypes[i]="offset",e.offsetArgs.push({array:o.array,offset:o.offset}),e.offsetArgIndex.push(i)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,r(e)}},function(t,e,n){"use strict";var r=n(73);t.exports=function(t){var e=["'use strict'","var CACHED={}"],n=[],i=t.funcName+"_cwise_thunk";e.push(["return function ",i,"(",t.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],u=[],c=[],l=0;l<t.arrayArgs.length;++l){var h=t.arrayArgs[l];n.push(["t",h,"=array",h,".dtype,","r",h,"=array",h,".order"].join("")),o.push("t"+h),o.push("r"+h),a.push("t"+h),a.push("r"+h+".join()"),s.push("array"+h+".data"),s.push("array"+h+".stride"),s.push("array"+h+".offset|0"),l>0&&(u.push("array"+t.arrayArgs[0]+".shape.length===array"+h+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[l]))),c.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+h+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[l])+"]"))}for(t.arrayArgs.length>1&&(e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}")),l=0;l<t.scalarArgs.length;++l)s.push("scalar"+t.scalarArgs[l]);return n.push(["type=[",a.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),e.push("var "+n.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(r.bind(void 0,t))}},function(t,e,n){"use strict";var r=n(74);function i(t,e,n){var r,i,o=t.length,a=e.arrayArgs.length,s=e.indexArgs.length>0,u=[],c=[],l=0,h=0;for(r=0;r<o;++r)c.push(["i",r,"=0"].join(""));for(i=0;i<a;++i)for(r=0;r<o;++r)h=l,l=t[r],0===r?c.push(["d",i,"s",r,"=t",i,"p",l].join("")):c.push(["d",i,"s",r,"=(t",i,"p",l,"-s",h,"*t",i,"p",h,")"].join(""));for(c.length>0&&u.push("var "+c.join(",")),r=o-1;r>=0;--r)l=t[r],u.push(["for(i",r,"=0;i",r,"<s",l,";++i",r,"){"].join(""));for(u.push(n),r=0;r<o;++r){for(h=l,l=t[r],i=0;i<a;++i)u.push(["p",i,"+=d",i,"s",r].join(""));s&&(r>0&&u.push(["index[",h,"]-=s",h].join("")),u.push(["++index[",l,"]"].join(""))),u.push("}")}return u.join("\n")}function o(t,e,n){for(var r=t.body,i=[],o=[],a=0;a<t.args.length;++a){var s=t.args[a];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),c="",l=e.arrayArgs.indexOf(a);switch(e.argTypes[a]){case"offset":var h=e.offsetArgIndex.indexOf(a);l=e.offsetArgs[h].array,c="+q"+h;case"array":c="p"+l+c;var f="l"+a,d="a"+l;if(0===e.arrayBlockIndices[l])1===s.count?"generic"===n[l]?s.lvalue?(i.push(["var ",f,"=",d,".get(",c,")"].join("")),r=r.replace(u,f),o.push([d,".set(",c,",",f,")"].join(""))):r=r.replace(u,[d,".get(",c,")"].join("")):r=r.replace(u,[d,"[",c,"]"].join("")):"generic"===n[l]?(i.push(["var ",f,"=",d,".get(",c,")"].join("")),r=r.replace(u,f),s.lvalue&&o.push([d,".set(",c,",",f,")"].join(""))):(i.push(["var ",f,"=",d,"[",c,"]"].join("")),r=r.replace(u,f),s.lvalue&&o.push([d,"[",c,"]=",f].join("")));else{for(var p=[s.name],_=[c],m=0;m<Math.abs(e.arrayBlockIndices[l]);m++)p.push("\\s*\\[([^\\]]+)\\]"),_.push("$"+(m+1)+"*t"+l+"b"+m);if(u=new RegExp(p.join(""),"g"),c=_.join("+"),"generic"===n[l])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(u,[d,"[",c,"]"].join(""))}break;case"scalar":r=r.replace(u,"Y"+e.scalarArgs.indexOf(a));break;case"index":r=r.replace(u,"index");break;case"shape":r=r.replace(u,"shape")}}}return[i.join("\n"),r,o.join("\n")].join("\n").trim()}t.exports=function(t,e){for(var n=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,a=new Array(t.arrayArgs.length),s=new Array(t.arrayArgs.length),u=0;u<t.arrayArgs.length;++u)s[u]=e[2*u],a[u]=e[2*u+1];var c=[],l=[],h=[],f=[],d=[];for(u=0;u<t.arrayArgs.length;++u){t.arrayBlockIndices[u]<0?(h.push(0),f.push(n),c.push(n),l.push(n+t.arrayBlockIndices[u])):(h.push(t.arrayBlockIndices[u]),f.push(t.arrayBlockIndices[u]+n),c.push(0),l.push(t.arrayBlockIndices[u]));for(var p=[],_=0;_<a[u].length;_++)h[u]<=a[u][_]&&a[u][_]<f[u]&&p.push(a[u][_]-h[u]);d.push(p)}var m=["SS"],v=["'use strict'"],g=[];for(_=0;_<n;++_)g.push(["s",_,"=SS[",_,"]"].join(""));for(u=0;u<t.arrayArgs.length;++u){for(m.push("a"+u),m.push("t"+u),m.push("p"+u),_=0;_<n;++_)g.push(["t",u,"p",_,"=t",u,"[",h[u]+_,"]"].join(""));for(_=0;_<Math.abs(t.arrayBlockIndices[u]);++_)g.push(["t",u,"b",_,"=t",u,"[",c[u]+_,"]"].join(""))}for(u=0;u<t.scalarArgs.length;++u)m.push("Y"+u);if(t.shapeArgs.length>0&&g.push("shape=SS.slice(0)"),t.indexArgs.length>0){var y=new Array(n);for(u=0;u<n;++u)y[u]="0";g.push(["index=[",y.join(","),"]"].join(""))}for(u=0;u<t.offsetArgs.length;++u){var b=t.offsetArgs[u],w=[];for(_=0;_<b.offset.length;++_)0!==b.offset[_]&&(1===b.offset[_]?w.push(["t",b.array,"p",_].join("")):w.push([b.offset[_],"*t",b.array,"p",_].join("")));0===w.length?g.push("q"+u+"=0"):g.push(["q",u,"=",w.join("+")].join(""))}var x=r([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));for((g=g.concat(x)).length>0&&v.push("var "+g.join(",")),u=0;u<t.arrayArgs.length;++u)v.push("p"+u+"|=0");t.pre.body.length>3&&v.push(o(t.pre,t,s));var M=o(t.body,t,s),E=function(t){for(var e=0,n=t[0].length;e<n;){for(var r=1;r<t.length;++r)if(t[r][e]!==t[0][e])return e;++e}return e}(d);E<n?v.push(function(t,e,n,r){for(var o=e.length,a=n.arrayArgs.length,s=n.blockSize,u=n.indexArgs.length>0,c=[],l=0;l<a;++l)c.push(["var offset",l,"=p",l].join(""));for(l=t;l<o;++l)c.push(["for(var j"+l+"=SS[",e[l],"]|0;j",l,">0;){"].join("")),c.push(["if(j",l,"<",s,"){"].join("")),c.push(["s",e[l],"=j",l].join("")),c.push(["j",l,"=0"].join("")),c.push(["}else{s",e[l],"=",s].join("")),c.push(["j",l,"-=",s,"}"].join("")),u&&c.push(["index[",e[l],"]=j",l].join(""));for(l=0;l<a;++l){for(var h=["offset"+l],f=t;f<o;++f)h.push(["j",f,"*t",l,"p",e[f]].join(""));c.push(["p",l,"=(",h.join("+"),")"].join(""))}for(c.push(i(e,n,r)),l=t;l<o;++l)c.push("}");return c.join("\n")}(E,d[0],t,M)):v.push(i(d[0],t,M)),t.post.body.length>3&&v.push(o(t.post,t,s)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+v.join("\n")+"\n----------");var S=[t.funcName||"unnamed","_cwise_loop_",a[0].join("s"),"m",E,function(t){for(var e=new Array(t.length),n=!0,r=0;r<t.length;++r){var i=t[r],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?e[r]="u"+i.charAt(1)+o:e[r]=i.charAt(0)+o,r>0&&(n=n&&e[r]===e[r-1])}return n?e[0]:e.join("")}(s)].join("");return new Function(["function ",S,"(",m.join(","),"){",v.join("\n"),"} return ",S].join(""))()}},function(t,e,n){"use strict";t.exports=function(t,e,n){return 0===t.length?t:e?(n||t.sort(e),function(t,e){for(var n=1,r=t.length,i=t[0],o=t[0],a=1;a<r;++a)if(o=i,e(i=t[a],o)){if(a===n){n++;continue}t[n++]=i}return t.length=n,t}(t,e)):(n||t.sort(),function(t){for(var e=1,n=t.length,r=t[0],i=t[0],o=1;o<n;++o,i=r)if(i=r,(r=t[o])!==i){if(o===e){e++;continue}t[e++]=r}return t.length=e,t}(t))}},function(t){t.exports={normals:[[.6722792983055115,.7387584447860718,.04771288111805916],[.7488530874252319,.6626735329627991,.009104926139116287],[.992845356464386,.1163879781961441,-.026680562645196915],[.988349199295044,.1501944661140442,-.0246476661413908],[.9485647082328796,-.2816155254840851,-.14462943375110626],[.925125002861023,-.375169962644577,-.058234188705682755],[.988349199295044,.1501944661140442,-.0246476661413908],[.992845356464386,.1163879781961441,-.026680562645196915],[.9870246648788452,-.13484345376491547,.08717460930347443],[.9485647082328796,-.2816155254840851,-.14462943375110626],[.992845356464386,.1163879781961441,-.026680562645196915],[.9768072366714478,.1450829803943634,.1574755609035492],[.9768072366714478,.1450829803943634,.1574755609035492],[.992845356464386,.1163879781961441,-.026680562645196915],[.7488530874252319,.6626735329627991,.009104926139116287],[.7618468403816223,.646384596824646,.04214463010430336],[.4218263030052185,.893310010433197,-.15511257946491241],[.35690364241600037,.9336850047111511,-.029189903289079666],[.2723502814769745,.9614163041114807,-.03878369182348251],[.2525371015071869,.9163177609443665,-.3107839524745941],[.9953411221504211,.09576618671417236,.011168275028467178],[.6457383632659912,.7610315084457397,.06207112967967987],[.6722792983055115,.7387584447860718,.04771288111805916],[.988349199295044,.1501944661140442,-.0246476661413908],[.9291253089904785,-.3697633743286133,-.0010595708154141903],[.9953411221504211,.09576618671417236,.011168275028467178],[.988349199295044,.1501944661140442,-.0246476661413908],[.925125002861023,-.375169962644577,-.058234188705682755],[-.007396361790597439,-.9999653697013855,.003803872736170888],[-.009718821384012699,-.9997833967208862,-.018406139686703682],[-.007655521389096975,-.9999698996543884,.001327343052253127],[.5234197378158569,.8474974632263184,-.08820322155952454],[.8727967739105225,.48596683144569397,-.04540829733014107],[.6919021606445312,.6509979963302612,-.3122063875198364],[.5376883745193481,.8232352137565613,-.18213941156864166],[.6919021606445312,.6509979963302612,-.3122063875198364],[.8727967739105225,.48596683144569397,-.04540829733014107],[.9940851926803589,.10859742015600204,.0011142655275762081],[.8643118143081665,.35945847630500793,-.35178789496421814],[-.003276081522926688,-.9999516010284424,.00927703082561493],[-.0032760819885879755,-.9999516606330872,.00927703082561493],[-.003276081522926688,-.9999516010284424,.009277029894292355],[-.003276081755757332,-.9999516606330872,.009277029894292355],[.5376883745193481,.8232352137565613,-.18213941156864166],[.6919021606445312,.6509979963302612,-.3122063875198364],[.37462636828422546,.6200053691864014,-.6893826723098755],[.41769927740097046,.4760781228542328,-.7738713026046753],[.6919021606445312,.6509979963302612,-.3122063875198364],[.8643118143081665,.35945847630500793,-.35178789496421814],[.34577468037605286,.5889291763305664,-.7304808497428894],[.37462636828422546,.6200053691864014,-.6893826723098755],[.9940851926803589,.10859742015600204,.0011142655275762081],[.994776725769043,-.10139967501163483,.011717659421265125],[.9535025358200073,.03478159382939339,-.29937097430229187],[.8643118143081665,.35945847630500793,-.35178789496421814],[.5455085635185242,-.8378602266311646,.020260393619537354],[.9291253089904785,-.3697633743286133,-.0010595708154141903],[.925125002861023,-.375169962644577,-.058234188705682755],[.5313248038291931,-.8438926935195923,-.07442483305931091],[.9477870464324951,-.3114435374736786,.06857644021511078],[.7406501770019531,-.43752405047416687,-.5099119544029236],[.9485647082328796,-.2816155254840851,-.14462943375110626],[.9870246648788452,-.13484345376491547,.08717460930347443],[.7618468403816223,.646384596824646,.04214463010430336],[.8426366448402405,.4910145699977875,.22106125950813293],[.9381476044654846,.19051600992679596,.28910666704177856],[.9768072366714478,.1450829803943634,.1574755609035492],[.7488530874252319,.6626735329627991,.009104926139116287],[.35690364241600037,.9336850047111511,-.029189903289079666],[.4218263030052185,.893310010433197,-.15511257946491241],[.7618468403816223,.646384596824646,.04214463010430336],[.3756128251552582,.9234598278999329,.0783376395702362],[.35690364241600037,.9336850047111511,-.029189903289079666],[.7488530874252319,.6626735329627991,.009104926139116287],[.6722792983055115,.7387584447860718,.04771288111805916],[.6457383632659912,.7610315084457397,.06207112967967987],[.38265588879585266,.9199751615524292,.08497147262096405],[.3756128251552582,.9234598278999329,.0783376395702362],[.6722792983055115,.7387584447860718,.04771288111805916],[.5150745511054993,.8528239727020264,-.08596205711364746],[.426266610622406,.8994579315185547,-.09629113972187042],[.5234197378158569,.8474974632263184,-.08820322155952454],[.5376883745193481,.8232352137565613,-.18213941156864166],[.7433125972747803,-.6685736179351807,.02226567082107067],[.7520958781242371,-.6584120392799377,.02907477132976055],[.28822171688079834,-.9561523795127869,.05196940153837204],[.29988452792167664,-.9533481597900391,.034590303897857666],[.8036648631095886,.5537902116775513,-.217805415391922],[.6157482266426086,.7863949537277222,-.049367424100637436],[.5150745511054993,.8528239727020264,-.08596205711364746],[.5376883745193481,.8232352137565613,-.18213941156864166],[.7460655570030212,-.6658671498298645,.0026501123793423176],[.7433125972747803,-.6685736179351807,.02226567082107067],[.29988452792167664,-.9533481597900391,.034590303897857666],[.31369441747665405,-.9492788314819336,.02157321386039257],[.9991246461868286,-.034952837973833084,-.022984294220805168],[.812343418598175,.5824594497680664,-.0289674773812294],[.7433125972747803,-.6685736179351807,.02226567082107067],[.7460655570030212,-.6658671498298645,.0026501123793423176],[.9962080717086792,-.0641126036643982,-.05881289765238762],[.9991246461868286,-.034952837973833084,-.022984294220805168],[.7460655570030212,-.6658671498298645,.0026501123793423176],[.7457423210144043,-.6656472086906433,-.027963895350694656],[.7457423210144043,-.6656472086906433,-.027963895350694656],[.7460655570030212,-.6658671498298645,.0026501123793423176],[.31369441747665405,-.9492788314819336,.02157321386039257],[.34119275212287903,-.9399923086166382,.0014598877169191837],[.996460497379303,-.06455107778310776,-.053849659860134125],[.9962080717086792,-.0641126036643982,-.05881289765238762],[.7457423210144043,-.6656472086906433,-.027963895350694656],[.7923128604888916,-.6072733998298645,-.05881620571017265],[.7923128604888916,-.6072733998298645,-.05881620571017265],[.7457423210144043,-.6656472086906433,-.027963895350694656],[.34119275212287903,-.9399923086166382,.0014598877169191837],[.3986782729625702,-.9157551527023315,-.04947711527347565],[.9978228807449341,-.05201764032244682,-.040543824434280396],[.996460497379303,-.06455107778310776,-.053849659860134125],[.7923128604888916,-.6072733998298645,-.05881620571017265],[.8045254349708557,-.5899364948272705,-.06865765154361725],[.8045254349708557,-.5899364948272705,-.06865765154361725],[.7923128604888916,-.6072733998298645,-.05881620571017265],[.3986782729625702,-.9157551527023315,-.04947711527347565],[.42811119556427,-.9006050229072571,-.07504191249608994],[.9999374747276306,-.010656150989234447,-.0033726822584867477],[.9999375343322754,-.010656150989234447,-.003372682724148035],[.9999374747276306,-.010656150057911873,-.0033726817928254604],[.9999375343322754,-.010656151920557022,-.0033726824913173914],[.4665221869945526,-.8773672580718994,-.1121765673160553],[.4665221571922302,-.8773673176765442,-.1121765673160553],[.4665221869945526,-.877367377281189,-.1121765673160553],[.4665221869945526,-.877367377281189,-.1121765673160553],[.998106837272644,.010563117451965809,-.060587748885154724],[.9981068968772888,.010563117451965809,-.060587748885154724],[.9981070160865784,.010563119314610958,-.06058775633573532],[.9981069564819336,.010563118383288383,-.06058775261044502],[.511317789554596,-.8463999629020691,-.14886613190174103],[.511317789554596,-.8464000821113586,-.14886613190174103],[.5113177299499512,-.8463999629020691,-.14886613190174103],[.511317789554596,-.8463999629020691,-.14886611700057983],[.7703723907470703,.364370197057724,-.5232215523719788],[.7184544801712036,.4904933571815491,-.4931929409503937],[.7226928472518921,-.0716477632522583,-.6874456405639648],[.7748353481292725,.075252965092659,-.6276678442955017],[.7748353481292725,.075252965092659,-.6276678442955017],[.7226928472518921,-.0716477632522583,-.6874456405639648],[.3967260420322418,-.543319821357727,-.739872932434082],[.36102649569511414,.7485342025756836,.5561981797218323],[.36102646589279175,.7485341429710388,.5561981201171875],[.43389180302619934,.48191967606544495,.7612432837486267],[.4282975196838379,.5146201848983765,.7427835464477539],[.3756128251552582,.9234598278999329,.0783376395702362],[.30924931168556213,.946604311466217,.09113304316997528],[.2723502814769745,.9614163041114807,-.03878369182348251],[.35690364241600037,.9336850047111511,-.029189903289079666],[.38265588879585266,.9199751615524292,.08497147262096405],[.32308486104011536,.9413825273513794,.09703188389539719],[.30924931168556213,.946604311466217,.09113304316997528],[.3756128251552582,.9234598278999329,.0783376395702362],[.5150745511054993,.8528239727020264,-.08596205711364746],[.4702720046043396,.8819447159767151,-.031901802867650986],[.4184861183166504,.9036914706230164,-.09061478823423386],[.426266610622406,.8994579315185547,-.09629113972187042],[.6157482266426086,.7863949537277222,-.049367424100637436],[.49254393577575684,.8694345355033875,.03852318972349167],[.4702720046043396,.8819447159767151,-.031901802867650986],[.5150745511054993,.8528239727020264,-.08596205711364746],[.4887421131134033,.8688849806785583,-.07854924350976944],[.4874696135520935,.8697015643119812,-.0774112120270729],[.5186543464660645,.8537455201148987,-.04600219428539276],[.812343418598175,.5824594497680664,-.0289674773812294],[.4989731013774872,.8658507466316223,-.03644828870892525],[.4985501170158386,.8660682439804077,-.0370621494948864],[.4874696135520935,.8697015643119812,-.0774112120270729],[.4887421131134033,.8688849806785583,-.07854924350976944],[.5233396887779236,.852124035358429,-.0002806649135891348],[.5233396887779236,.8521241545677185,-.00028066494269296527],[.4985501170158386,.8660682439804077,-.0370621494948864],[.4989731013774872,.8658507466316223,-.03644828870892525],[.5939923524856567,.8027538657188416,.05252972990274429],[.5939922332763672,.8027538061141968,.05252972990274429],[.593992292881012,.8027538061141968,.05252972990274429],[.593992292881012,.802753746509552,.05252972990274429],[.6263990998268127,.7756832242012024,.0770687535405159],[.6263991594314575,.7756832838058472,.0770687684416771],[.6263991594314575,.7756832242012024,.0770687684416771],[.6263991594314575,.7756832838058472,.0770687609910965],[.6624122858047485,.7462863922119141,.06531935185194016],[.6624122858047485,.7462863922119141,.06531934440135956],[.6624122858047485,.7462863922119141,.06531935185194016],[.6624122262001038,.7462863326072693,.06531935185194016],[.7703723907470703,.364370197057724,-.5232215523719788],[.5710009336471558,.715075671672821,-.40326735377311707],[.7184544801712036,.4904933571815491,-.4931929409503937],[.37462636828422546,.6200053691864014,-.6893826723098755],[.016368180513381958,.41040074825286865,-.911758303642273],[.07877559959888458,-.25413259863853455,-.9639558792114258],[.41769927740097046,.4760781228542328,-.7738713026046753],[.37462636828422546,.6200053691864014,-.6893826723098755],[.34577468037605286,.5889291763305664,-.7304808497428894],[.0019773005042225122,.5299733281135559,-.8480120301246643],[.016368180513381958,.41040074825286865,-.911758303642273],[.9417835474014282,-.049175508320331573,.3326040506362915],[.9091628789901733,-.16485607624053955,.38242053985595703],[.9477870464324951,-.3114435374736786,.06857644021511078],[.9870246648788452,-.13484345376491547,.08717460930347443],[.14885027706623077,-.9885218143463135,.0258492399007082],[.5455085635185242,-.8378602266311646,.020260393619537354],[.5313248038291931,-.8438926935195923,-.07442483305931091],[.1343700885772705,-.9893593192100525,-.05579141527414322],[.994776725769043,-.10139967501163483,.011717659421265125],[.9454845190048218,-.18804335594177246,.26589235663414],[.9277397990226746,-.26224467158317566,.2655685245990753],[.9816802144050598,-.18131236732006073,.05856389179825783],[.07883576303720474,-.9942485690116882,-.07248955965042114],[.07883576303720474,-.9942484498023987,-.07248955219984055],[.07883577048778534,-.9942485690116882,-.07248955965042114],[.9535025358200073,.03478159382939339,-.29937097430229187],[.994776725769043,-.10139967501163483,.011717659421265125],[.9816802144050598,-.18131236732006073,.05856389179825783],[.9511677026748657,-.04723962023854256,-.3050382733345032],[-.19625768065452576,-.11801380664110184,-.9734246730804443],[-.2926790714263916,-.3033236265182495,-.9068261384963989],[-.32536008954048157,-.23565585911273956,-.9157549738883972],[-.3316536545753479,-.3071261942386627,-.8920086622238159],[-.05927730351686478,.1270371675491333,-.9901250600814819],[-.05927730351686478,.1270371526479721,-.9901250600814819],[-.2926790714263916,-.3033236265182495,-.9068261384963989],[-.19625768065452576,-.11801380664110184,-.9734246730804443],[.5783531069755554,.037188682705163956,-.8149384260177612],[.5758730173110962,.09083724021911621,-.8124769330024719],[.5564614534378052,.26213952898979187,-.7884374260902405],[.5564614534378052,.26213952898979187,-.7884373664855957],[.6000460982322693,-.09697715193033218,-.794065535068512],[.5758730173110962,.09083724021911621,-.8124769330024719],[.5783531069755554,.037188682705163956,-.8149384260177612],[.6286618709564209,-.02641300857067108,-.7772300839424133],[.9816802144050598,-.18131236732006073,.05856389179825783],[.9277397990226746,-.26224467158317566,.2655685245990753],[.880256712436676,-.2203819453716278,.42021414637565613],[.9598467946052551,-.14224128425121307,.24178816378116608],[-.4995267689228058,-.6674507260322571,.5522522330284119],[-.4995267689228058,-.6674506664276123,.5522521734237671],[-.7392453551292419,-.5592052340507507,.37524107098579407],[-.8281887769699097,-.48730725049972534,.2768303155899048],[.9511677026748657,-.04723962023854256,-.3050382733345032],[.9816802144050598,-.18131236732006073,.05856389179825783],[.9598467946052551,-.14224128425121307,.24178816378116608],[.9868009686470032,.016181373968720436,-.16112716495990753],[-.3316536545753479,-.3071261942386627,-.8920086622238159],[-.32536008954048157,-.23565585911273956,-.9157549738883972],[-.21552973985671997,.056692883372306824,-.9748501777648926],[-.21570317447185516,.05686187371611595,-.9748018980026245],[.6000460982322693,-.09697715193033218,-.794065535068512],[.6286618709564209,-.02641300857067108,-.7772300839424133],[.7030335664749146,.08082249015569687,-.7065488696098328],[.6975869536399841,.09133404493331909,-.7106549739837646],[.9598467946052551,-.14224128425121307,.24178816378116608],[.880256712436676,-.2203819453716278,.42021414637565613],[.5838391780853271,.21363331377506256,.7832577228546143],[.9488987326622009,.10196034610271454,.29865553975105286],[-.46847423911094666,-.1571734994649887,.8693839311599731],[-.4684741497039795,-.15717348456382751,.8693838119506836],[-.8334598541259766,-.12069139629602432,.539238452911377],[-.8397976756095886,-.11944134533405304,.5295974612236023],[.9868009686470032,.016181373968720436,-.16112716495990753],[.9598467946052551,-.14224128425121307,.24178816378116608],[.9488987326622009,.10196034610271454,.29865553975105286],[.994851291179657,.025057118386030197,-.09819892793893814],[-.21570317447185516,.05686187371611595,-.9748018980026245],[-.21552973985671997,.056692883372306824,-.9748501777648926],[-.14557555317878723,-.182363361120224,-.9723946452140808],[-.1493588238954544,-.2086780071258545,-.9665119051933289],[.6975869536399841,.09133404493331909,-.7106549739837646],[.7030335664749146,.08082249015569687,-.7065488696098328],[.7033784985542297,-.1011778935790062,-.7035778760910034],[.7059258818626404,-.09110114723443985,-.7024023532867432],[.9488987326622009,.10196034610271454,.29865553975105286],[.5838391780853271,.21363331377506256,.7832577228546143],[.5448250770568848,.30212247371673584,.7822324633598328],[.8804023265838623,.20492564141750336,.4276648163795471],[-.47070038318634033,.29190725088119507,.8326050043106079],[-.4707004427909851,.29190728068351746,.8326051235198975],[-.8098574280738831,.1927443891763687,.5540580153465271],[-.7826141715049744,.20474077761173248,.5878743529319763],[.994851291179657,.025057118386030197,-.09819892793893814],[.9488987326622009,.10196034610271454,.29865553975105286],[.8804023265838623,.20492564141750336,.4276648163795471],[.991542637348175,.02448795922100544,-.12745055556297302],[-.9741464257240295,-.09507003426551819,-.20493975281715393],[-.9741464853286743,-.09507003426551819,-.20493975281715393],[-.9741464257240295,-.09507003426551819,-.20493975281715393],[-.9741464853286743,-.09507004171609879,-.20493976771831512],[-.1493588238954544,-.2086780071258545,-.9665119051933289],[-.14557555317878723,-.182363361120224,-.9723946452140808],[-.15870679914951324,-.27659744024276733,-.9477900862693787],[-.15870678424835205,-.27659744024276733,-.9477900266647339],[.7059258818626404,-.09110114723443985,-.7024023532867432],[.7033784985542297,-.1011778935790062,-.7035778760910034],[.6870550513267517,-.1595001220703125,-.7088828682899475],[.6870550513267517,-.1595001220703125,-.7088829874992371],[-.7594459652900696,-.5591992139816284,-.3324725925922394],[-.7612725496292114,-.5448256731033325,-.35160934925079346],[-.7639512419700623,-.4725126326084137,-.4394431710243225],[-.7639512419700623,-.4725125730037689,-.4394431710243225],[-.6542017459869385,-.7388257384300232,.1617303341627121],[-.7013145685195923,-.7126237154006958,.01804005168378353],[-.7612725496292114,-.5448256731033325,-.35160934925079346],[-.7594459652900696,-.5591992139816284,-.3324725925922394],[-.9570808410644531,-.2858492136001587,-.047818198800086975],[-.9580674171447754,-.2737380564212799,-.08470072597265244],[-.907597541809082,-.15491488575935364,-.3902152180671692],[-.9075976014137268,-.15491488575935364,-.3902152478694916],[-.8281887769699097,-.48730725049972534,.2768303155899048],[-.7392453551292419,-.5592052340507507,.37524107098579407],[-.9580674171447754,-.2737380564212799,-.08470072597265244],[-.9570808410644531,-.2858492136001587,-.047818198800086975],[-.8397976756095886,-.11944134533405304,.5295974612236023],[-.8334598541259766,-.12069139629602432,.539238452911377],[-.9977579712867737,-.06672408431768417,-.005191626958549023],[-.9967944622039795,-.06933978199958801,.03990751504898071],[-.9967944622039795,-.06933978199958801,.03990751504898071],[-.9977579712867737,-.06672408431768417,-.005191626958549023],[-.968826413154602,-.05067602917551994,-.2425018846988678],[-.968826413154602,-.05067602917551994,-.2425018846988678],[-.007080026902258396,-.9999517202377319,.0068261693231761456],[-.0070800259709358215,-.9999516606330872,.006826168857514858],[-.007396361790597439,-.9999653697013855,.003803872736170888],[-.007655521389096975,-.9999698996543884,.001327343052253127],[-.8098574280738831,.1927443891763687,.5540580153465271],[-.9692126512527466,.07919885963201523,.23313987255096436],[-.9692126512527466,.07919885963201523,.23313987255096436],[-.7826141715049744,.20474077761173248,.5878743529319763],[.9766407608985901,-.049606338143348694,.20907409489154816],[.9454845190048218,-.18804335594177246,.26589235663414],[.994776725769043,-.10139967501163483,.011717659421265125],[.9940851926803589,.10859742015600204,.0011142655275762081],[.8727967739105225,.48596683144569397,-.04540829733014107],[.8970381617546082,.4411088824272156,.027302822098135948],[.9766407608985901,-.049606338143348694,.20907409489154816],[.9940851926803589,.10859742015600204,.0011142655275762081],[.5234197378158569,.8474974632263184,-.08820322155952454],[.5382925271987915,.8391603231430054,-.07778876274824142],[.8970381617546082,.4411088824272156,.027302822098135948],[.8727967739105225,.48596683144569397,-.04540829733014107],[.426266610622406,.8994579315185547,-.09629113972187042],[.4193996787071228,.9029867649078369,-.09337382763624191],[.5382925271987915,.8391603231430054,-.07778876274824142],[.5234197378158569,.8474974632263184,-.08820322155952454],[.426266610622406,.8994579315185547,-.09629113972187042],[.4184861183166504,.9036914706230164,-.09061478823423386],[.397386759519577,.9139290452003479,-.08256830275058746],[.4193996787071228,.9029867649078369,-.09337382763624191],[-.4563031494617462,-.7228989601135254,.5188493132591248],[-.45630308985710144,-.7228989005088806,.51884925365448],[-.7013145685195923,-.7126237154006958,.01804005168378353],[-.6542017459869385,-.7388257384300232,.1617303341627121],[.812343418598175,.5824594497680664,-.0289674773812294],[.8409687876701355,.5410745739936829,-.003117515239864588],[.7520958781242371,-.6584120392799377,.02907477132976055],[.7433125972747803,-.6685736179351807,.02226567082107067],[.812343418598175,.5824594497680664,-.0289674773812294],[.5186543464660645,.8537455201148987,-.04600219428539276],[.5403411984443665,.8414300680160522,.005176173057407141],[.8409687876701355,.5410745739936829,-.003117515239864588],[.9381476044654846,.19051600992679596,.28910666704177856],[.9417835474014282,-.049175508320331573,.3326040506362915],[.9870246648788452,-.13484345376491547,.08717460930347443],[.9768072366714478,.1450829803943634,.1574755609035492],[.3048708438873291,-.3601263463497162,.8816817402839661],[.3048708438873291,-.3601263463497162,.8816817998886108],[.3048708736896515,-.3601263761520386,.8816817998886108],[.009669899009168148,-.9999527335166931,-.0009911151137202978],[.01335916668176651,-.9997296333312988,-.019029799848794937],[.008899079635739326,-.9999565482139587,.002775831613689661],[.008292901329696178,-.9999492168426514,.005737709812819958],[.009669899009168148,-.9999527335166931,-.0009911151137202978],[.008899079635739326,-.9999565482139587,.002775831613689661],[.008292900398373604,-.9999490976333618,.00573770934715867],[-.000327377172652632,-.9999869465827942,.005087403580546379],[-.0003273772308602929,-.9999870657920837,.005087404511868954],[-.00032737720175646245,-.999987006187439,.005087404046207666],[-.000327377172652632,-.9999869465827942,.005087404046207666],[.1814485490322113,.09529119729995728,-.9787726402282715],[.7972792387008667,.2637723684310913,-.5429269671440125],[.6811290383338928,.1718948930501938,-.7116989493370056],[.08690784126520157,.012723428197205067,-.9961351156234741],[.6811290383338928,.1718948930501938,-.7116989493370056],[.7972792387008667,.2637723684310913,-.5429269671440125],[.8920365571975708,.3482467830181122,-.2880887985229492],[.892036497592926,.3482467532157898,-.2880887985229492],[.05003644526004791,.7857836484909058,.6164740920066833],[-.5313484072685242,.7057963013648987,.4685301184654236],[-.5509044528007507,.7043324112892151,.447683185338974],[.2159183919429779,.5571125745773315,.8018757700920105],[-.5313484072685242,.7057963013648987,.4685301184654236],[-.8174833655357361,.5758097767829895,.012800747528672218],[-.5509044528007507,.7043324112892151,.447683185338974],[-.8916581869125366,.42880943417549133,-.145148366689682],[-.6992805600166321,.27376049757003784,-.6603497862815857],[-.5561168193817139,.14663560688495636,-.8180659413337708],[-.8941298723220825,.40962284803390503,-.18094424903392792],[-.6992805600166321,.27376049757003784,-.6603497862815857],[.1814485490322113,.09529119729995728,-.9787726402282715],[.08690784126520157,.012723428197205067,-.9961351156234741],[-.5561168193817139,.14663560688495636,-.8180659413337708],[.6097199320793152,.38178151845932007,.6946110129356384],[.2159183919429779,.5571125745773315,.8018757700920105],[.5276976823806763,-.13558554649353027,.8385413885116577],[.5276976823806763,-.13558554649353027,.8385413885116577],[.08690784126520157,.012723428197205067,-.9961351156234741],[.6811290383338928,.1718948930501938,-.7116989493370056],[.35492509603500366,-.03222038596868515,-.9343393445014954],[.06122444570064545,-.05399129539728165,-.9966627359390259],[.9835129380226135,-.17904329299926758,.025407595559954643],[.9835130572319031,-.17904330790042877,.025407597422599792],[.9835129976272583,-.17904330790042877,.025407597422599792],[.9835131168365479,-.17904330790042877,.02540759928524494],[-.5027428865432739,-.15944384038448334,.8496041893959045],[-.5027428269386292,-.15944382548332214,.8496041297912598],[-.5027428269386292,-.15944382548332214,.8496041893959045],[-.5027428865432739,-.15944384038448334,.8496041297912598],[-.9903079867362976,-.13654690980911255,-.02539708837866783],[-.9903079867362976,-.13654690980911255,-.02539708837866783],[-.9903078675270081,-.13654689490795135,-.025397086516022682],[-.9903079867362976,-.13654692471027374,-.02539709024131298],[-.9545094966888428,-.051332514733076096,-.293728768825531],[-.9545094966888428,-.051332518458366394,-.293728768825531],[-.9545095562934875,-.05133252218365669,-.293728768825531],[-.9545095562934875,-.05133252218365669,-.2937287986278534],[-.5561168193817139,.14663560688495636,-.8180659413337708],[.08690784126520157,.012723428197205067,-.9961351156234741],[.06122444570064545,-.05399129539728165,-.9966627359390259],[-.21681351959705353,-.06985045969486237,-.9737108945846558],[.5794637203216553,.6613138914108276,.47632521390914917],[.05003644526004791,.7857836484909058,.6164740920066833],[.2159183919429779,.5571125745773315,.8018757700920105],[.6097199320793152,.38178151845932007,.6946110129356384],[-.8372636437416077,.5378450155258179,.09855113178491592],[-.8916581869125366,.42880943417549133,-.145148366689682],[-.8941298723220825,.40962284803390503,-.18094424903392792],[.8823044300079346,-.05031672492623329,-.4679820239543915],[.8823044300079346,-.05031672865152359,-.4679820239543915],[.8823044300079346,-.05031673237681389,-.4679820239543915],[.8823044300079346,-.05031672120094299,-.4679819941520691],[.9080635905265808,.41698211431503296,.03932438790798187],[.5794637203216553,.6613138914108276,.47632521390914917],[.6097199320793152,.38178151845932007,.6946110129356384],[.4252643287181854,-.326079785823822,-.8442878723144531],[.41716256737709045,-.5338594913482666,-.7355061769485474],[.4247870147228241,-.3042740523815155,-.8526272177696228],[.7406501770019531,-.43752405047416687,-.5099119544029236],[.9477870464324951,-.3114435374736786,.06857644021511078],[.9551147222518921,-.2813762128353119,.09264519810676575],[.9193760752677917,-.18071384727954865,-.34941378235816956],[.17346534132957458,-.4330552816390991,.8845183849334717],[.09481082111597061,-.5233485102653503,.8468276262283325],[.27656683325767517,-.2505062520503998,.9277701377868652],[.26483190059661865,-.24258455634117126,.9332828521728516],[-.8077946901321411,-.550134539604187,.21170684695243835],[-.8316102027893066,-.4946551024913788,-.25246918201446533],[-.8786116242408752,-.32081088423728943,-.3537260591983795],[-.9311760663986206,-.36401504278182983,-.020105909556150436],[.4247870147228241,-.3042740523815155,-.8526272177696228],[.37875980138778687,-.09532086551189423,-.9205731153488159],[.38566529750823975,-.1070541962981224,-.9164069294929504],[.4252643287181854,-.326079785823822,-.8442878723144531],[.9551147222518921,-.2813762128353119,.09264519810676575],[.9803988933563232,-.06604071706533432,.18562422692775726],[.9505224823951721,-.025599543005228043,-.309599369764328],[.9193760752677917,-.18071384727954865,-.34941378235816956],[-.012466281652450562,-.10213904082775116,.9946919083595276],[.01848628744482994,-.11704268306493759,.9929547905921936],[-.191960871219635,-.013161209411919117,.9813143610954285],[-.19196085631847382,-.013161208480596542,.9813142418861389],[-.9780387878417969,-.11297819763422012,-.17514568567276],[-.8510448932647705,-.09574438631534576,-.5162901282310486],[-.8051036596298218,-.04565700888633728,-.5913742184638977],[-.9590003490447998,-.05345573276281357,-.2783178687095642],[.36195024847984314,-.00780502799898386,-.9321647882461548],[.37022340297698975,-.006347283720970154,-.9289209842681885],[.39872634410858154,-.001279944204725325,-.9170689582824707],[.39872637391090393,-.001279944321140647,-.9170690774917603],[.9600644707679749,.017666827887296677,-.2792203724384308],[.9999285340309143,-.008907451294362545,.007981736212968826],[.9705500602722168,.041453126817941666,-.2373063713312149],[.970550000667572,.04145312309265137,-.23730634152889252],[.3728489577770233,-.427837997674942,.8233699798583984],[.3866685628890991,-.2683693468570709,.8823068141937256],[.3863925039768219,-.27374768257141113,.8807740807533264],[.3896631896495819,-.14819471538066864,.9089559316635132],[.3863925039768219,-.27374768257141113,.8807740807533264],[.3866685628890991,-.2683693468570709,.8823068141937256],[.4050523042678833,.8312997221946716,-.3806225061416626],[.4218263030052185,.893310010433197,-.15511257946491241],[.2525371015071869,.9163177609443665,-.3107839524745941],[.2435235232114792,.8133171796798706,-.5284045338630676],[.766213059425354,-.4164203405380249,.48939943313598633],[.9551147222518921,-.2813762128353119,.09264519810676575],[.9477870464324951,-.3114435374736786,.06857644021511078],[.9091628789901733,-.16485607624053955,.38242053985595703],[.766213059425354,-.4164203405380249,.48939943313598633],[.8380744457244873,-.08995909243822098,.5380879640579224],[.9803988933563232,-.06604071706533432,.18562422692775726],[.9551147222518921,-.2813762128353119,.09264519810676575],[-.9798529148101807,-.11036249250173569,.16645821928977966],[-.9780387878417969,-.11297819763422012,-.17514568567276],[-.9590003490447998,-.05345573276281357,-.2783178687095642],[-.9920427203178406,-.05442262068390846,.11353173851966858],[-.6722142696380615,-.5465120673179626,.49945202469825745],[-.8077946901321411,-.550134539604187,.21170684695243835],[-.9311760663986206,-.36401504278182983,-.020105909556150436],[-.8176161050796509,-.39186012744903564,.4218408763408661],[-.5182480812072754,-.6767961978912354,.5228439569473267],[-.8077946901321411,-.550134539604187,.21170684695243835],[-.6722142696380615,-.5465120673179626,.49945202469825745],[-.002707137493416667,-.9999943375587463,-.0020069817546755075],[-9738043445395306e-20,-1,-8159968274412677e-20],[-.0024870464112609625,-.9999951720237732,-.0018446068279445171],[-.0030398331582546234,-.999992847442627,-.002252432284876704],[-.002707137493416667,-.9999943375587463,-.0020069817546755075],[-.0024870464112609625,-.9999951720237732,-.0018446068279445171],[-.0030398338567465544,-.9999929666519165,-.0022524327505379915],[.002526939148083329,-.999995231628418,-.001767946989275515],[9873355338640977e-21,-.9999999403953552,-8601942681707442e-20],[.002916933037340641,-.9999936819076538,-.0020285448990762234],[.002916933037340641,-.9999936819076538,-.0020285448990762234],[.003246558364480734,-.9999921917915344,-.002248803386464715],[.0032465581316500902,-.9999921917915344,-.0022488031536340714],[.002526939148083329,-.999995231628418,-.001767946989275515],[-.13146741688251495,.2366977334022522,-.9626476764678955],[.697407603263855,.42583221197128296,-.5764456391334534],[.7435843348503113,.27636152505874634,-.608856737613678],[-.005266580265015364,.020573601126670837,-.9997743964195251],[.7435843348503113,.27636152505874634,-.608856737613678],[.697407603263855,.42583221197128296,-.5764456391334534],[.8141242861747742,.5578469038009644,-.16127179563045502],[.8141242265701294,.5578469038009644,-.16127179563045502],[-.3610418736934662,.7736912369728088,.5206252932548523],[-.6349890232086182,.7232478260993958,.2714802026748657],[-.5544269680976868,.7512640357017517,.35806867480278015],[-.3610419034957886,.7736911177635193,.5206252336502075],[-.5544269680976868,.7512640357017517,.35806867480278015],[-.6349890232086182,.7232478260993958,.2714802026748657],[-.8289161920547485,.35599374771118164,-.4314700663089752],[-.7784214615821838,.2177102118730545,-.5887802839279175],[-.8289161920547485,.35599374771118164,-.4314700663089752],[-.13146741688251495,.2366977334022522,-.9626476764678955],[-.005266580265015364,.020573601126670837,-.9997743964195251],[-.7784214615821838,.2177102118730545,-.5887802839279175],[.5507657527923584,-.1490505039691925,.8212436437606812],[.5507657527923584,-.1490505188703537,.8212436437606812],[.5507656931877136,-.1490504890680313,.8212435245513916],[.5507657527923584,-.1490504890680313,.8212435841560364],[-.005266580265015364,.020573601126670837,-.9997743964195251],[.7435843348503113,.27636152505874634,-.608856737613678],[.5358596444129944,-.11738801002502441,-.8361066579818726],[-.02385599911212921,-.09995710104703903,-.9947056770324707],[.9810167551040649,-.06483679264783859,-.18276314437389374],[.9810166358947754,-.06483679264783859,-.18276314437389374],[.9810167551040649,-.06483680009841919,-.18276314437389374],[.9810166954994202,-.064836785197258,-.18276312947273254],[-.5430971384048462,-.20497308671474457,.8142674565315247],[-.543097198009491,-.20497307181358337,.8142675161361694],[-.5430971384048462,-.20497310161590576,.8142674565315247],[-.5430971384048462,-.20497310161590576,.8142675757408142],[-.976665198802948,.012919560074806213,-.2143784761428833],[-.976665198802948,.012919561006128788,-.21437852084636688],[-.976665198802948,.012919559143483639,-.2143784761428833],[-.9766652584075928,.012919561006128788,-.2143784910440445],[-.7784214615821838,.2177102118730545,-.5887802839279175],[-.005266580265015364,.020573601126670837,-.9997743964195251],[-.02385599911212921,-.09995710104703903,-.9947056770324707],[-.5808340907096863,-.0479637086391449,-.8126077055931091],[.9485647082328796,-.2816155254840851,-.14462943375110626],[.7406501770019531,-.43752405047416687,-.5099119544029236],[.2705770432949066,-.6124230623245239,-.7427825927734375],[.9803988933563232,-.06604071706533432,.18562422692775726],[.9999285340309143,-.008907451294362545,.007981736212968826],[.9600644707679749,.017666827887296677,-.2792203724384308],[.9505224823951721,-.025599543005228043,-.309599369764328],[.38566529750823975,-.1070541962981224,-.9164069294929504],[.37875980138778687,-.09532086551189423,-.9205731153488159],[.37022340297698975,-.006347283720970154,-.9289209842681885],[.36195024847984314,-.00780502799898386,-.9321647882461548],[-.9311760663986206,-.36401504278182983,-.020105909556150436],[-.8786116242408752,-.32081088423728943,-.3537260591983795],[-.8510448932647705,-.09574438631534576,-.5162901282310486],[-.9780387878417969,-.11297819763422012,-.17514568567276],[-.8176161050796509,-.39186012744903564,.4218408763408661],[-.9311760663986206,-.36401504278182983,-.020105909556150436],[-.9780387878417969,-.11297819763422012,-.17514568567276],[-.9798529148101807,-.11036249250173569,.16645821928977966],[.26483190059661865,-.24258455634117126,.9332828521728516],[.27656683325767517,-.2505062520503998,.9277701377868652],[.01848628744482994,-.11704268306493759,.9929547905921936],[-.012466281652450562,-.10213904082775116,.9946919083595276],[.9803988933563232,-.06604071706533432,.18562422692775726],[.8380744457244873,-.08995909243822098,.5380879640579224],[.7823804020881653,-.0719861164689064,.6186265349388123],[.9999285340309143,-.008907451294362545,.007981736212968826],[.06757760047912598,-.5010526180267334,.8627743124961853],[.07932622730731964,-.4095267057418823,.9088428020477295],[.07932621240615845,-.40952667593955994,.9088428020477295],[.07088138908147812,-.4764057397842407,.8763636946678162],[.17346534132957458,-.4330552816390991,.8845183849334717],[.06757760047912598,-.5010526180267334,.8627743124961853],[.07088138908147812,-.4764057397842407,.8763636946678162],[.09481082111597061,-.5233485102653503,.8468276262283325],[.3956208825111389,.7391512393951416,-.5451050400733948],[.3956208825111389,.7391512393951416,-.54510498046875],[.38196152448654175,.7307950258255005,-.56572425365448],[.388986736536026,.7351351380348206,-.5552167296409607],[.8651763796806335,.20427031815052032,.4579775333404541],[.9119406938552856,.39943942427635193,.09387387335300446],[.9397345781326294,.2088989019393921,-.2706661522388458],[.9552299380302429,.09224513918161392,.2811165153980255],[.13695234060287476,-.32076290249824524,.9372060298919678],[.13695234060287476,-.3207629323005676,.9372060894966125],[.13695234060287476,-.32076290249824524,.9372060894966125],[.13695229589939117,-.32076284289360046,.9372059106826782],[.7926474213600159,.10113353282213211,.6012336015701294],[.8651763796806335,.20427031815052032,.4579775333404541],[.9552299380302429,.09224513918161392,.2811165153980255],[.8267838954925537,.01610807329416275,.5622889995574951],[.388986736536026,.7351351380348206,-.5552167296409607],[.38196152448654175,.7307950258255005,-.56572425365448],[.3725777566432953,.7248623967170715,-.5794482827186584],[.3725777566432953,.7248624563217163,-.5794482827186584],[.9552299380302429,.09224513918161392,.2811165153980255],[.9397345781326294,.2088989019393921,-.2706661522388458],[.9984315037727356,.05574440956115723,-.005208582151681185],[.9962441325187683,-.08337707817554474,-.023362543433904648],[.2921980917453766,-.5222808122634888,.8011509776115417],[.292198121547699,-.5222808122634888,.8011510372161865],[.3535509705543518,-.748909592628479,.5604783296585083],[.3495377004146576,-.7314228415489197,.5855288505554199],[.8267838954925537,.01610807329416275,.5622889995574951],[.9552299380302429,.09224513918161392,.2811165153980255],[.9962441325187683,-.08337707817554474,-.023362543433904648],[.9066129922866821,-.3023506999015808,.2943413257598877],[.9962441325187683,-.08337707817554474,-.023362543433904648],[.9984315037727356,.05574440956115723,-.005208582151681185],[.9873501062393188,.009570947848260403,.15826503932476044],[.9682334661483765,-.19593490660190582,.15534937381744385],[.3495377004146576,-.7314228415489197,.5855288505554199],[.3535509705543518,-.748909592628479,.5604783296585083],[.3966310918331146,-.874226450920105,.28002092242240906],[.3966022729873657,-.8742861151695251,.2798754870891571],[.9066129922866821,-.3023506999015808,.2943413257598877],[.9962441325187683,-.08337707817554474,-.023362543433904648],[.9682334661483765,-.19593490660190582,.15534937381744385],[.923740804195404,-.35312986373901367,.14833100140094757],[.34378063678741455,.7168905138969421,.606533408164978],[.34378060698509216,.7168905138969421,.6065334677696228],[.3437805771827698,.7168905138969421,.606533408164978],[.34378066658973694,.7168905735015869,.6065335273742676],[.7423210144042969,.22705449163913727,.6304013133049011],[.6109460592269897,.4342992603778839,.6619130969047546],[.6109461188316345,.4342992901802063,.6619130969047546],[.770629346370697,.16736017167568207,.6149153709411621],[.3966022729873657,-.8742861151695251,.2798754870891571],[.3966310918331146,-.874226450920105,.28002092242240906],[.4231787323951721,-.7899394631385803,.4437515139579773],[.4231787621974945,-.7899393439292908,.4437515437602997],[.8336090445518494,-.014377200976014137,.5521677136421204],[.7423210144042969,.22705449163913727,.6304013133049011],[.770629346370697,.16736017167568207,.6149153709411621],[.8336091041564941,-.014377201907336712,.5521677732467651],[.45546984672546387,.1650240272283554,.8748223781585693],[.45546987652778625,.1650240421295166,.8748224377632141],[.4282975196838379,.5146201848983765,.7427835464477539],[.43389180302619934,.48191967606544495,.7612432837486267],[.10482406616210938,.9720267653465271,.21018041670322418],[.10482407361268997,.9720268249511719,.21018043160438538],[.10482407361268997,.9720267653465271,.21018043160438538],[.10482405126094818,.9720266461372375,.210180401802063],[.4050523042678833,.8312997221946716,-.3806225061416626],[.7011295557022095,.7121444940567017,.035601671785116196],[.7618468403816223,.646384596824646,.04214463010430336],[.4218263030052185,.893310010433197,-.15511257946491241],[.7128168344497681,.5547977089881897,-.42905882000923157],[.8051605820655823,.5251745581626892,-.2755143642425537],[.8051605224609375,.5251745581626892,-.2755143642425537],[.6335839629173279,.5647056102752686,-.5288468599319458],[.552563488483429,.5657110810279846,-.6120822429656982],[.7128168344497681,.5547977089881897,-.42905882000923157],[.6335839629173279,.5647056102752686,-.5288468599319458],[.5525634288787842,.5657110214233398,-.6120821833610535],[.48474282026290894,.756238579750061,.43946269154548645],[.4847428798675537,.7562386393547058,.4394627809524536],[.4847429096698761,.7562386989593506,.4394627511501312],[.48474279046058655,.756238579750061,.43946269154548645],[.27773410081863403,.743943989276886,.6077921390533447],[.27773404121398926,.7439438700675964,.6077920198440552],[.27773404121398926,.743943989276886,.6077920794487],[.968436062335968,-.17695017158985138,.17555688321590424],[.968436062335968,-.17695018649101257,.17555688321590424],[.9684360027313232,-.17695015668869019,.17555686831474304],[.9684361219406128,-.17695017158985138,.17555689811706543],[.10337559878826141,.23609063029289246,-.9662166833877563],[.10337559878826141,.23609063029289246,-.9662166833877563],[.1213289424777031,.28933531045913696,-.9495073556900024],[.12569350004196167,.3023165762424469,-.9448839426040649],[-.5987306237220764,.7815070748329163,.1754090040922165],[-.5987306237220764,.7815070152282715,.17540901899337769],[-.5916424989700317,.79185950756073,.1513853222131729],[-.5941922068595886,.7882744669914246,.15987159311771393],[-.03073604218661785,.06645089387893677,.9973161220550537],[-.030736036598682404,.06645088642835617,.9973161220550537],[-.0025426747743040323,.05963180214166641,.9982172250747681],[-.010676821693778038,.06160430610179901,.9980434775352478],[.9105457663536072,-.3529585599899292,.215236097574234],[.9105458855628967,-.3529585897922516,.2152361124753952],[.9105457663536072,-.3529585599899292,.2152361124753952],[.910545825958252,-.3529585897922516,.2152361422777176],[.12569350004196167,.3023165762424469,-.9448839426040649],[.1213289424777031,.28933531045913696,-.9495073556900024],[.21081222593784332,.5589836835861206,-.8019322752952576],[.21081221103668213,.5589836239814758,-.8019322156906128],[-.5941922068595886,.7882744669914246,.15987159311771393],[-.5916424989700317,.79185950756073,.1513853222131729],[-.5729642510414124,.8142195343971252,.0935879647731781],[-.5729641914367676,.8142194747924805,.0935879647731781],[-.010676821693778038,.06160430610179901,.9980434775352478],[-.0025426747743040323,.05963180214166641,.9982172250747681],[.12312792986631393,.028629768639802933,.9919777512550354],[.12312791496515274,.028629764914512634,.9919776320457458],[-.6724090576171875,.7385257482528687,.04945340007543564],[-.9888207912445068,.14657975733280182,-.027346821501851082],[-.9914775490760803,.12642793357372284,-.03143296018242836],[-.7527928948402405,.6582412719726562,.004626768175512552],[-.9602015614509583,-.24244357645511627,-.13868680596351624],[-.9914775490760803,.12642793357372284,-.03143296018242836],[-.9888207912445068,.14657975733280182,-.027346821501851082],[-.927798330783844,-.3665548264980316,-.06948138028383255],[-.9889450073242188,-.10021429508924484,.10929232835769653],[-.9776735305786133,.1435503214597702,.15345264971256256],[-.9914775490760803,.12642793357372284,-.03143296018242836],[-.9602015614509583,-.24244357645511627,-.13868680596351624],[-.9776735305786133,.1435503214597702,.15345264971256256],[-.7619723081588745,.6466788649559021,.03470776230096817],[-.7527928948402405,.6582412719726562,.004626768175512552],[-.9914775490760803,.12642793357372284,-.03143296018242836],[-.42595726251602173,.8905650973320007,-.15954336524009705],[-.2557784914970398,.9142258763313293,-.3142741918563843],[-.27628374099731445,.9602630138397217,-.039524421095848083],[-.3624524176120758,.931523859500885,-.029859352856874466],[-.9968475699424744,.07736142724752426,.017608797177672386],[-.9888207912445068,.14657975733280182,-.027346821501851082],[-.6724090576171875,.7385257482528687,.04945340007543564],[-.6531815528869629,.7541465759277344,.06794661283493042],[-.9304522275924683,-.3664124310016632,.0007129135774448514],[-.927798330783844,-.3665548264980316,-.06948138028383255],[-.9888207912445068,.14657975733280182,-.027346821501851082],[-.9968475699424744,.07736142724752426,.017608797177672386],[.005796223413199186,-.9999817609786987,.0016803601756691933],[.005813247058540583,-.9999827742576599,.0006093024858273566],[.005953340791165829,-.9999483823776245,-.008220691233873367],[-.522422730922699,.8478277921676636,-.09089833498001099],[-.5374892950057983,.8233551383018494,-.18218517303466797],[-.6925307512283325,.65254807472229,-.3075423836708069],[-.8752921223640442,.48130813241004944,-.04696930944919586],[-.6925307512283325,.65254807472229,-.3075423836708069],[-.8652673363685608,.35965806245803833,-.34922564029693604],[-.9942461252212524,.10711942613124847,-.0001879819465102628],[-.8752921223640442,.48130813241004944,-.04696930944919586],[.005804457701742649,-.9999387860298157,.009420884773135185],[.0058044558390975,-.9999386668205261,.009420882910490036],[.0058044567704200745,-.9999387264251709,.00942088384181261],[.0058044558390975,-.9999386668205261,.00942088384181261],[-.5374892950057983,.8233551383018494,-.18218517303466797],[-.42644965648651123,.44377845525741577,-.7881631851196289],[-.3751875162124634,.6258243918418884,-.6837967038154602],[-.6925307512283325,.65254807472229,-.3075423836708069],[-.6925307512283325,.65254807472229,-.3075423836708069],[-.3751875162124634,.6258243918418884,-.6837967038154602],[-.34529393911361694,.6041271686553955,-.718193769454956],[-.8652673363685608,.35965806245803833,-.34922564029693604],[-.9942461252212524,.10711942613124847,-.0001879819465102628],[-.8652673363685608,.35965806245803833,-.34922564029693604],[-.9524434804916382,.03328288346529007,-.30289217829704285],[-.9950538277626038,-.0990152582526207,.007980860769748688],[-.5452626347541809,-.8380714058876038,.01802668161690235],[-.5241155624389648,-.8468071222305298,-.09066712856292725],[-.927798330783844,-.3665548264980316,-.06948138028383255],[-.9304522275924683,-.3664124310016632,.0007129135774448514],[-.9473277926445007,-.29350194334983826,.12816645205020905],[-.9889450073242188,-.10021429508924484,.10929232835769653],[-.9602015614509583,-.24244357645511627,-.13868680596351624],[-.8023288249969482,-.39257118105888367,-.4496179223060608],[-.7619723081588745,.6466788649559021,.03470776230096817],[-.9776735305786133,.1435503214597702,.15345264971256256],[-.9415944814682007,.18800051510334015,.2793843746185303],[-.8426296710968018,.49594929814338684,.20978452265262604],[-.7527928948402405,.6582412719726562,.004626768175512552],[-.7619723081588745,.6466788649559021,.03470776230096817],[-.42595726251602173,.8905650973320007,-.15954336524009705],[-.3624524176120758,.931523859500885,-.029859352856874466],[-.37878361344337463,.9222328662872314,.077520452439785],[-.6724090576171875,.7385257482528687,.04945340007543564],[-.7527928948402405,.6582412719726562,.004626768175512552],[-.3624524176120758,.931523859500885,-.029859352856874466],[-.6531815528869629,.7541465759277344,.06794661283493042],[-.6724090576171875,.7385257482528687,.04945340007543564],[-.37878361344337463,.9222328662872314,.077520452439785],[-.38555166125297546,.9189807176589966,.08260949701070786],[-.5132337212562561,.853890597820282,-.08638280630111694],[-.5374892950057983,.8233551383018494,-.18218517303466797],[-.522422730922699,.8478277921676636,-.09089833498001099],[-.42569205164909363,.8998918533325195,-.09476727247238159],[-.7427892088890076,-.6691581606864929,.02216845005750656],[-.3007699251174927,-.9530642628669739,.03472787141799927],[-.28909388184547424,-.9559243321418762,.051316678524017334],[-.7525398135185242,-.6579435467720032,.028177954256534576],[-.7857488393783569,.5784883499145508,-.21897518634796143],[-.5374892950057983,.8233551383018494,-.18218517303466797],[-.5132337212562561,.853890597820282,-.08638280630111694],[-.613581657409668,.7878734469413757,-.052658841013908386],[-.7459130883216858,-.6660369038581848,.002902149921283126],[-.3141822814941406,-.9491105079650879,.02188180387020111],[-.3007699251174927,-.9530642628669739,.03472787141799927],[-.7427892088890076,-.6691581606864929,.02216845005750656],[-.9991235136985779,-.03501037135720253,-.022945178672671318],[-.7459130883216858,-.6660369038581848,.002902149921283126],[-.7427892088890076,-.6691581606864929,.02216845005750656],[-.8112958073616028,.5839515328407288,-.02827322669327259],[-.996208131313324,-.0641126036643982,-.058812860399484634],[-.7457423210144043,-.6656471490859985,-.02796381339430809],[-.7459130883216858,-.6660369038581848,.002902149921283126],[-.9991235136985779,-.03501037135720253,-.022945178672671318],[-.7457423210144043,-.6656471490859985,-.02796381339430809],[-.34119269251823425,-.9399923086166382,.00145998306106776],[-.3141822814941406,-.9491105079650879,.02188180387020111],[-.7459130883216858,-.6660369038581848,.002902149921283126],[-.9964603781700134,-.06455106288194656,-.05384964123368263],[-.7923129200935364,-.6072733402252197,-.05881613865494728],[-.7457423210144043,-.6656471490859985,-.02796381339430809],[-.996208131313324,-.0641126036643982,-.058812860399484634],[-.7923129200935364,-.6072733402252197,-.05881613865494728],[-.39867833256721497,-.9157551527023315,-.04947701096534729],[-.34119269251823425,-.9399923086166382,.00145998306106776],[-.7457423210144043,-.6656471490859985,-.02796381339430809],[-.9978228807449341,-.052017636597156525,-.04054385796189308],[-.8045254349708557,-.5899363160133362,-.06865759193897247],[-.7923129200935364,-.6072733402252197,-.05881613865494728],[-.9964603781700134,-.06455106288194656,-.05384964123368263],[-.8045254349708557,-.5899363160133362,-.06865759193897247],[-.4281114637851715,-.9006050229072571,-.07504181563854218],[-.39867833256721497,-.9157551527023315,-.04947701096534729],[-.7923129200935364,-.6072733402252197,-.05881613865494728],[-.9999374747276306,-.010656140744686127,-.0033726776018738747],[-.9999374747276306,-.010656139813363552,-.0033726776018738747],[-.9999374747276306,-.010656139813363552,-.0033726771362125874],[-.9999374747276306,-.010656141676008701,-.003372677369043231],[-.46652281284332275,-.8773670196533203,-.11217646300792694],[-.46652284264564514,-.8773669600486755,-.11217647045850754],[-.46652284264564514,-.8773670196533203,-.11217647045850754],[-.46652284264564514,-.8773670196533203,-.11217647790908813],[-.998106837272644,.010563105344772339,-.060587745159864426],[-.9981069564819336,.010563106276094913,-.06058775261044502],[-.9981070160865784,.010563107207417488,-.06058775261044502],[-.9981068968772888,.010563105344772339,-.060587745159864426],[-.511318027973175,-.8463997840881348,-.14886631071567535],[-.511318027973175,-.8463997840881348,-.14886629581451416],[-.5113179683685303,-.8463996648788452,-.14886628091335297],[-.5113181471824646,-.8463999032974243,-.14886634051799774],[-.7703719735145569,.36437028646469116,-.5232220888137817],[-.7748350501060486,.07525312900543213,-.6276682615280151],[-.7226925492286682,-.07164765894412994,-.6874459385871887],[-.7184540033340454,.49049338698387146,-.4931935667991638],[-.7748350501060486,.07525312900543213,-.6276682615280151],[-.3967260420322418,-.543319821357727,-.739872932434082],[-.7226925492286682,-.07164765894412994,-.6874459385871887],[-.3866487145423889,.7524677515029907,.5331932306289673],[-.4746325612068176,.5189173817634583,.7109490036964417],[-.4824405908584595,.4865904748439789,.7283408641815186],[-.3866487443447113,.7524677515029907,.5331932306289673],[-.37878361344337463,.9222328662872314,.077520452439785],[-.3624524176120758,.931523859500885,-.029859352856874466],[-.27628374099731445,.9602630138397217,-.039524421095848083],[-.3125985860824585,.9456348419189453,.08975975215435028],[-.38555166125297546,.9189807176589966,.08260949701070786],[-.37878361344337463,.9222328662872314,.077520452439785],[-.3125985860824585,.9456348419189453,.08975975215435028],[-.32564088702201843,.9408991932868958,.09309463202953339],[-.5132337212562561,.853890597820282,-.08638280630111694],[-.42569205164909363,.8998918533325195,-.09476727247238159],[-.4223349988460541,.9020577669143677,-.08902166038751602],[-.47521063685417175,.8792427778244019,-.03327258676290512],[-.613581657409668,.7878734469413757,-.052658841013908386],[-.5132337212562561,.853890597820282,-.08638280630111694],[-.47521063685417175,.8792427778244019,-.03327258676290512],[-.49966830015182495,.8654713034629822,.03592948615550995],[-.48874396085739136,.8688843250274658,-.07854470610618591],[-.8112958073616028,.5839515328407288,-.02827322669327259],[-.5200663208961487,.8529512286186218,-.044778332114219666],[-.48747149109840393,.8697009682655334,-.07740731537342072],[-.4989730417728424,.8658506870269775,-.0364481545984745],[-.48874396085739136,.8688843250274658,-.07854470610618591],[-.48747149109840393,.8697009682655334,-.07740731537342072],[-.4985499382019043,.8660683035850525,-.037062011659145355],[-.5233396291732788,.8521240949630737,-.0002806649135891348],[-.4989730417728424,.8658506870269775,-.0364481545984745],[-.4985499382019043,.8660683035850525,-.037062011659145355],[-.5233396887779236,.8521241545677185,-.00028066494269296527],[-.593992292881012,.8027538061141968,.052529819309711456],[-.5939923524856567,.8027538061141968,.052529823035001755],[-.5939923524856567,.8027538657188416,.052529823035001755],[-.5939922332763672,.8027538061141968,.052529819309711456],[-.6263992786407471,.7756830453872681,.07706866413354874],[-.6263992786407471,.7756831049919128,.07706867158412933],[-.6263992786407471,.7756831645965576,.07706866413354874],[-.6263993382453918,.7756831049919128,.07706866413354874],[-.6624122858047485,.7462863922119141,.06531944870948792],[-.6624122262001038,.7462863326072693,.06531944870948792],[-.6624122262001038,.7462863326072693,.06531943380832672],[-.6624122858047485,.7462863922119141,.06531944870948792],[-.7703719735145569,.36437028646469116,-.5232220888137817],[-.7184540033340454,.49049338698387146,-.4931935667991638],[-.5710006952285767,.7150753736495972,-.40326809883117676],[-.3751875162124634,.6258243918418884,-.6837967038154602],[-.42644965648651123,.44377845525741577,-.7881631851196289],[-.08843350410461426,-.2680386006832123,-.9593408107757568],[-.01909593679010868,.41793292760849,-.908277153968811],[-.3751875162124634,.6258243918418884,-.6837967038154602],[-.01909593679010868,.41793292760849,-.908277153968811],[-.0025348279159516096,.5433701276779175,-.8394894003868103],[-.34529393911361694,.6041271686553955,-.718193769454956],[-.9440922141075134,-.05124950408935547,.3256736099720001],[-.9889450073242188,-.10021429508924484,.10929232835769653],[-.9473277926445007,-.29350194334983826,.12816645205020905],[-.9089924097061157,-.16209730505943298,.3840016722679138],[-.14601776003837585,-.9890109300613403,.023154597729444504],[-.1164323017001152,-.9908350110054016,-.06847979128360748],[-.5241155624389648,-.8468071222305298,-.09066712856292725],[-.5452626347541809,-.8380714058876038,.01802668161690235],[-.9950538277626038,-.0990152582526207,.007980860769748688],[-.9836636781692505,-.17351125180721283,.04795341566205025],[-.9323112368583679,-.2517188787460327,.25967937707901],[-.9480769634246826,-.18246516585350037,.2604924142360687],[-.07733840495347977,-.994351327419281,-.07269264757633209],[-.07733839005231857,-.9943512678146362,-.0726926326751709],[-.07733841240406036,-.994351327419281,-.07269264757633209],[-.9524434804916382,.03328288346529007,-.30289217829704285],[-.9473239183425903,-.03956227004528046,-.3178243041038513],[-.9836636781692505,-.17351125180721283,.04795341566205025],[-.9950538277626038,-.0990152582526207,.007980860769748688],[.19794845581054688,-.10567755252122879,-.9744991660118103],[.36142194271087646,-.31621846556663513,-.8771430850028992],[.3618732988834381,-.24133867025375366,-.9004461169242859],[.3067537546157837,-.2993679940700531,-.9034827351570129],[.05825778469443321,.1261458396911621,-.9902995228767395],[.19794845581054688,-.10567755252122879,-.9744991660118103],[.3067537546157837,-.2993679940700531,-.9034827351570129],[.05825778841972351,.1261458396911621,-.9902995228767395],[-.573340117931366,.03138911724090576,-.8187159895896912],[-.5588298439979553,.24200040102005005,-.7931865453720093],[-.5588299036026001,.24200041592121124,-.793186604976654],[-.5725812315940857,.07158352434635162,-.8167169094085693],[-.5824649333953857,-.08963058143854141,-.8078991174697876],[-.5974618196487427,-.026273036375641823,-.801466703414917],[-.573340117931366,.03138911724090576,-.8187159895896912],[-.5725812315940857,.07158352434635162,-.8167169094085693],[-.9836636781692505,-.17351125180721283,.04795341566205025],[-.9701706767082214,-.13367219269275665,.20223893225193024],[-.8858831524848938,-.2169192135334015,.4100697338581085],[-.9323112368583679,-.2517188787460327,.25967937707901],[.4892696440219879,-.6696873307228088,.5586896538734436],[.8253296613693237,-.4897189140319824,.2810806930065155],[.7361050248146057,-.5608598589897156,.37892648577690125],[.48926958441734314,-.6696872711181641,.5586895942687988],[-.9473239183425903,-.03956227004528046,-.3178243041038513],[-.9773173332214355,.023850541561841965,-.21043281257152557],[-.9701706767082214,-.13367219269275665,.20223893225193024],[-.9836636781692505,-.17351125180721283,.04795341566205025],[.36142194271087646,-.31621846556663513,-.8771430850028992],[.30721333622932434,.06397239118814468,-.9494879841804504],[.3064556419849396,.06269384920597076,-.9498180150985718],[.3618732988834381,-.24133867025375366,-.9004461169242859],[-.5824649333953857,-.08963058143854141,-.8078991174697876],[-.6289485692977905,.09341081976890564,-.7718148827552795],[-.6298378705978394,.08495340496301651,-.7720667123794556],[-.5974618196487427,-.026273036375641823,-.801466703414917],[-.9701706767082214,-.13367219269275665,.20223893225193024],[-.9699404239654541,.08530983328819275,.22789880633354187],[-.6252967715263367,.2084946185350418,.7520199418067932],[-.8858831524848938,-.2169192135334015,.4100697338581085],[.44077548384666443,-.15774056315422058,.8836487531661987],[.8349682092666626,-.11871185153722763,.5373412370681763],[.8264356851577759,-.12037667632102966,.5500122308731079],[.44077542424201965,-.1577405482530594,.8836486339569092],[-.9773173332214355,.023850541561841965,-.21043281257152557],[-.9860050678253174,.010643646121025085,-.1663745939731598],[-.9699404239654541,.08530983328819275,.22789880633354187],[-.9701706767082214,-.13367219269275665,.20223893225193024],[.30721333622932434,.06397239118814468,-.9494879841804504],[.27058839797973633,-.22081521153450012,-.9370286464691162],[.26844555139541626,-.19278335571289062,-.9438068270683289],[.3064556419849396,.06269384920597076,-.9498180150985718],[-.6289485692977905,.09341081976890564,-.7718148827552795],[-.6188177466392517,-.11514642834663391,-.7770494222640991],[-.6176766753196716,-.12217335402965546,-.7768841981887817],[-.6298378705978394,.08495340496301651,-.7720667123794556],[-.9699404239654541,.08530983328819275,.22789880633354187],[-.9185221791267395,.179682195186615,.3521808981895447],[-.5893592238426208,.2972886562347412,.751182496547699],[-.6252967715263367,.2084946185350418,.7520199418067932],[.45717763900756836,.2989414632320404,.8376291394233704],[.7812478542327881,.20770178735256195,.5886525511741638],[.8054727911949158,.19689813256263733,.5589675903320312],[.45717766880989075,.298941433429718,.8376291990280151],[-.9860050678253174,.010643646121025085,-.1663745939731598],[-.9825411438941956,-.002801100490614772,-.18602432310581207],[-.9185221791267395,.179682195186615,.3521808981895447],[-.9699404239654541,.08530983328819275,.22789880633354187],[.9796860218048096,-.0870121568441391,-.18067669868469238],[.9796860814094543,-.0870121568441391,-.18067671358585358],[.9796860218048096,-.0870121568441391,-.18067669868469238],[.9796860218048096,-.0870121568441391,-.18067669868469238],[.27058839797973633,-.22081521153450012,-.9370286464691162],[.2750524580478668,-.29193371534347534,-.9160352945327759],[.2750525176525116,-.2919337749481201,-.9160354137420654],[.26844555139541626,-.19278335571289062,-.9438068270683289],[-.6188177466392517,-.11514642834663391,-.7770494222640991],[-.6042844653129578,-.19331619143486023,-.7729612588882446],[-.604284405708313,-.19331616163253784,-.7729611992835999],[-.6176766753196716,-.12217335402965546,-.7768841981887817],[.7592925429344177,-.5591611266136169,-.3328869938850403],[.7637971043586731,-.47234907746315,-.43988677859306335],[.7637970447540283,-.47234907746315,-.43988680839538574],[.7611100077629089,-.5448593497276306,-.351908802986145],[.653254508972168,-.738763153553009,.16579394042491913],[.7592925429344177,-.5591611266136169,-.3328869938850403],[.7611100077629089,-.5448593497276306,-.351908802986145],[.7014369964599609,-.7124874591827393,.018645010888576508],[.957516610622406,-.28402209281921387,-.04993342235684395],[.9081516265869141,-.15485897660255432,-.38894644379615784],[.9081515669822693,-.15485896170139313,-.38894644379615784],[.958380937576294,-.272652268409729,-.08465664088726044],[.8253296613693237,-.4897189140319824,.2810806930065155],[.957516610622406,-.28402209281921387,-.04993342235684395],[.958380937576294,-.272652268409729,-.08465664088726044],[.7361050248146057,-.5608598589897156,.37892648577690125],[.8349682092666626,-.11871185153722763,.5373412370681763],[.9973436594009399,-.06475552171468735,.033351972699165344],[.9980437755584717,-.06244455277919769,-.0030331613961607218],[.8264356851577759,-.12037667632102966,.5500122308731079],[.9973436594009399,-.06475552171468735,.033351972699165344],[.9729381203651428,-.04641494154930115,-.22635598480701447],[.972938060760498,-.04641493782401085,-.22635596990585327],[.9980437755584717,-.06244455277919769,-.0030331613961607218],[.005773970857262611,-.9999786019325256,.0030797752551734447],[.005813247058540583,-.9999827742576599,.0006093024858273566],[.005796223413199186,-.9999817609786987,.0016803601756691933],[.005773970391601324,-.9999785423278809,.0030797747895121574],[.8054727911949158,.19689813256263733,.5589675903320312],[.7812478542327881,.20770178735256195,.5886525511741638],[.9732228517532349,.07332519441843033,.21785473823547363],[.9732228517532349,.07332518696784973,.21785475313663483],[-.976742684841156,-.052896250039339066,.20778752863407135],[-.9942461252212524,.10711942613124847,-.0001879819465102628],[-.9950538277626038,-.0990152582526207,.007980860769748688],[-.9480769634246826,-.18246516585350037,.2604924142360687],[-.8752921223640442,.48130813241004944,-.04696930944919586],[-.9942461252212524,.10711942613124847,-.0001879819465102628],[-.976742684841156,-.052896250039339066,.20778752863407135],[-.9018002152442932,.43143555521965027,.024890722706913948],[-.522422730922699,.8478277921676636,-.09089833498001099],[-.8752921223640442,.48130813241004944,-.04696930944919586],[-.9018002152442932,.43143555521965027,.024890722706913948],[-.5388258695602417,.838491678237915,-.08123032748699188],[-.42569205164909363,.8998918533325195,-.09476727247238159],[-.522422730922699,.8478277921676636,-.09089833498001099],[-.5388258695602417,.838491678237915,-.08123032748699188],[-.4188113212585449,.9034200310707092,-.09181131422519684],[-.42569205164909363,.8998918533325195,-.09476727247238159],[-.4188113212585449,.9034200310707092,-.09181131422519684],[-.4022566080093384,.9120044112205505,-.08023528009653091],[-.4223349988460541,.9020577669143677,-.08902166038751602],[.453835129737854,-.7205432653427124,.5242624878883362],[.653254508972168,-.738763153553009,.16579394042491913],[.7014369964599609,-.7124874591827393,.018645010888576508],[.45383507013320923,-.7205432653427124,.5242624282836914],[-.8112958073616028,.5839515328407288,-.02827322669327259],[-.7427892088890076,-.6691581606864929,.02216845005750656],[-.7525398135185242,-.6579435467720032,.028177954256534576],[-.8390973806381226,.5439773201942444,-.002080581383779645],[-.8112958073616028,.5839515328407288,-.02827322669327259],[-.8390973806381226,.5439773201942444,-.002080581383779645],[-.5433249473571777,.8394855856895447,.007872949354350567],[-.5200663208961487,.8529512286186218,-.044778332114219666],[-.9415944814682007,.18800051510334015,.2793843746185303],[-.9776735305786133,.1435503214597702,.15345264971256256],[-.9889450073242188,-.10021429508924484,.10929232835769653],[-.9440922141075134,-.05124950408935547,.3256736099720001],[-.3431074023246765,-.3458298444747925,.8733149170875549],[-.3431074023246765,-.3458298146724701,.8733147978782654],[-.3431074023246765,-.3458298444747925,.8733148574829102],[-.00481108482927084,-.9999883770942688,-.00021707858832087368],[-.004620146472007036,-.9999879598617554,.001657801796682179],[-.005666486918926239,-.9999467730522156,-.008618608117103577],[-.004471795167773962,-.9999850988388062,.0031143990345299244],[-.004471795167773962,-.9999850392341614,.0031143990345299244],[-.004620146472007036,-.9999879598617554,.001657801796682179],[-.00481108482927084,-.9999883770942688,-.00021707858832087368],[-.0010187785374000669,-.9999849796295166,.005365046672523022],[-.0010187787702307105,-.9999850988388062,.005365047138184309],[-.0010187787702307105,-.9999851584434509,.005365047603845596],[-.0010187785374000669,-.9999849796295166,.005365046672523022],[-.1169370636343956,.10038254410028458,-.9880532622337341],[-.062225598841905594,.01109904982149601,-.9980003833770752],[-.6522122621536255,.1848730444908142,-.7351468801498413],[-.7579457759857178,.27697327733039856,-.5905961990356445],[-.6522122621536255,.1848730444908142,-.7351468801498413],[-.8674748539924622,.37473905086517334,-.32719752192497253],[-.8674747943878174,.37473902106285095,-.32719749212265015],[-.7579457759857178,.27697327733039856,-.5905961990356445],[-.05369451642036438,.7826659679412842,.6201216578483582],[-.2027406543493271,.552531898021698,.8084582090377808],[.5579318404197693,.6933944225311279,.45597830414772034],[.5375236868858337,.6949065327644348,.4776747524738312],[.5375236868858337,.6949065327644348,.4776747524738312],[.5579318404197693,.6933944225311279,.45597830414772034],[.8256932497024536,.5639258027076721,.014774173498153687],[.8919774293899536,.4263274669647217,-.1504036784172058],[.8951589465141296,.40545105934143066,-.18520253896713257],[.577497124671936,.14261436462402344,-.8038396239280701],[.7394495010375977,.2839336097240448,-.6104065179824829],[.7394495010375977,.2839336097240448,-.6104065179824829],[.577497124671936,.14261436462402344,-.8038396239280701],[-.062225598841905594,.01109904982149601,-.9980003833770752],[-.1169370636343956,.10038254410028458,-.9880532622337341],[-.600369393825531,.3730711340904236,.7073715329170227],[-.5113011002540588,-.13511663675308228,.8487134575843811],[-.5113010406494141,-.13511662185192108,.8487133979797363],[-.2027406543493271,.552531898021698,.8084582090377808],[-.062225598841905594,.01109904982149601,-.9980003833770752],[-.07047327607870102,-.056778404861688614,-.9958964586257935],[-.34511494636535645,-.029002906754612923,-.9381122589111328],[-.6522122621536255,.1848730444908142,-.7351468801498413],[-.9913008809089661,-.13160249590873718,.0017998266266658902],[-.9913009405136108,-.13160249590873718,.001799826743081212],[-.9913008809089661,-.13160249590873718,.0017998265102505684],[-.9913009405136108,-.13160249590873718,.001799826743081212],[.4942286014556885,-.19463640451431274,.8472630977630615],[.4942286014556885,-.19463637471199036,.8472630977630615],[.4942285716533661,-.19463635981082916,.8472630381584167],[.4942286014556885,-.19463637471199036,.8472630977630615],[.9881885051727295,-.1460365206003189,-.04644080996513367],[.988188624382019,-.1460365206003189,-.046440813690423965],[.9881885051727295,-.14603650569915771,-.04644080623984337],[.9881885051727295,-.1460365206003189,-.04644080996513367],[.9552457928657532,-.07108645141124725,-.2871449589729309],[.9552457928657532,-.07108644396066666,-.2871449291706085],[.9552457332611084,-.07108644396066666,-.2871449291706085],[.9552457928657532,-.07108644396066666,-.2871449589729309],[.577497124671936,.14261436462402344,-.8038396239280701],[.23435240983963013,-.08183195441961288,-.9687013626098633],[-.07047327607870102,-.056778404861688614,-.9958964586257935],[-.062225598841905594,.01109904982149601,-.9980003833770752],[-.5763696432113647,.6622241139411926,.4788082242012024],[-.600369393825531,.3730711340904236,.7073715329170227],[-.2027406543493271,.552531898021698,.8084582090377808],[-.05369451642036438,.7826659679412842,.6201216578483582],[.8391563296318054,.5393615961074829,.07004023343324661],[.8951589465141296,.40545105934143066,-.18520253896713257],[.8919774293899536,.4263274669647217,-.1504036784172058],[-.882590115070343,-.03650842234492302,-.46872344613075256],[-.882590115070343,-.036508429795503616,-.4687235355377197],[-.882590115070343,-.03650842607021332,-.46872347593307495],[-.882590115070343,-.03650842607021332,-.4687235355377197],[-.889030396938324,.451751708984375,.07446818053722382],[-.600369393825531,.3730711340904236,.7073715329170227],[-.5763696432113647,.6622241139411926,.4788082242012024],[.7184011936187744,-.6829391717910767,-.13226424157619476],[.7996262311935425,-.5610377788543701,.21408973634243011],[.8230825662612915,-.48958125710487366,-.28782880306243896],[-.8023288249969482,-.39257118105888367,-.4496179223060608],[-.9208201766014099,-.29577285051345825,-.2541823387145996],[-.9269654154777527,-.3435562551021576,.15067937970161438],[-.9473277926445007,-.29350194334983826,.12816645205020905],[-.15191736817359924,-.44608259201049805,.8820042610168457],[-.25170090794563293,-.22472083568572998,.9413539171218872],[-.26237815618515015,-.23019830882549286,.9371053576469421],[-.06973143666982651,-.5524761080741882,.8306068181991577],[.7996262311935425,-.5610377788543701,.21408973634243011],[.9406462907791138,-.33650943636894226,-.04411286488175392],[.8721233010292053,-.2860887944698334,-.396930992603302],[.8230825662612915,-.48958125710487366,-.28782880306243896],[-.42734047770500183,-.3831574618816376,-.8188837766647339],[-.42732101678848267,-.3530570864677429,-.8323144912719727],[-.4079180657863617,-.11905945837497711,-.905222475528717],[-.4048710763454437,-.10387067496776581,-.9084548354148865],[-.9269654154777527,-.3435562551021576,.15067937970161438],[-.9208201766014099,-.29577285051345825,-.2541823387145996],[-.9601566791534424,-.03858241066336632,-.2767859101295471],[-.975777804851532,-.06980238854885101,.2073289453983307],[.017434529960155487,-.09912088513374329,.9949226379394531],[.192292720079422,-.014951392076909542,.9812236428260803],[.1922927349805832,-.014951393008232117,.9812237024307251],[-.01032331120222807,-.11210950464010239,.993642270565033],[.9751980304718018,-.11135800182819366,-.19128048419952393],[.9552814364433289,-.05336516350507736,-.29084277153015137],[.7979761958122253,-.04630596935749054,-.6009073853492737],[.8455327749252319,-.09537559002637863,-.5253358483314514],[-.41832828521728516,-.009852799586951733,-.908242404460907],[-.45054566860198975,.015090747736394405,-.8926258683204651],[-.4505457282066345,.01509074866771698,-.8926258683204651],[-.4249478876590729,-.004779197741299868,-.9052051901817322],[-.9693365097045898,.016211897134780884,-.24520176649093628],[-.9765109419822693,.04683363065123558,-.21031633019447327],[-.9765108227729797,.046833623200654984,-.21031630039215088],[-.9990457892417908,-.007293658331036568,.043061260133981705],[-.3569827079772949,-.42108333110809326,.8338177800178528],[-.3664427697658539,-.2725484073162079,.8896274566650391],[-.36669278144836426,-.26424306631088257,.892026960849762],[-.3673076629638672,-.1461908519268036,.9185385704040527],[-.36669278144836426,-.26424306631088257,.892026960849762],[-.3664427697658539,-.2725484073162079,.8896274566650391],[-.4056936502456665,.8296096324920654,-.3836149275302887],[-.24315686523914337,.8125669956207275,-.5297257900238037],[-.2557784914970398,.9142258763313293,-.3142741918563843],[-.42595726251602173,.8905650973320007,-.15954336524009705],[-.7374564409255981,-.445467084646225,.5076581835746765],[-.9089924097061157,-.16209730505943298,.3840016722679138],[-.9473277926445007,-.29350194334983826,.12816645205020905],[-.9269654154777527,-.3435562551021576,.15067937970161438],[-.7374564409255981,-.445467084646225,.5076581835746765],[-.9269654154777527,-.3435562551021576,.15067937970161438],[-.975777804851532,-.06980238854885101,.2073289453983307],[-.8294135928153992,-.08758260309696198,.5517268180847168],[.981040894985199,-.1073567122220993,.16134801506996155],[.9929326176643372,-.05349728837609291,.1059369444847107],[.9552814364433289,-.05336516350507736,-.29084277153015137],[.9751980304718018,-.11135800182819366,-.19128048419952393],[.6430631875991821,-.5529570579528809,.5298190712928772],[.8140770792961121,-.37448689341545105,.44388967752456665],[.9406462907791138,-.33650943636894226,-.04411286488175392],[.7996262311935425,-.5610377788543701,.21408973634243011],[.45072656869888306,-.7097382545471191,.5414029955863953],[.6430631875991821,-.5529570579528809,.5298190712928772],[.7996262311935425,-.5610377788543701,.21408973634243011],[.002940503880381584,-.9999933838844299,-.0021192675922065973],[.0027015653904527426,-.9999943971633911,-.00194975221529603],[6992677663220093e-20,-1,-827307885629125e-19],[.0033051983918994665,-.999991774559021,-.0023780008777976036],[.003305198159068823,-.9999916553497314,-.0023780004121363163],[.0027015653904527426,-.9999943971633911,-.00194975221529603],[.002940503880381584,-.9999933838844299,-.0021192675922065973],[-.0027710082940757275,-.9999944567680359,-.0018955926643684506],[-.003205943154171109,-.9999924898147583,-.002180637326091528],[-987338262348203e-20,-.9999999403953552,-8601825538789853e-20],[-.003205943154171109,-.9999924898147583,-.002180637326091528],[-.0027710082940757275,-.9999944567680359,-.0018955926643684506],[-.003571542212739587,-.999990701675415,-.0024202410131692886],[-.003571541979908943,-.9999906420707703,-.0024202410131692886],[.10659994184970856,.22384177148342133,-.9687782526016235],[.024921411648392677,.016289647668600082,-.9995567202568054],[-.7404559850692749,.273591011762619,-.6138997673988342],[-.702672004699707,.40140748023986816,-.5874725580215454],[.35547885298728943,.776340663433075,.5205093026161194],[.35547885298728943,.7763406038284302,.5205092430114746],[.5515531897544861,.7534278631210327,.3579602837562561],[.6331616640090942,.7248905301094055,.27136680483818054],[.5515531897544861,.7534278631210327,.3579602837562561],[.7814196944236755,.2204984575510025,-.583749532699585],[.8275907635688782,.36162346601486206,-.42932745814323425],[.6331616640090942,.7248905301094055,.27136680483818054],[.8275907635688782,.36162346601486206,-.42932745814323425],[.7814196944236755,.2204984575510025,-.583749532699585],[.024921411648392677,.016289647668600082,-.9995567202568054],[.10659994184970856,.22384177148342133,-.9687782526016235],[-.5469435453414917,-.15651975572109222,.8224075436592102],[-.5469436049461365,-.15651977062225342,.822407603263855],[-.5469436049461365,-.15651977062225342,.822407603263855],[-.5469436049461365,-.15651975572109222,.822407603263855],[.024921411648392677,.016289647668600082,-.9995567202568054],[.014822925440967083,-.09616053104400635,-.9952554702758789],[-.5146061778068542,-.10557375848293304,-.8509023189544678],[-.7404559850692749,.273591011762619,-.6138997673988342],[.5432253479957581,-.2052222639322281,.8141191601753235],[.5432253479957581,-.2052222341299057,.8141191005706787],[.5432254076004028,-.2052222490310669,.8141191601753235],[.5432254076004028,-.2052222341299057,.8141191005706787],[.9766983985900879,.013071822933852673,-.21421776711940765],[.9766983985900879,.013071823865175247,-.21421778202056885],[.9766984581947327,.013071823865175247,-.21421779692173004],[.9766984581947327,.013071822933852673,-.21421779692173004],[.7814196944236755,.2204984575510025,-.583749532699585],[.584661066532135,-.05284975841641426,-.8095544576644897],[.014822925440967083,-.09616053104400635,-.9952554702758789],[.024921411648392677,.016289647668600082,-.9995567202568054],[-.9812504649162292,-.06350800395011902,-.1819731593132019],[-.9812504649162292,-.06350800395011902,-.1819731742143631],[-.9812504649162292,-.06350800395011902,-.1819731444120407],[-.981250524520874,-.06350801140069962,-.1819731742143631],[-.7404559850692749,.273591011762619,-.6138997673988342],[-.8199886679649353,.5490710735321045,-.1616777777671814],[-.8199886083602905,.5490710139274597,-.1616777628660202],[-.702672004699707,.40140748023986816,-.5874725580215454],[-.08212380856275558,-.9820094108581543,-.17003856599330902],[-.4672388732433319,-.8609240055084229,-.20123977959156036],[-.5241155624389648,-.8468071222305298,-.09066712856292725],[-.1164323017001152,-.9908350110054016,-.06847979128360748],[-.9602015614509583,-.24244357645511627,-.13868680596351624],[-.927798330783844,-.3665548264980316,-.06948138028383255],[-.5241155624389648,-.8468071222305298,-.09066712856292725],[-.4672388732433319,-.8609240055084229,-.20123977959156036],[-.975777804851532,-.06980238854885101,.2073289453983307],[-.9601566791534424,-.03858241066336632,-.2767859101295471],[-.9693365097045898,.016211897134780884,-.24520176649093628],[-.9990457892417908,-.007293658331036568,.043061260133981705],[-.4079180657863617,-.11905945837497711,-.905222475528717],[-.41832828521728516,-.009852799586951733,-.908242404460907],[-.4249478876590729,-.004779197741299868,-.9052051901817322],[-.4048710763454437,-.10387067496776581,-.9084548354148865],[.9406462907791138,-.33650943636894226,-.04411286488175392],[.9751980304718018,-.11135800182819366,-.19128048419952393],[.8455327749252319,-.09537559002637863,-.5253358483314514],[.8721233010292053,-.2860887944698334,-.396930992603302],[.8140770792961121,-.37448689341545105,.44388967752456665],[.981040894985199,-.1073567122220993,.16134801506996155],[.9751980304718018,-.11135800182819366,-.19128048419952393],[.9406462907791138,-.33650943636894226,-.04411286488175392],[-.25170090794563293,-.22472083568572998,.9413539171218872],[.017434529960155487,-.09912088513374329,.9949226379394531],[-.01032331120222807,-.11210950464010239,.993642270565033],[-.26237815618515015,-.23019830882549286,.9371053576469421],[-.975777804851532,-.06980238854885101,.2073289453983307],[-.9990457892417908,-.007293658331036568,.043061260133981705],[-.7721172571182251,-.06749111413955688,.6318860650062561],[-.8294135928153992,-.08758260309696198,.5517268180847168],[-.04987340047955513,-.5272462964057922,.8482475280761719],[-.05676192045211792,-.4981537163257599,.8652287721633911],[-.07380927354097366,-.42228904366493225,.9034512639045715],[-.07380927354097366,-.42228904366493225,.9034512042999268],[-.15191736817359924,-.44608259201049805,.8820042610168457],[-.06973143666982651,-.5524761080741882,.8306068181991577],[-.05676192045211792,-.4981537163257599,.8652287721633911],[-.04987340047955513,-.5272462964057922,.8482475280761719],[-.3823562264442444,.7435925006866455,-.5485195517539978],[-.37371256947517395,.7407341003417969,-.5582579374313354],[-.36483970284461975,.7376870512962341,-.5680755376815796],[-.382356196641922,.7435925602912903,-.5485196113586426],[-.8538330793380737,.20588931441307068,.47809889912605286],[-.952582061290741,.091758131980896,.2901168465614319],[-.9451659917831421,.2027226686477661,-.2560560405254364],[-.9093189835548401,.4027748107910156,.1044585332274437],[-.12615735828876495,-.3186514675617218,.9394389390945435],[-.12615734338760376,-.3186514675617218,.9394389390945435],[-.12615735828876495,-.3186514973640442,.9394389390945435],[-.12615734338760376,-.3186514675617218,.9394388794898987],[-.7794650793075562,.1058986485004425,.617429792881012],[-.8184667229652405,.018256813287734985,.5742636919021606],[-.952582061290741,.091758131980896,.2901168465614319],[-.8538330793380737,.20588931441307068,.47809889912605286],[-.37371256947517395,.7407341003417969,-.5582579374313354],[-.3530687987804413,.7334728837013245,-.5808269381523132],[-.35306885838508606,.7334729433059692,-.580826997756958],[-.36483970284461975,.7376870512962341,-.5680755376815796],[-.952582061290741,.091758131980896,.2901168465614319],[-.9957332015037537,-.09205184876918793,-.006468675099313259],[-.9985544085502625,.053307000547647476,.006882904563099146],[-.9451659917831421,.2027226686477661,-.2560560405254364],[-.2771816551685333,-.5325545072555542,.7997224926948547],[-.3361224830150604,-.726291835308075,.5996015071868896],[-.3422775864601135,-.7490001320838928,.5673136711120605],[-.2771816551685333,-.5325545072555542,.7997224926948547],[-.8184667229652405,.018256813287734985,.5742636919021606],[-.9033880233764648,-.30862173438072205,.2977290153503418],[-.9957332015037537,-.09205184876918793,-.006468675099313259],[-.952582061290741,.091758131980896,.2901168465614319],[-.9957332015037537,-.09205184876918793,-.006468675099313259],[-.9655999541282654,-.2024228423833847,.16322247684001923],[-.9866953492164612,.01157301478087902,.16216762363910675],[-.9985544085502625,.053307000547647476,.006882904563099146],[-.3361224830150604,-.726291835308075,.5996015071868896],[-.40485987067222595,-.873597264289856,.2700302004814148],[-.4063848555088043,-.8713362812995911,.27499908208847046],[-.3422775864601135,-.7490001320838928,.5673136711120605],[-.9033880233764648,-.30862173438072205,.2977290153503418],[-.9148621559143066,-.37137898802757263,.15844525396823883],[-.9655999541282654,-.2024228423833847,.16322247684001923],[-.9957332015037537,-.09205184876918793,-.006468675099313259],[-.33072471618652344,.7130166292190552,.6182462573051453],[-.33072471618652344,.7130166888237,.61824631690979],[-.33072471618652344,.7130166888237,.6182462573051453],[-.33072471618652344,.7130166888237,.6182462573051453],[-.7358707785606384,.20594705641269684,.6450425386428833],[-.7616881728172302,.14306820929050446,.6319513916969299],[-.6089897155761719,.4303660988807678,.66627037525177],[-.6089898347854614,.4303662180900574,.6662704348564148],[-.40485987067222595,-.873597264289856,.2700302004814148],[-.4520634412765503,-.7724806070327759,.4459960162639618],[-.4520634114742279,-.7724805474281311,.4459960460662842],[-.4063848555088043,-.8713362812995911,.27499908208847046],[-.8172847032546997,-.05075358599424362,.5739944577217102],[-.8172847628593445,-.05075358971953392,.5739944577217102],[-.7616881728172302,.14306820929050446,.6319513916969299],[-.7358707785606384,.20594705641269684,.6450425386428833],[-.5218523144721985,.12872415781021118,.843267560005188],[-.4824405908584595,.4865904748439789,.7283408641815186],[-.4746325612068176,.5189173817634583,.7109490036964417],[-.5218522548675537,.12872417271137238,.8432676196098328],[-.0833234190940857,.9758344888687134,.20200049877166748],[-.0833234190940857,.9758344888687134,.20200049877166748],[-.08332342654466629,.9758344888687134,.20200051367282867],[-.08332342654466629,.9758344888687134,.20200049877166748],[-.4056936502456665,.8296096324920654,-.3836149275302887],[-.42595726251602173,.8905650973320007,-.15954336524009705],[-.7619723081588745,.6466788649559021,.03470776230096817],[-.7022985219955444,.7114459872245789,.024928009137511253],[-.7165502309799194,.5546915531158447,-.4229336977005005],[-.6365807056427002,.5654520392417908,-.5244320034980774],[-.8085176348686218,.5237716436386108,-.2682582139968872],[-.8085176348686218,.5237715840339661,-.2682582139968872],[-.5550318956375122,.5669994950294495,-.6086469292640686],[-.555031955242157,.5669995546340942,-.6086468696594238],[-.6365807056427002,.5654520392417908,-.5244320034980774],[-.7165502309799194,.5546915531158447,-.4229336977005005],[-.48476293683052063,.7562461495399475,.4394277036190033],[-.484762966632843,.7562462687492371,.4394277036190033],[-.48476290702819824,.7562460899353027,.43942761421203613],[-.48476290702819824,.7562460899353027,.43942761421203613],[-.2713889181613922,.7295088171958923,.6278254389762878],[-.2713889181613922,.7295088768005371,.6278254389762878],[-.2713888883590698,.7295088768005371,.6278254389762878],[-.9646292328834534,-.18377573788166046,.18898944556713104],[-.9646292328834534,-.18377572298049927,.18898946046829224],[-.9646291136741638,-.18377570807933807,.18898943066596985],[-.9646292328834534,-.18377573788166046,.18898946046829224],[-.10347545146942139,.23581929504871368,-.966272234916687],[-.12586091458797455,.3021451234817505,-.9449166059494019],[-.12141623347997665,.28894558548927307,-.9496148228645325],[-.10347545146942139,.23581930994987488,-.966272234916687],[.5906820893287659,.791027843952179,.15927840769290924],[.5870707631111145,.7962804436683655,.14589446783065796],[.5851361155509949,.7989506125450134,.1389012187719345],[.5906820297241211,.791027843952179,.15927839279174805],[.015503320842981339,.08264702558517456,.9964582324028015],[-.0007061606738716364,.07823371142148972,.9969347715377808],[-.007696251384913921,.07632371783256531,.9970533847808838],[.015503320842981339,.08264703303575516,.9964582324028015],[-.9076508283615112,-.3570781648159027,.22060135006904602],[-.907650887966156,-.3570781648159027,.2206013798713684],[-.907650887966156,-.3570782244205475,.2206013947725296],[-.9076509475708008,-.3570781648159027,.2206013798713684],[-.12586091458797455,.3021451234817505,-.9449166059494019],[-.21108824014663696,.5587577223777771,-.8020172119140625],[-.21108822524547577,.5587576627731323,-.8020172119140625],[-.12141623347997665,.28894558548927307,-.9496148228645325],[.5870707631111145,.7962804436683655,.14589446783065796],[.5699755549430847,.816970944404602,.08767196536064148],[.5699754953384399,.816970944404602,.08767195791006088],[.5851361155509949,.7989506125450134,.1389012187719345],[-.0007061606738716364,.07823371142148972,.9969347715377808],[-.10919831693172455,.04812295362353325,.9928544759750366],[-.10919830948114395,.04812295362353325,.9928543567657471],[-.007696251384913921,.07632371783256531,.9970533847808838],[-.8077946901321411,-.550134539604187,.21170684695243835],[-.7513380646705627,-.646805465221405,-.13089564442634583],[-.8316102027893066,-.4946551024913788,-.25246918201446533],[.7430096864700317,.0557236447930336,.6669567823410034],[.7430096864700317,.055723633617162704,.6669567227363586],[.7430097460746765,.0557236522436142,.6669568419456482],[.7430096864700317,.0557236447930336,.6669568419456482],[-.4017104208469391,.8051612377166748,.436284601688385],[-.4017103314399719,.80516117811203,.4362845718860626],[-.4017103910446167,.80516117811203,.4362845718860626],[-.4017103612422943,.80516117811203,.436284601688385],[-.722770631313324,.05587755888700485,.688825249671936],[-.7227705717086792,.055877555161714554,.688825249671936],[-.7227705717086792,.05587755888700485,.688825249671936],[-.7227706909179688,.05587756633758545,.6888251900672913],[.41099199652671814,.8038304448127747,.43004918098449707],[.41099199652671814,.8038303256034851,.43004921078681946],[.41099199652671814,.8038303852081299,.43004921078681946],[.4109920263290405,.8038303852081299,.43004924058914185],[.47810599207878113,-.8609418272972107,-.17376361787319183],[.11485107243061066,-.9807531833648682,-.15790025889873505],[.1343700885772705,-.9893593192100525,-.05579141527414322],[.5313248038291931,-.8438926935195923,-.07442483305931091],[.9485647082328796,-.2816155254840851,-.14462943375110626],[.47810599207878113,-.8609418272972107,-.17376361787319183],[.5313248038291931,-.8438926935195923,-.07442483305931091],[.925125002861023,-.375169962644577,-.058234188705682755],[-.8023288249969482,-.39257118105888367,-.4496179223060608],[-.16912665963172913,-.595000147819519,-.7857295274734497],[-.015343433246016502,-.6270102262496948,-.7788599729537964],[-.015343430452048779,-.6270101070404053,-.7788599133491516],[-.9602015614509583,-.24244357645511627,-.13868680596351624],[-.16912665963172913,-.595000147819519,-.7857295274734497],[-.8023288249969482,-.39257118105888367,-.4496179223060608],[.01625058241188526,-.6071835160255432,-.7943953275680542],[.2705770432949066,-.6124230623245239,-.7427825927734375],[.7406501770019531,-.43752405047416687,-.5099119544029236],[.01625058427453041,-.6071835160255432,-.7943953275680542],[-.40848779678344727,-.621504008769989,-.6684836149215698],[-.42732101678848267,-.3530570864677429,-.8323144912719727],[-.42734047770500183,-.3831574618816376,-.8188837766647339]],edges:[7,1,0,3,5,4,2,8,10,14,21,23,31,27,36,34,33,32,37,38,46,82,84,44,45,53,49,51,52,57,209,60,1481,59,64,67,492,74,71,80,76,79,88,83,96,86,95,91,98,94,99,101,106,102,107,109,110,115,117,122,118,123,125,130,126,131,133,138,134,139,141,145,142,495,17,494,150,151,160,155,158,159,168,163,166,167,170,171,174,175,178,179,182,183,186,187,190,137,129,105,93,85,193,194,199,220,207,1303,603,602,113,114,121,58,208,205,212,352,211,219,218,223,222,227,48,198,228,235,225,221,239,237,238,247,246,251,249,250,254,259,257,258,263,267,266,271,269,270,274,279,277,278,282,283,287,286,290,291,293,294,298,215,241,301,303,300,305,307,304,243,315,242,311,308,319,262,289,318,330,288,335,336,340,344,349,55,24,20,75,154,213,356,361,87,162,364,601,393,405,383,385,384,389,392,400,395,398,399,403,408,406,28,29,30,410,412,39,40,41,327,418,372,373,422,376,377,426,380,381,436,391,394,325,414,42,413,388,514,454,1460,458,448,449,452,455,457,470,459,474,462,478,482,471,473,475,476,479,480,484,487,210,332,18,16,19,69,65,15,204,11,62,496,451,598,466,483,506,504,477,508,587,512,515,516,517,521,518,520,523,524,525,526,530,531,532,472,538,539,540,543,544,547,549,550,552,554,556,536,562,567,535,576,578,467,583,463,461,460,591,510,595,456,501,202,201,499,609,611,610,615,614,617,619,618,622,625,627,626,631,630,633,635,634,638,675,652,643,642,645,647,646,650,653,655,146,147,659,148,149,661,663,368,666,370,671,369,673,676,683,687,693,63,613,629,641,657,696,698,697,700,701,704,705,709,712,714,688,716,689,720,690,691,731,729,730,727,733,734,728,738,736,740,749,747,761,751,764,758,759,760,763,762,770,806,812,772,771,779,775,781,780,783,939,788,1301,789,792,797,1222,798,801,808,804,809,816,813,824,810,825,821,822,818,829,827,830,826,837,835,834,845,843,846,842,853,851,854,850,861,859,862,858,869,867,1219,745,880,886,888,894,896,900,904,908,912,916,915,919,923,950,933,1332,838,782,935,936,1082,937,943,944,947,948,776,926,958,959,953,949,963,965,964,971,972,975,977,976,980,983,985,984,987,991,992,995,997,996,1e3,1003,1005,1004,1008,1007,1011,1012,1016,1015,1021,1020,1024,969,1027,1030,1031,1034,967,1039,968,1035,1038,1043,988,1017,1044,1056,1018,1059,1066,1070,1074,785,754,750,805,884,942,1086,817,892,1094,1334,1117,1135,1111,1109,1110,1113,1118,1124,1122,1126,1125,1129,1132,1134,757,756,755,1138,1136,769,768,767,1051,1146,1099,1098,1150,1102,1101,1154,1106,1105,1160,1119,1123,1053,1142,766,1143,1114,1239,1184,1176,1175,1177,1189,1178,1183,1181,1200,1187,1204,1192,1208,1212,1199,1197,1203,1202,1207,1206,1210,1214,938,1062,746,743,795,791,739,928,735,786,1226,1179,1329,1196,1211,1232,1234,1201,1238,1316,1244,1243,1242,1245,1248,1246,1250,1249,1255,1254,1258,1257,1256,1198,1262,1261,1260,1265,1264,1269,1275,1274,1272,1278,1276,1295,1282,1285,1297,1311,1309,1195,1312,1191,1185,1186,1320,1236,1324,1182,1229,930,931,1223,1340,1341,1344,1345,1350,1349,1353,1356,1357,1360,1361,1366,1365,1369,1404,1387,1372,1373,1378,1377,1381,1384,876,1388,874,873,1394,1097,1397,1096,1411,1412,1416,1425,793,1346,1362,1374,1390,1429,1427,1428,1433,1432,1437,1436,1440,1445,1443,1423,1449,1422,1453,1421,1420,1174,1466,1462,574,1478,575,1486,1300,1307,447,1489],indices:[3,2,1,-5,0,5,4,-2,144,0,1,-144,143,1,2,-143,141,21,41,-141,101,102,3,-5,100,101,4,-6,116,117,-119,6,7,10,-10,10,7,8,-12,120,121,119,-126,9,10,14,-14,10,11,71,-15,8,16,15,-12,65,100,5,-18,145,18,0,-145,142,194,19,-144,2,21,141,-143,22,21,2,-4,102,103,22,-4,12,23,6,-10,25,13,58,-58,13,105,12,-10,27,25,57,-57,26,24,25,-28,28,26,27,-30,29,27,56,-56,30,28,29,-32,31,29,55,-65,32,30,31,-34,33,31,64,-55,34,32,33,-36,35,33,54,-54,36,34,35,-38,37,35,53,-53,38,36,37,-40,39,37,-53,188,187,189,-191,22,42,41,-22,103,104,42,-23,12,44,43,-24,105,106,44,-13,26,46,45,-25,28,47,46,-27,30,48,47,-29,32,49,48,-31,34,50,49,-33,36,51,50,-35,38,51,-37,14,59,58,-14,14,71,72,-60,107,171,145,-145,66,65,17,-62,16,139,68,-68,94,65,-67,15,16,67,-70,60,73,74,-71,72,71,73,-61,15,73,71,-12,74,73,15,-70,67,68,76,-76,76,68,95,-97,69,67,75,-78,70,74,79,-79,74,69,77,-80,75,76,81,-81,81,76,96,-83,77,75,80,-84,78,79,85,-85,79,77,83,-86,80,81,87,-87,87,81,82,-89,83,80,86,-90,99,98,84,-91,84,85,91,-91,85,83,89,-92,93,92,60,-71,95,94,92,-94,97,93,70,-79,96,95,93,-98,82,96,97,-99,98,97,78,-85,120,125,116,-119,82,98,99,-89,100,139,16,-9,7,101,100,-9,6,102,101,-8,23,103,102,-7,23,43,104,-104,68,65,94,-96,24,105,13,-26,24,45,106,-106,19,107,144,-144,192,191,-194,118,117,-123,120,118,122,-124,121,120,123,-125,91,89,111,-113,111,89,86,-127,87,88,113,-111,88,114,-114,99,90,115,-115,90,91,112,-116,109,110,117,-117,112,111,119,-122,125,126,109,-117,110,113,122,-118,113,114,123,-123,114,115,124,-124,115,112,121,-125,86,87,110,-110,88,99,-115,111,126,125,-120,126,86,-110,129,18,-131,18,145,146,-131,128,127,169,-171,151,129,167,-169,130,166,167,-130,146,165,166,-131,132,131,135,-137,150,133,137,-150,133,134,138,-138,134,147,148,-139,68,139,-66,100,65,-140,20,141,140,-41,128,146,145,-172,128,170,165,-147,131,150,149,-136,127,151,168,-170,63,151,-128,152,153,-155,156,152,154,-156,154,153,-158,157,158,155,-155,137,138,159,-161,159,138,148,-165,136,135,161,-163,161,135,149,-164,149,137,160,-164,164,162,153,-153,160,159,156,-156,159,164,152,-157,162,161,157,-154,157,161,163,-159,163,160,155,-159,0,18,-368,165,147,134,-167,167,166,134,-134,168,167,133,-151,169,168,150,-132,170,169,131,-133,165,170,132,-148,171,107,108,-64,128,171,63,-128,20,40,172,-174,19,194,195,-175,108,107,175,-177,107,19,174,-176,173,172,177,-179,174,195,196,-180,176,175,180,-182,175,174,179,-181,179,196,197,-185,181,180,185,-187,180,179,184,-186,183,182,187,-189,184,197,188,-191,186,185,191,-193,185,184,190,-192,193,191,190,-190,178,177,182,-184,20,194,142,-142,195,194,20,-174,196,195,173,-179,203,202,204,-206,188,197,-184,197,196,198,-200,196,178,200,-199,178,183,201,-201,183,197,199,-202,199,198,202,-204,198,200,204,-203,200,201,205,-205,201,199,203,-206,209,210,207,-209,206,207,210,-212,316,315,207,-207,315,314,208,-208,313,140,41,-228,277,210,209,-279,276,211,210,-278,289,291,-291,212,215,216,-214,216,217,214,-214,293,298,292,-295,215,219,220,-217,216,220,250,-218,214,217,221,-223,245,223,211,-277,317,316,206,-225,314,315,225,-356,208,314,313,-228,228,209,208,-228,278,209,228,-280,218,215,212,-230,231,57,58,-220,219,215,218,-281,233,56,57,-232,232,233,231,-231,234,235,233,-233,235,55,56,-234,236,237,235,-235,237,64,55,-236,238,239,237,-237,239,54,64,-238,240,241,239,-239,241,53,54,-240,242,243,241,-241,243,52,53,-242,38,39,243,-243,39,52,-244,352,353,189,-188,228,227,41,-43,279,228,42,-105,218,229,43,-45,280,218,44,-107,232,230,45,-47,234,232,46,-48,236,234,47,-49,238,236,48,-50,240,238,49,-51,242,240,50,-245,38,242,-245,220,219,58,-60,220,59,72,-251,281,316,317,-343,66,61,223,-246,222,246,247,-313,94,66,-246,221,248,246,-223,60,249,252,-252,72,60,251,-251,221,217,250,-252,252,248,221,-252,246,253,254,-248,254,272,271,-248,248,255,253,-247,249,256,257,-253,252,257,255,-249,253,258,259,-255,259,260,272,-255,255,261,258,-254,256,262,263,-258,257,263,261,-256,258,264,265,-260,265,266,260,-260,261,267,264,-259,275,268,262,-275,262,268,269,-264,263,269,267,-262,270,249,60,-93,271,270,92,-95,273,256,249,-271,272,273,270,-272,260,274,273,-273,274,262,256,-274,293,291,289,-299,260,266,275,-275,276,214,222,-313,213,214,276,-278,212,213,277,-279,229,212,278,-280,229,279,104,-44,247,271,94,-246,230,231,219,-281,230,280,106,-46,225,315,316,-282,192,193,-355,291,295,-291,293,296,295,-292,294,297,296,-294,269,285,284,-268,284,299,264,-268,265,283,286,-267,266,286,-288,275,287,288,-269,268,288,285,-270,282,289,290,-284,285,294,292,-285,298,289,282,-300,283,290,295,-287,286,295,296,-288,287,296,297,-289,288,297,294,-286,264,282,283,-266,266,287,-276,284,292,298,-300,299,282,-265,62,151,-303,224,303,318,-318,301,341,340,-301,151,339,338,-303,303,302,338,-338,318,303,337,-337,305,309,308,-305,322,321,310,-307,306,310,311,-308,307,311,320,-320,247,245,-313,276,312,-246,226,40,140,-314,301,342,317,-319,301,318,336,-342,304,308,321,-323,300,340,339,-152,63,300,-152,323,325,-325,327,326,325,-324,325,328,-325,328,325,326,-330,310,331,330,-312,309,333,332,-309,332,334,321,-309,321,334,331,-311,335,323,324,-334,331,326,327,-331,333,324,328,-333,328,329,334,-333,334,329,326,-332,330,327,323,-336,330,335,320,-312,62,368,223,-62,206,211,223,-369,336,337,307,-320,338,306,307,-338,339,322,306,-339,340,304,322,-340,341,305,304,-341,336,319,305,-342,342,63,108,-282,301,300,63,-343,226,343,172,-41,225,344,356,-356,108,176,345,-282,281,345,344,-226,343,346,177,-173,344,347,357,-357,176,181,348,-346,345,348,347,-345,347,350,358,-358,181,186,351,-349,348,351,350,-348,349,352,187,-183,350,353,352,-359,186,192,354,-352,351,354,353,-351,193,189,353,-355,346,349,182,-178,226,313,314,-356,356,343,226,-356,357,346,343,-357,364,366,365,-364,352,349,-359,358,360,359,-358,357,359,361,-347,346,361,362,-350,349,362,360,-359,360,364,363,-360,359,363,365,-362,361,365,366,-363,362,366,364,-361,151,62,-130,136,148,147,-133,309,320,335,-334,309,305,319,-321,136,162,164,-149,367,62,61,-18,0,367,17,-6,224,368,62,-303,206,368,-225,62,367,18,-130,224,302,-304],vertices:[[.0157338739516657,-.3731179032440599,-.32995091819094924],[.11687308808801855,-.35310123346158495,-.30618964469864796],[.20075006391154804,-.3372663122765826,-.35346234278807576],[.21376653949833713,-.4586353926753043,-.3644821931439939],[.1462680608791268,-.4789949608683861,-.31827696717897946],[.02909283600772916,-.5189211101896504,-.3429796328397152],[.2266313792215815,-.7336079497801105,-.39612760920656453],[.18517119924079262,-.7556619933046275,-.3344087141160079],[.09432772032275161,-.7898673630747339,-.29925991060658697],[.22226867697366093,-.8420862070617336,-.4150355298249529],[.19372548486164387,-.8609811631868679,-.3710872863761998],[.12479181300360287,-.904793730260175,-.3345827036261946],[.24086914945346416,-.8390654904968264,-.4509747269824572],[.20488551963023072,-.9318172060262624,-.4513162548461153],[.18687376572179482,-.9250028362338856,-.4340865469444228],[.04034784009380665,-.9272736433976296,-.3350249887126051],[-.0078003602774770475,-.8265943526910275,-.3005164197585371],[-.04373171759553546,-.5172659428701358,-.40378309583825756],[-.09231542545243976,-.3607376308873834,-.38384447209790634],[.15854741538183958,-.13278122569164597,-.34811464995196056],[.2972139356461112,-.1430455393723507,-.44456236529564985],[.23242065243943788,-.32572418249098567,-.41988411557904415],[.24351925354214898,-.44110500646333844,-.42748771832946075],[.252313553282717,-.7308192054110468,-.4513450337412126],[.2433512022051315,-1.0189215634222721,-.4529352257357231],[.20102896114772306,-1.013305564646629,-.45336631327220467],[.2353650743605905,-1.1121492655025969,-.45227552889553296],[.19898175263022277,-1.1098628719296966,-.4533390681460935],[.2293866915720696,-1.2196178468059924,-.4572879533035819],[.19466017197241614,-1.2189368533761642,-.45971414784690423],[.23087171157634068,-1.3224632753063412,-.4639676934142127],[.19624807885840334,-1.325536119290168,-.4671454917588955],[.24046647291478918,-1.436182545573114,-.46933615431146397],[.2055254743763768,-1.446555466679321,-.4703311662145881],[.252759589885161,-1.554674573298902,-.47019247411768966],[.22173674930799536,-1.5634024649876934,-.4699648545095093],[.2687676611527293,-1.6862270170202698,-.4779183845814437],[.24120226749595863,-1.6983844161619797,-.47879375214034814],[.26825861566220754,-1.719871773499349,-.5010424340581925],[.26020185153787434,-1.7242664776298982,-.5010424340581925],[.3197018078010073,-.1407680582408563,-.5006491822967628],[.2552811060983087,-.3152468200074686,-.5018674102944807],[.2670241388944766,-.43296294716576134,-.5013808881294625],[.27804397888709087,-.7327584075746746,-.5010438432338127],[.2644026375247217,-.8445926343043153,-.5012655974254291],[.27245442726315416,-1.02588222161335,-.5010424340581925],[.261020220924998,-1.1187079104064535,-.5010424340581925],[.2536758717681,-1.2182037947072404,-.5010424340581925],[.25622632232590437,-1.3184962025504028,-.5010424340581925],[.26545098935332867,-1.4316689536195342,-.5010424340581925],[.27729740646980294,-1.5491772136269946,-.5010424340581925],[.2911469258821232,-1.6794230519850688,-.5011391413341425],[.22696242460328386,-1.6998574976400886,-.5010424340581925],[.20443881977633327,-1.5657790607582625,-.5010424340581925],[.19011830892563286,-1.4453513336655854,-.5010424340581925],[.1802932335199744,-1.2211875971834414,-.5010424340581925],[.18347766956084377,-1.1098716600114549,-.5010424340581925],[.1854752171257671,-1.0132325240803182,-.5010280889949845],[.19111136216430857,-.9315884257280386,-.5010019172437798],[.17386292777236012,-.9277026012751475,-.5010465165029092],[.08906378370924217,-.9548489029197704,-.501088208199981],[-.06665870366583032,-.5265560049363746,-.5014962457294326],[-.078245084759337,-.3738967988063995,-.5013970703273921],[-.01604988185546874,-.10566638703784598,-.5011546151739334],[.18099271508406745,-1.3273355204833734,-.5010424340581925],[-.05480312538865528,-.6709641919909357,-.3976845816302308],[-.06256868067170884,-.6769721620122628,-.5011454623726946],[-.11204301087094687,-.8565196364723835,-.32028962444107667],[-.12241249136023896,-.7232612892861385,-.3597764448083851],[-.10270766375722834,-.9002413380965681,-.33380131050760065],[-.08204717371623016,-.9101598490507312,-.413349793349582],[.13048358825780237,-.9546151482356457,-.41622589000772553],[.13346652021647087,-.958536249375217,-.5009846822849621],[.04798418570308527,-.9756241354622152,-.3987578468415579],[-.08720121785454632,-.9262443600483095,-.3680969861084156],[-.21179569784386576,-.8715243326505318,-.3265818080735104],[-.2193511682290395,-.8426875895905401,-.35474862571230337],[-.19416174854460033,-.909378787557864,-.3298906555784211],[-.1924488602128539,-.932054401327302,-.39099745248387646],[-.18823163802592574,-.9382437395312353,-.3582642004046108],[-.2750072921469279,-.8740381385655331,-.32588829577249834],[-.2801507449885968,-.8540190955864513,-.3531126330959411],[-.2821261772628692,-.8679019848375231,-.38047982856447427],[-.2675889697263625,-.9079510558978845,-.32710078160922584],[-.2765896650286004,-.9321858494747322,-.3837428909924891],[-.26883188222351695,-.9344988974654178,-.35078252710693714],[-.4267743033031933,-.8256152484594821,-.3125861453487443],[-.41525332502097906,-.8035847918147783,-.3492709045014004],[-.4280193610042675,-.8188384767338728,-.38258437724278593],[-.4226837621438738,-.8719605448408216,-.32197409659336446],[-.4306821186870878,-.8817829672406664,-.38352406982937093],[-.42711614724762226,-.8939579425458928,-.3496974477290955],[.008775288421379646,-.8553944303816083,-.5010269360786841],[-.09516815286015318,-.8814535385343818,-.42935742935838395],[-.05679333573437484,-.7560765047364248,-.5010469728121367],[-.12058950328722012,-.7788019867245188,-.41608177790285594],[-.2159641088691417,-.8602680849679791,-.3862440122234432],[-.21207272968532798,-.9019510759839108,-.3946854725540805],[-.28562601009646116,-.9074875674915717,-.39227286430224995],[-.4302202987727124,-.8450427955017354,-.38708264186980895],[.047167515897811096,-.6791209516351804,-.3398766109147567],[.1709339679007159,-.6310600310098489,-.3169962700755864],[.231705004121167,-.604650394463928,-.3798302877621651],[.2622930004641656,-.60038373931711,-.43731419796280585],[.28546111989100476,-.603102427751403,-.5010424340581925],[.2409513926336917,-.934164038387858,-.4528639521127373],[.27376094972001586,-.941379177870981,-.5010327615914043],[.049126511972002684,-.08819054030379636,-.36489817616495357],[.018218496802715256,-.08854790847755756,-.5010668748125175],[-.46377085281879393,-.7895889218239331,-.2971575278588029],[-.45636754682566677,-.7549061146403834,-.3498977496680369],[-.45828259990024145,-.877163130694887,-.3169331782810771],[-.4583390565893903,-.8942146208583772,-.3520752870961398],[-.4644544163480042,-.788427029637139,-.4077718797159925],[-.46387807156156546,-.8406193642926086,-.40818318888686617],[-.46217133385071935,-.8838545917022967,-.390958071928828],[-.49951540413434625,-.7913033024714498,-.3031468957495216],[-.49959904053125,-.7614625625238005,-.3510575484674311],[-.49896611178133565,-.7953574891604771,-.3519750117670216],[-.49996629788781516,-.8805045915173604,-.31976269188791984],[-.49952915429558187,-.8451740156564786,-.35314405463354825],[-.49990291025336314,-.889536542544342,-.35328441522238424],[-.49966809009205,-.7952897131525778,-.4044108633389465],[-.49965027767758863,-.8429828193937563,-.4015198538864043],[-.4997033879911181,-.8820197065563317,-.3935165022306816],[-.49965733022978676,-.8450465262911612,-.302257786449566],[-.463179983861855,-.8383702371607491,-.29531634182403005],[-.10272930233589711,-.16585560664736737,-.44868022412420827],[-.13205952520386238,-.19296169867262497,-.3831356739235531],[-.16003569950300478,-.3415203138292653,-.43662639584227586],[-.15760469638664498,-.30427682750690266,-.36785071255310703],[-.30677624915600726,-.232708306343606,-.415839509764528],[-.3094584587603607,-.23335704917151023,-.38487470887119096],[-.30205394026067023,-.3101054812798075,-.4024668836921931],[-.30504232331722175,-.2984135602987709,-.37090520312562025],[-.4234108463680647,-.24053069398557692,-.413733981753992],[-.41847725561324045,-.22793260570626633,-.38376743129626667],[-.42432253212569737,-.3068465952632886,-.39068407653542603],[-.4246738325849899,-.2931137252003436,-.3637795093189772],[-.051220282490342606,-.6930680519175892,-.34476092934090247],[.2719064157497424,-.20831020782295456,-.5016535894660049],[.2511784813265716,-.21130271547448226,-.42484384776810785],[.21959461292622018,-.21522704996488917,-.3620583303440626],[.12108154291979645,-.2197703431476189,-.3193187072196598],[.017971725808816563,-.23448179927691126,-.3169183587564141],[-.08431503770164961,-.23733875491264045,-.3216714052112969],[-.1516474961914186,-.2578748645795091,-.3571408700718523],[-.3083902922945819,-.26226681207120506,-.36120380338942204],[-.4237945736054485,-.256448086343494,-.3555723322009665],[-.42830959569497495,-.28334042486127,-.41496676412152544],[-.3020111190887069,-.27108235658489127,-.42389026317256434],[-.1076786919476086,-.22509585851325942,-.501982106565876],[-.5,-.21596079261187445,-.33077423087406194],[-.49999734926115896,-.185241741926996,-.38373594757883583],[-.4999942979158492,-.22088300964060242,-.38520442774998653],[-.4996264874179352,-.30819492328832554,-.3853031796734226],[-.4999790590012291,-.2835335968470868,-.3437950694118182],[-.4999947817526028,-.22138880105368064,-.43861549213281975],[-.49998963119053463,-.28295841275069156,-.42676496596632524],[-.45393069880587344,-.28608431685079405,-.3407934316895016],[-.45779052172912854,-.31559875780995467,-.3845846296300429],[-.45572155027331196,-.21269214436302508,-.4416028595855832],[-.45459817330568564,-.17278154777017896,-.38287177238820835],[-.4550752739117502,-.28277373867412203,-.42454726037207285],[-.45428692183454705,-.21439535336887278,-.3278947765054353],[-.22387354826437772,-.258915423203538,-.3567911707430216],[-.2216229702699638,-.3012862681565195,-.37382199647841524],[-.22169967944587665,-.3157089611842667,-.41712619685761],[-.22315190995641787,-.2634123716909581,-.4379340168093574],[-.21796864130093413,-.20472491918490737,-.4234266659515598],[-.22136836461827125,-.22076128227228675,-.38601531483165097],[-.02890937411386968,-.1216716394867371,-.36486806040364544],[.3824839467879616,-.0681177739569852,-.500636049440301],[.34634768622400336,-.07018745011747107,-.4531830796948856],[.2012077074144275,-.07321005280369897,-.39566503277100007],[.1407647319441383,-.061373252833299696,-.40000969250672597],[.09443549868393697,-.05275910876877471,-.5012453470437112],[.4385008380433101,.015364940330685029,-.49941540699516873],[.4366655383651865,.01783509600940625,-.47237079397524157],[.30078032161773516,.011838515259131266,-.3857192974173338],[.23099366693734358,.00789565118124369,-.4234622742639669],[.2013940810728465,.015051305299635609,-.5011811777894433],[.42289594075300685,.09580283300843684,-.5010181272020051],[.42208818338913834,.07572583843360992,-.46825062931155204],[.32322392173811354,.10887145674075316,-.40441861509030863],[.25354985399194485,.11311551988493806,-.4200373992079185],[.21850232068882236,.11390259209410225,-.5036258164432295],[.37841357261814845,.1460189270519252,-.5011937110923375],[.3790469777561918,.12570971156195965,-.4623441212176466],[.34349205709118114,.20098526945822714,-.5045958380484868],[.3353287582021377,.17853677785837951,-.46196078778581334],[.28469796618738064,.18731938779208046,-.45704552453404257],[.2517401724012108,.19016755534605145,-.504213288989222],[.2952965586006234,.20770433830738666,-.5034788011559114],[.21990634110934093,-.14534830696550788,-.39642938861788357],[.29191546850380656,-.06299651931239891,-.413714757825146],[.37619599138354365,.014600252858074758,-.3898211138513619],[.3884891912603471,.08487655292397467,-.39827697917450383],[.4472388443167665,.03054821696267429,-.3776938097443522],[.45035853043449303,.07633196735563008,-.3874609957340894],[.46825827775372786,.03383881468931116,-.4202576764152431],[.46514116173538356,.07918519220193365,-.4172287521135995],[.499099304526217,.06935808558869894,-.3669188960775318],[.4976656865095882,.0721331711231431,-.3679765748797028],[.5,.06954023101910223,-.36926747983749664],[.49912202088849766,.07276230657995475,-.37004048904318687],[.014025711286525078,-.3769411540676397,-.6762976767373217],[.1166960414031637,-.3541797839579317,-.6952468329421674],[.1997245942580851,-.3349985311975949,-.6496201591473352],[.2131222736177436,-.45565539094083046,-.6375479774540894],[.14562798177333314,-.4804601092373136,-.6833074155359549],[.02779211700108508,-.5221509297293871,-.6575783682510077],[.22611155589494125,-.733508234069406,-.6068996148655231],[.18478332150017285,-.7556419714013765,-.6679505431993294],[.09560634476535268,-.7898673838013418,-.7031108188862343],[.22231386097892714,-.8421591854482209,-.5880210534872538],[.19315857068180886,-.8606810004509666,-.6313146055716296],[.12489440971280819,-.9049104210627661,-.6673919818424863],[.24086143915531777,-.839423542648649,-.5506863856349979],[.20505381968654335,-.9317840020003741,-.5513094948305568],[.18648895551914713,-.9240108193256059,-.5691943915352168],[.04060605217527735,-.9273373155371607,-.666763229827921],[-.007180800513524488,-.8276637005734577,-.7007530843288725],[-.044430577361390944,-.5218498187511735,-.5994006037603241],[-.09172272737235188,-.3602500685259711,-.6433657393945322],[.15781937255203238,-.13131382330410718,-.6561658188313297],[.2976272242080412,-.14265525734521217,-.5587326776406795],[.23243192771414645,-.32559754291659293,-.581638175400213],[.24393950624434035,-.4369945159438957,-.5735269365686133],[.2523594834458682,-.7309077702066902,-.5505988053532309],[.24335252870803847,-1.018949627249396,-.5491405123098729],[.20114420108775977,-1.013432660206396,-.5487046628352217],[.2353650743605905,-1.1121492655025969,-.549809339220852],[.19898175263022277,-1.1098628719296966,-.5487457999702915],[.2293866915720696,-1.2196178468059924,-.544796914812803],[.19466017197241614,-1.2189368533761642,-.5423707202694806],[.23087171157634068,-1.3224632753063412,-.5381171747021722],[.19624807885840334,-1.325536119290168,-.5349393763574893],[.24046647291478918,-1.436182545573114,-.532748713804921],[.2055254743763768,-1.446555466679321,-.5317537019017968],[.252759589885161,-1.554674573298902,-.5318923939986953],[.22173674930799536,-1.5634024649876934,-.5321200136068756],[.2687676611527293,-1.6862270170202698,-.5241664835349412],[.24120226749595863,-1.6983844161619797,-.5232911159760367],[.2911469258821232,-1.6794230519850688,-.5009457267822424],[-.05484238158405624,-.672512334879628,-.6046755980191589],[-.11204118692944987,-.858167816334203,-.6822526591855005],[-.12278872074720759,-.7234529275029692,-.6435124526886958],[-.10295783391482594,-.9013768245848719,-.6674776241864128],[-.0820468835437193,-.9101596003314363,-.5887338726235435],[.13201420679949805,-.9545253191169193,-.5885892009002601],[.04599861811753991,-.9755767958897252,-.6012558942517867],[-.08862426530113582,-.9270451947251326,-.6322341933485318],[-.21114270606133784,-.8741242783480497,-.6765369446991532],[-.21932345675425013,-.8432597061489631,-.6477895851358175],[-.19589780922400163,-.9154613008245763,-.6696728310477678],[-.19382369756942086,-.9322362980384101,-.6112669806002257],[-.1909037330456141,-.940904828722118,-.6376876955180799],[-.2750377602605707,-.8769901464251846,-.6774817463945905],[-.27972848180543725,-.8543324404449898,-.6502125359650004],[-.2821780559624936,-.8677616242486872,-.6211630031847952],[-.2700695508888676,-.9143649047188103,-.6730120223066737],[-.2784561997048598,-.933285188758823,-.6178712447681147],[-.27270896004786566,-.9386388715846272,-.644430807232427],[-.42572666654255964,-.8270603075636829,-.6890976214511677],[-.4139749285710651,-.8031217179406238,-.6534145792592979],[-.4275875014016409,-.8185790832357507,-.6190361734029692],[-.4247734809342186,-.8747751767431777,-.6774742226359154],[-.4309104740898493,-.8802124707053322,-.6177584816577245],[-.42932257756716596,-.8942068276537992,-.6478504177300635],[-.09504026968928514,-.8814571864173757,-.5726744719114608],[-.12047770396409818,-.7789066353679084,-.5859783789152361],[-.21665867822715762,-.8602362488982136,-.6158060559182437],[-.21216902550572553,-.90201317290124,-.6074334493791174],[-.2855788985166584,-.9073714570340023,-.6098593848398407],[-.43029517364382436,-.8450573663071035,-.6150858166563185],[.047357951971382484,-.6792039409732931,-.662085897671771],[.17010888309262606,-.6312954749125191,-.6853874550004009],[.2292896910470028,-.6048164767731931,-.6279650613720673],[.2614418001300962,-.5997977877479002,-.5652052604867992],[.24063037893022265,-.9342026727850214,-.5488849532342162],[.047794868866341655,-.08709733609564996,-.6391417292435102],[-.46269711089548465,-.7894318141358975,-.7047319090715018],[-.4562206521736839,-.7544916653884097,-.6527699817529777],[-.45818819538281663,-.8776880113138599,-.6840246598030355],[-.4596655154522453,-.8945779997484353,-.647003124361587],[-.4650906221689427,-.7882718080704241,-.5939648850203716],[-.463919252740677,-.8408684981198102,-.5938237782736504],[-.4626553545530033,-.8834295718802838,-.6111947172817116],[-.49956175287782156,-.7910449867569396,-.701991851504443],[-.4994893809065426,-.7629113316908189,-.6509875556516588],[-.4992063691148421,-.7965032353197015,-.6498371460056525],[-.4999477326764771,-.8804072593665668,-.6821375850583272],[-.4994203452714323,-.8450264007548706,-.6487087272906495],[-.4997690715831771,-.8893797250288173,-.648749164902702],[-.49950178254285044,-.7969555313577374,-.5970185050753521],[-.4995649540052589,-.8423817477640687,-.6016025156793413],[-.4996591523900909,-.8819662319078974,-.6088373247133806],[-.4996434631575284,-.8445155313228518,-.6999270046436026],[-.46008564897644105,-.8361049640013197,-.7073144236917588],[-.10073992105449436,-.17157981904296205,-.555338224063406],[-.1309199763004063,-.19583428217072602,-.6189802841047122],[-.1603829738187088,-.33934092136975347,-.5731183684916371],[-.1550045641496558,-.30652694951594234,-.635000957149896],[-.3073782534830513,-.23318661427458193,-.5859535225306877],[-.30983226313420265,-.23310039158563362,-.6162887164368828],[-.30155925830943725,-.31064435235912646,-.6003238186936125],[-.3041533383769137,-.2944227348501558,-.6326613687377685],[-.42350301241183413,-.24037246706071363,-.5880192813622765],[-.4187311461969597,-.22861152647530247,-.617957208374464],[-.42394422489628475,-.30679386677273945,-.6121638105616315],[-.42450341841466954,-.29365396423578527,-.6381033676399208],[-.050511349593037935,-.6930275313991051,-.6577023859094986],[.25107791582494254,-.2106731033056884,-.5776820566565604],[.2192018022529154,-.21441363423705845,-.6407266204080451],[.12002829961172035,-.21854890341626987,-.6841317334595516],[.018076934070619832,-.23520737564037597,-.6855676521296596],[-.08445946070563803,-.23725284312281097,-.6836694057432822],[-.15250342219209378,-.25917744898086603,-.6452775202558816],[-.30830547901497224,-.26038023476508687,-.6396968292568307],[-.42320864794449853,-.2558019757947956,-.6466892406112426],[-.42830960605827895,-.28334042486127,-.5871181039948594],[-.30200867334897236,-.2710837038144061,-.5781968019642602],[-.4999985122181752,-.21595045003452223,-.6713120051984457],[-.49999734926115896,-.185241741926996,-.6183489205375491],[-.4999942979158492,-.22088300964060242,-.6168804403663984],[-.4995978163659697,-.30772459510139893,-.6161100012600903],[-.49998198436762503,-.2836024506385979,-.6582798913859809],[-.4999947817526028,-.22138880105368064,-.5634693759835652],[-.4999928085147582,-.28288149630869946,-.5752844441055601],[-.45392641357968594,-.286066927226749,-.661290731722214],[-.45751414795746775,-.31472307935193145,-.6155342989984971],[-.4557215088200961,-.21269243453553593,-.5604824956060879],[-.4545633785126395,-.17269791590722067,-.6192779389210551],[-.4550770201284675,-.2827709820352686,-.5775334054245562],[-.45481834169831864,-.21375772000281373,-.6741556647151941],[-.22337188144627562,-.25835456119321565,-.6445138380237555],[-.2199321557756524,-.30128678632171746,-.6291575149422399],[-.21785663471173305,-.31708638936682365,-.5861226827412289],[-.22315190995641787,-.2634123716909581,-.5641508616703315],[-.2178508312615154,-.20608462611769252,-.578587260167566],[-.22106061594387116,-.2214999371253491,-.6155040174243256],[-.029719618670688674,-.122189721778312,-.6385841005840235],[.34666016056500926,-.07014748921740083,-.5495322503812179],[.2019645602292438,-.07246750134834762,-.6066075769599266],[.14036450114519805,-.06075821146987381,-.6026488155737642],[.43659929612627335,.01781901216166004,-.529588631528358],[.29904542162837733,.012538991700404511,-.6157889979199253],[.22906095220199474,.010646362224773553,-.5769670094099192],[.4226667873758404,.07812415568927944,-.5327075403982874],[.3214059495042114,.11018668437294143,-.5972140813476878],[.2518522618968436,.11460327580145468,-.57895484137738],[.37855998537649727,.1268128230886919,-.538634003033968],[.3352456859575933,.1802060159538459,-.5380595858220658],[.2827380581424406,.18843995112268164,-.5398540903541502],[.21984714591712073,-.1446188547263621,-.6069750804449607],[.2922245436811136,-.06272404732467912,-.5887529100129183],[.37621986843586774,.014609579831638908,-.6122796722999058],[.3901393608765269,.08566321060098037,-.6027022591322865],[.44725144609438205,.030569150836673664,-.6243769020988232],[.45060832751314794,.07707485043670814,-.6142136202684257],[.4682288459704811,.03379727856703896,-.5817703593422244],[.46533209524754504,.07914506548900002,-.5846038006412682],[.499099304526217,.06935808558869894,-.6351659720388532],[.4976657694160199,.07213312966992724,-.6341083243265939],[.5,.06954023101910223,-.6328173882788882],[.4991221037949293,.07276230657995475,-.632044399799806],[-.07365745736226581,-.40672151740641727,-.3965094555042796],[-.07860183113486058,-.4044202110391185,-.6115684698390338]]}},function(t,e){t.exports="#include <fog_pars_vertex>\n\n // for animation, all between 0 and 1\nuniform float animation_time_x;\nuniform float animation_time_y;\nuniform float animation_time_z;\nuniform float animation_time_vx;\nuniform float animation_time_vy;\nuniform float animation_time_vz;\nuniform float animation_time_size;\nuniform float animation_time_color;\n\nuniform vec2 xlim;\nuniform vec2 ylim;\nuniform vec2 zlim;\n\nvarying vec4 vertex_color;\nvarying vec3 vertex_position;\nvarying vec2 vertex_uv;\n\n#ifdef AS_LINE\nattribute vec3 position_previous;\n#else\nattribute float x;\nattribute float x_previous;\nattribute float y;\nattribute float y_previous;\nattribute float z;\nattribute float z_previous;\n\nattribute vec3 v;\nattribute vec3 v_previous;\n\n\nattribute float size;\nattribute float size_previous;\n#endif\n\nattribute vec4 color;\nattribute vec4 color_previous;\n\n\n\nvoid main(void) {\n    vec3 origin = vec3(xlim.x, ylim.x, zlim.x);\n    vec3 size_viewport = vec3(xlim.y, ylim.y, zlim.y) - origin;\n    vec3 animation_time = vec3(animation_time_x, animation_time_y, animation_time_z);\n    vec3 animation_time_v = vec3(animation_time_vx, animation_time_vy, animation_time_vz);\n\n#ifdef AS_LINE\n    vec3 model_pos = (mix(position_previous, position, animation_time) - origin) / size_viewport - 0.5;\n    vec4 view_pos = modelViewMatrix * vec4(model_pos, 1.0);\n#else\n    vec3 vector = v;\n    vec3 vector_previous = v_previous;\n    vec3 position_offset = vec3(x, y, z);\n    vec3 position_offset_previous = vec3(x_previous, y_previous, z_previous);\n\n    // assume the vector points to the y axis\n    vec3 vector_current = mix(normalize(vector_previous), normalize(vector), animation_time_v)\n           * mix(length(vector_previous), length(vector), (animation_time_vx+ animation_time_vy+ animation_time_vz)/3.);\n    vec3 y_axis = normalize(vector_current);\n    // we may have bad luck, and alight with 1 vector, so take two vectors, and we'll always find a non-zero vector\n    vec3 some_z_vector_a = vec3(0., 1., 1.);\n    vec3 some_z_vector_b = normalize(vec3(0., 2., 1.));\n    vec3 x_axis = normalize(cross(y_axis, some_z_vector_a)  + cross(y_axis, some_z_vector_b));\n    vec3 z_axis = -normalize(cross(y_axis, x_axis)); // - to keep it right handed\n    //float vector_length = length(vector_current);\n    // the following matrix should point it to the direction of 'vector'\n    mat3 move_to_vector = mat3(x_axis, y_axis, z_axis);\n\n    float s = mix(size_previous/100., size/100., animation_time_size);\n    vec3 model_pos = (mix(position_offset_previous, position_offset, animation_time) - origin) / size_viewport - 0.5;\n    //vec3 pos = (pos_object ) / size;// - 0.5;\n    #ifdef USE_SPRITE\n        // if we are a sprite, we add the position in view coordinates, and need to \n        vec4 view_pos = modelViewMatrix * vec4(model_pos, 1.0);\n        view_pos += vec4((position.xy)*(s*0.5),0,0);\n    #else\n        model_pos += move_to_vector * (position)*s;\n        vec4 view_pos = modelViewMatrix * vec4(model_pos, 1.0);\n    #endif\n#endif\n    vec4 mvPosition = view_pos;\n    gl_Position = projectionMatrix * view_pos;\n    vec3 positionEye = ( modelViewMatrix * vec4( model_pos, 1.0 ) ).xyz;\n    vertex_position = positionEye;\n    vertex_uv = position.xy / 2. - 0.5;\n#ifdef USE_RGB\n    vertex_color = vec4(model_pos + vec3(0.5, 0.5, 0.5), 1.0);\n#else\n    vertex_color = mix(color_previous, color, animation_time_color);\n#endif\n\n    #include <fog_vertex>\n}\n"},function(t,e){t.exports="#include <fog_pars_fragment>\n\nvarying vec4 vertex_color;\nvarying vec3 vertex_position;\nvarying vec2 vertex_uv;\n\n#ifdef USE_TEXTURE\nuniform sampler2D texture;\nuniform sampler2D texture_previous;\nuniform float animation_time_texture;\n#endif\n\n\nvoid main(void) {\n#ifdef USE_RGB\n    gl_FragColor = vertex_color;\n#else\n #ifdef AS_LINE\n    gl_FragColor = vertex_color;\n #else\n  #ifdef USE_SPRITE\n   #ifdef USE_TEXTURE\n    gl_FragColor = mix(texture2D(texture_previous, vertex_uv), texture2D(texture, vertex_uv), animation_time_texture);\n   #else\n    gl_FragColor = vertex_color;\n   #endif\n  #else\n    vec3 fdx = dFdx( vertex_position );\n    vec3 fdy = dFdy( vertex_position );\n    vec3 normal = normalize( cross( fdx, fdy ) );\n    float diffuse = dot( normal, vec3( 0.0, 0.0, 1.0 ) );\n\n    gl_FragColor = vec4(clamp(diffuse, 0.2, 1.) * vertex_color.rgb, vertex_color.a);\n  #endif\n #endif\n#endif\n\t#include <fog_fragment>\n}\n"},function(t,e){t.exports=" // for animation, all between 0 and 1\nuniform float animation_time_x;\nuniform float animation_time_y;\nuniform float animation_time_z;\nuniform float animation_time_u;\nuniform float animation_time_v;\nuniform float animation_time_color;\n\nuniform vec2 xlim;\nuniform vec2 ylim;\nuniform vec2 zlim;\n\nvarying vec4 vertex_color;\nvarying vec3 vertex_position;\n\nattribute vec3 position_previous;\n\n#ifdef USE_TEXTURE\n    attribute float u;\n    attribute float v;\n    attribute float u_previous;\n    attribute float v_previous;\n    varying vec2 vertex_uv;\n#endif\n\nattribute vec4 color;\nattribute vec4 color_previous;\n\n\n\nvoid main(void) {\n    vec3 origin = vec3(xlim.x, ylim.x, zlim.x);\n    vec3 size_viewport = vec3(xlim.y, ylim.y, zlim.y) - origin;\n\n    vec3 pos = (mix(position_previous, position, vec3(animation_time_x, animation_time_y, animation_time_z))\n                - origin) / size_viewport - 0.5;\n    gl_Position = projectionMatrix *\n                modelViewMatrix *\n                vec4(pos,1.0);\n    vec3 positionEye = ( modelViewMatrix * vec4( pos, 1.0 ) ).xyz;\n    vertex_position = positionEye;\n#ifdef USE_TEXTURE\n    vertex_uv = vec2(mix(u_previous, u, animation_time_u), mix(v_previous, v, animation_time_v));\n#endif\n\n#ifdef USE_RGB\n    vertex_color = vec4(pos + vec3(0.5, 0.5, 0.5), 1.0);\n#else\n    vertex_color = mix(color_previous, color, animation_time_color);\n#endif\n}\n"},function(t,e){t.exports="varying vec4 vertex_color;\nvarying vec3 vertex_position;\nvarying vec2 vertex_uv;\n\n#ifdef USE_TEXTURE\n    uniform sampler2D texture;\n    uniform sampler2D texture_previous;\n    uniform float animation_time_texture;\n#endif\n\n\nvoid main(void) {\n#ifdef USE_RGB\n    gl_FragColor = vec4(vertex_color.rgb, 1.0);\n#else\n#ifdef AS_LINE\n    gl_FragColor = vec4(vertex_color.rgb, vertex_color.a);\n#else\n    vec3 fdx = dFdx( vertex_position );\n    vec3 fdy = dFdy( vertex_position );\n    vec3 normal = normalize( cross( fdx, fdy ) );\n    float diffuse = dot( normal, vec3( 0.0, 0.0, 1.0 ) );\n\n#ifdef USE_TEXTURE\n    vec4 sample = mix(texture2D(texture_previous, vertex_uv), texture2D(texture, vertex_uv), animation_time_texture);\n    gl_FragColor = vec4(clamp(diffuse, 0.2, 1.) * sample.rgb, 1.0);\n#else\n    gl_FragColor = vec4(clamp(diffuse, 0.2, 1.) * vertex_color.rgb, vertex_color.a);\n#endif // USE_TEXTURE\n#endif // AS_LINE\n#endif // USE_RGB\n}\n"},function(t,e){t.exports="varying vec4 vertex_color;\n\nvoid main(void) {\n    gl_FragColor = vertex_color;\n}\n"},function(t,e){t.exports="varying vec4 vertex_color;\nuniform vec3 scale;\nuniform vec3 offset;\n\nvoid main(void) {\n    vec3 pos = position;\n    gl_Position = projectionMatrix *\n                modelViewMatrix *\n                vec4(pos,1.0);\n    //vertex_color = vec4((pos + vec3(0.5, 0.5, 0.5))*scale + offset, 1);\n    vertex_color = vec4((pos + vec3(0.5, 0.5, 0.5)), 1);\n}\n"},function(t,e){THREE.OrbitControls=function(t,e){this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),s=a.NONE},this.update=function(){var e=new THREE.Vector3,i=(new THREE.Quaternion).setFromUnitVectors(t.up,new THREE.Vector3(0,1,0)),o=i.clone().inverse(),p=new THREE.Vector3,_=new THREE.Quaternion;return function(){var t=n.object.position;return e.copy(t).sub(n.target),e.applyQuaternion(i),c.setFromVector3(e),n.autoRotate&&s===a.NONE&&E(2*Math.PI/60/60*n.autoRotateSpeed),c.theta+=l.theta,c.phi+=l.phi,c.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=h,c.radius=Math.max(n.minDistance,Math.min(n.maxDistance,c.radius)),n.target.add(f),e.setFromSpherical(c),e.applyQuaternion(o),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor):l.set(0,0,0),h=1,f.set(0,0,0),!!(d||p.distanceToSquared(n.object.position)>u||8*(1-_.dot(n.object.quaternion))>u)&&(n.dispatchEvent(r),p.copy(n.object.position),_.copy(n.object.quaternion),d=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",q,!1),n.domElement.removeEventListener("mousedown",R,!1),n.domElement.removeEventListener("wheel",P,!1),n.domElement.removeEventListener("touchstart",L,!1),n.domElement.removeEventListener("touchend",U,!1),n.domElement.removeEventListener("touchmove",z,!1),document.removeEventListener("mousemove",j,!1),document.removeEventListener("mouseup",N,!1),window.removeEventListener("keydown",I,!1)};var n=this,r={type:"change"},i={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},s=a.NONE,u=1e-6,c=new THREE.Spherical,l=new THREE.Spherical,h=1,f=new THREE.Vector3,d=!1,p=new THREE.Vector2,_=new THREE.Vector2,m=new THREE.Vector2,v=new THREE.Vector2,g=new THREE.Vector2,y=new THREE.Vector2,b=new THREE.Vector2,w=new THREE.Vector2,x=new THREE.Vector2;function M(){return Math.pow(.95,n.zoomSpeed)}function E(t){l.theta-=t}function S(t){l.phi-=t}var A=function(){var t=new THREE.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),f.add(t)}}(),k=function(){var t=new THREE.Vector3;return function(e,n){t.setFromMatrixColumn(n,1),t.multiplyScalar(e),f.add(t)}}(),T=function(){var t=new THREE.Vector3;return function(e,r){var i=n.domElement===document?n.domElement.body:n.domElement;if(n.object instanceof THREE.PerspectiveCamera){var o=n.object.position;t.copy(o).sub(n.target);var a=t.length();a*=Math.tan(n.object.fov/2*Math.PI/180),A(2*e*a/i.clientHeight,n.object.matrix),k(2*r*a/i.clientHeight,n.object.matrix)}else n.object instanceof THREE.OrthographicCamera?(A(e*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),k(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function O(t){n.object instanceof THREE.PerspectiveCamera?h/=t:n.object instanceof THREE.OrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function C(t){n.object instanceof THREE.PerspectiveCamera?h*=t:n.object instanceof THREE.OrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(t){if(!1!==n.enabled){if(t.preventDefault(),t.button===n.mouseButtons.ORBIT){if(!1===n.enableRotate)return;!function(t){p.set(t.clientX,t.clientY)}(t),s=a.ROTATE}else if(t.button===n.mouseButtons.ZOOM){if(!1===n.enableZoom)return;!function(t){b.set(t.clientX,t.clientY)}(t),s=a.DOLLY}else if(t.button===n.mouseButtons.PAN){if(!1===n.enablePan)return;!function(t){v.set(t.clientX,t.clientY)}(t),s=a.PAN}s!==a.NONE&&(document.addEventListener("mousemove",j,!1),document.addEventListener("mouseup",N,!1),n.dispatchEvent(i))}}function j(t){if(!1!==n.enabled)if(t.preventDefault(),s===a.ROTATE){if(!1===n.enableRotate)return;!function(t){_.set(t.clientX,t.clientY),m.subVectors(_,p);var e=n.domElement===document?n.domElement.body:n.domElement;E(2*Math.PI*m.x/e.clientWidth*n.rotateSpeed),S(2*Math.PI*m.y/e.clientHeight*n.rotateSpeed),p.copy(_),n.update()}(t)}else if(s===a.DOLLY){if(!1===n.enableZoom)return;!function(t){w.set(t.clientX,t.clientY),x.subVectors(w,b),x.y>0?O(M()):x.y<0&&C(M()),b.copy(w),n.update()}(t)}else if(s===a.PAN){if(!1===n.enablePan)return;!function(t){g.set(t.clientX,t.clientY),y.subVectors(g,v),T(y.x,y.y),v.copy(g),n.update()}(t)}}function N(t){!1!==n.enabled&&(document.removeEventListener("mousemove",j,!1),document.removeEventListener("mouseup",N,!1),n.dispatchEvent(o),s=a.NONE)}function P(t){!1===n.enabled||!1===n.enableZoom||s!==a.NONE&&s!==a.ROTATE||(t.preventDefault(),t.stopPropagation(),function(t){t.deltaY<0?C(M()):t.deltaY>0&&O(M()),n.update()}(t),n.dispatchEvent(i),n.dispatchEvent(o))}function I(t){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(t){switch(t.keyCode){case n.keys.UP:T(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:T(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:T(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:T(-n.keyPanSpeed,0),n.update()}}(t)}function L(t){if(!1!==n.enabled){switch(t.touches.length){case 1:if(!1===n.enableRotate)return;!function(t){p.set(t.touches[0].pageX,t.touches[0].pageY)}(t),s=a.TOUCH_ROTATE;break;case 2:if(!1===n.enableZoom)return;!function(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);b.set(0,r)}(t),s=a.TOUCH_DOLLY;break;case 3:if(!1===n.enablePan)return;!function(t){v.set(t.touches[0].pageX,t.touches[0].pageY)}(t),s=a.TOUCH_PAN;break;default:s=a.NONE}s!==a.NONE&&n.dispatchEvent(i)}}function z(t){if(!1!==n.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(!1===n.enableRotate)return;if(s!==a.TOUCH_ROTATE)return;!function(t){_.set(t.touches[0].pageX,t.touches[0].pageY),m.subVectors(_,p);var e=n.domElement===document?n.domElement.body:n.domElement;E(2*Math.PI*m.x/e.clientWidth*n.rotateSpeed),S(2*Math.PI*m.y/e.clientHeight*n.rotateSpeed),p.copy(_),n.update()}(t);break;case 2:if(!1===n.enableZoom)return;if(s!==a.TOUCH_DOLLY)return;!function(t){var e=t.touches[0].pageX-t.touches[1].pageX,r=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+r*r);w.set(0,i),x.subVectors(w,b),x.y>0?C(M()):x.y<0&&O(M()),b.copy(w),n.update()}(t);break;case 3:if(!1===n.enablePan)return;if(s!==a.TOUCH_PAN)return;!function(t){g.set(t.touches[0].pageX,t.touches[0].pageY),y.subVectors(g,v),T(y.x,y.y),v.copy(g),n.update()}(t);break;default:s=a.NONE}}function U(t){!1!==n.enabled&&(n.dispatchEvent(o),s=a.NONE)}function q(t){t.preventDefault()}n.domElement.addEventListener("contextmenu",q,!1),n.domElement.addEventListener("mousedown",R,!1),n.domElement.addEventListener("wheel",P,!1),n.domElement.addEventListener("touchstart",L,!1),n.domElement.addEventListener("touchend",U,!1),n.domElement.addEventListener("touchmove",z,!1),window.addEventListener("keydown",I,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(t){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!t}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(t){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!t}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(t){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!t}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(t){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!t}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(t){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=t}}})},function(t,e){THREE.TrackballControls=function(t,e){var n=this,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new THREE.Vector3;var i=new THREE.Vector3,o=r.NONE,a=r.NONE,s=new THREE.Vector3,u=new THREE.Vector2,c=new THREE.Vector2,l=new THREE.Vector3,h=0,f=new THREE.Vector2,d=new THREE.Vector2,p=0,_=0,m=new THREE.Vector2,v=new THREE.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var g={type:"change"},y={type:"start"},b={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var t=this.domElement.getBoundingClientRect(),e=this.domElement.ownerDocument.documentElement;this.screen.left=t.left+window.pageXOffset-e.clientLeft,this.screen.top=t.top+window.pageYOffset-e.clientTop,this.screen.width=t.width,this.screen.height=t.height}},this.handleEvent=function(t){"function"==typeof this[t.type]&&this[t.type](t)};var w=function(){var t=new THREE.Vector2;return function(e,r){var i=n.domElement===document?n.domElement.body:n.domElement;return t.set(e/i.clientWidth,r/i.clientHeight),t}}(),x=function(){new THREE.Vector2;return function(t,e){return w(2*t*Math.PI,2*-e*Math.PI)}}();function M(t){!1!==n.enabled&&(window.removeEventListener("keydown",M),a=o,o===r.NONE&&(t.keyCode!==n.keys[r.ROTATE]||n.noRotate?t.keyCode!==n.keys[r.ZOOM]||n.noZoom?t.keyCode!==n.keys[r.PAN]||n.noPan||(o=r.PAN):o=r.ZOOM:o=r.ROTATE))}function E(t){!1!==n.enabled&&(o=a,window.addEventListener("keydown",M,!1))}function S(t){!1!==n.enabled&&(t.preventDefault(),t.stopPropagation(),o===r.NONE&&(o=t.button),o!==r.ROTATE||n.noRotate?o!==r.ZOOM||n.noZoom?o!==r.PAN||n.noPan||(m.copy(w(t.pageX,t.pageY)),v.copy(m)):(f.copy(w(t.pageX,t.pageY)),d.copy(f)):(c.copy(x(t.pageX,t.pageY)),u.copy(c)),document.addEventListener("mousemove",A,!1),document.addEventListener("mouseup",k,!1),n.dispatchEvent(y))}function A(t){!1!==n.enabled&&(t.preventDefault(),t.stopPropagation(),o!==r.ROTATE||n.noRotate?o!==r.ZOOM||n.noZoom?o!==r.PAN||n.noPan||v.copy(w(t.pageX,t.pageY)):d.copy(w(t.pageX,t.pageY)):(u.copy(c),c.copy(x(t.pageX,t.pageY))),n.update())}function k(t){!1!==n.enabled&&(t.preventDefault(),t.stopPropagation(),o=r.NONE,document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",k),n.dispatchEvent(b))}function T(t){if(!1!==n.enabled){switch(t.preventDefault(),t.stopPropagation(),t.deltaMode){case 2:f.y-=.025*t.deltaY;break;case 1:f.y-=.01*t.deltaY;break;default:f.y-=25e-5*t.deltaY}n.dispatchEvent(y),n.dispatchEvent(b),n.update()}}function O(t){if(!1!==n.enabled){switch(t.touches.length){case 1:o=r.TOUCH_ROTATE,c.copy(x(t.touches[0].pageX,t.touches[0].pageY)),u.copy(c);break;default:o=r.TOUCH_ZOOM_PAN;var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;_=p=Math.sqrt(e*e+i*i);var a=(t.touches[0].pageX+t.touches[1].pageX)/2,s=(t.touches[0].pageY+t.touches[1].pageY)/2;m.copy(w(a,s)),v.copy(m)}n.dispatchEvent(y)}}function C(t){if(!1!==n.enabled){switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:u.copy(c),c.copy(x(t.touches[0].pageX,t.touches[0].pageY));break;default:var e=t.touches[0].pageX-t.touches[1].pageX,r=t.touches[0].pageY-t.touches[1].pageY;_=Math.sqrt(e*e+r*r);var i=(t.touches[0].pageX+t.touches[1].pageX)/2,o=(t.touches[0].pageY+t.touches[1].pageY)/2;v.copy(w(i,o))}n.update()}}function R(t){if(!1!==n.enabled){switch(t.touches.length){case 0:o=r.NONE;break;case 1:o=r.TOUCH_ROTATE,c.copy(x(t.touches[0].pageX,t.touches[0].pageY)),u.copy(c)}n.dispatchEvent(b),n.update()}}function j(t){t.preventDefault()}this.rotateCamera=function(){var t,e=new THREE.Vector3,r=new THREE.Quaternion,i=new THREE.Vector3,o=new THREE.Vector3,a=new THREE.Vector3,f=new THREE.Vector3;return function(){f.set(c.x-u.x,c.y-u.y,0),(t=f.length())?(s.copy(n.object.position).sub(n.target),i.copy(s).normalize(),o.copy(n.object.up).normalize(),a.crossVectors(o,i).normalize(),o.setLength(c.y-u.y),a.setLength(c.x-u.x),f.copy(o.add(a)),e.crossVectors(f,s).normalize(),t*=n.rotateSpeed,r.setFromAxisAngle(e,t),s.applyQuaternion(r),n.object.up.applyQuaternion(r),l.copy(e),h=t):!n.staticMoving&&h&&(h*=Math.sqrt(1-n.dynamicDampingFactor),s.copy(n.object.position).sub(n.target),r.setFromAxisAngle(l,h),s.applyQuaternion(r),n.object.up.applyQuaternion(r)),u.copy(c)}}(),this.zoomCamera=function(){var t;o===r.TOUCH_ZOOM_PAN?(t=p/_,p=_,s.multiplyScalar(t)):(1!==(t=1+(d.y-f.y)*n.zoomSpeed)&&t>0&&s.multiplyScalar(t),n.staticMoving?f.copy(d):f.y+=(d.y-f.y)*this.dynamicDampingFactor)},this.panCamera=function(){var t=new THREE.Vector2,e=new THREE.Vector3,r=new THREE.Vector3;return function(){t.copy(v).sub(m),t.lengthSq()&&(t.multiplyScalar(s.length()*n.panSpeed),r.copy(s).cross(n.object.up).setLength(t.x),r.add(e.copy(n.object.up).setLength(t.y)),n.object.position.add(r),n.target.add(r),n.staticMoving?m.copy(v):m.add(t.subVectors(v,m).multiplyScalar(n.dynamicDampingFactor)))}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(s.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,s.setLength(n.maxDistance)),f.copy(d)),s.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,s.setLength(n.minDistance)),f.copy(d)))},this.update=function(){s.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,s),n.checkDistances(),n.object.lookAt(n.target),i.distanceToSquared(n.object.position)>1e-6&&(n.dispatchEvent(g),i.copy(n.object.position))},this.reset=function(){o=r.NONE,a=r.NONE,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),s.subVectors(n.object.position,n.target),n.object.lookAt(n.target),i.copy(n.object.position)},this.dispose=function(){this.domElement.removeEventListener("contextmenu",j,!1),this.domElement.removeEventListener("mousedown",S,!1),this.domElement.removeEventListener("wheel",T,!1),this.domElement.removeEventListener("touchstart",O,!1),this.domElement.removeEventListener("touchend",R,!1),this.domElement.removeEventListener("touchmove",C,!1),document.removeEventListener("mousemove",A,!1),document.removeEventListener("mouseup",k,!1),window.removeEventListener("keydown",M,!1),window.removeEventListener("keyup",E,!1)},this.domElement.addEventListener("contextmenu",j,!1),this.domElement.addEventListener("mousedown",S,!1),this.domElement.addEventListener("wheel",T,!1),this.domElement.addEventListener("touchstart",O,!1),this.domElement.addEventListener("touchend",R,!1),this.domElement.addEventListener("touchmove",C,!1),window.addEventListener("keydown",M,!1),window.addEventListener("keyup",E,!1),this.handleResize(),this.update()},THREE.TrackballControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.TrackballControls.prototype.constructor=THREE.TrackballControls},function(t,e){THREE.DeviceOrientationControls=function(t){var e=this;this.object=t,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alpha=0,this.alphaOffsetAngle=0;var n=function(t){e.deviceOrientation=t},r=function(){e.screenOrientation=window.orientation||0},i=function(){var t=new THREE.Vector3(0,0,1),e=new THREE.Euler,n=new THREE.Quaternion,r=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(i,o,a,s,u){e.set(a,o,-s,"YXZ"),i.setFromEuler(e),i.multiply(r),i.multiply(n.setFromAxisAngle(t,-u))}}();this.connect=function(){r(),window.addEventListener("orientationchange",r,!1),window.addEventListener("deviceorientation",n,!1),e.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",r,!1),window.removeEventListener("deviceorientation",n,!1),e.enabled=!1},this.update=function(){if(!1!==e.enabled){var t=e.deviceOrientation.alpha?THREE.Math.degToRad(e.deviceOrientation.alpha)+this.alphaOffsetAngle:0,n=e.deviceOrientation.beta?THREE.Math.degToRad(e.deviceOrientation.beta):0,r=e.deviceOrientation.gamma?THREE.Math.degToRad(e.deviceOrientation.gamma):0,o=e.screenOrientation?THREE.Math.degToRad(e.screenOrientation):0;i(e.object.quaternion,t,n,r,o),this.alpha=t}},this.updateAlphaOffsetAngle=function(t){this.alphaOffsetAngle=t,this.update()},this.dispose=function(){this.disconnect()},this.connect()}},function(t,e){THREE.StereoEffect=function(t){var e=new THREE.StereoCamera;e.aspect=.5,this.setEyeSeparation=function(t){e.eyeSep=t},this.setSize=function(e,n){t.setSize(e,n)},this.render=function(n,r){n.updateMatrixWorld(),null===r.parent&&r.updateMatrixWorld(),e.update(r);var i=t.getSize();t.autoClear&&t.clear(),t.setScissorTest(!0),t.setScissor(0,0,i.width/2,i.height),t.setViewport(0,0,i.width/2,i.height),t.render(n,e.cameraL),t.setScissor(i.width/2,0,i.width/2,i.height),t.setViewport(i.width/2,0,i.width/2,i.height),t.render(n,e.cameraR),t.setScissorTest(!1)}}},function(t,e){var n=n||{};window.THREEx=n,n.FullScreen=n.FullScreen||{},n.FullScreen.available=function(){return this._hasWebkitFullScreen||this._hasMozFullScreen},n.FullScreen.activated=function(){return this._hasWebkitFullScreen?document.webkitIsFullScreen:this._hasMozFullScreen?document.mozFullScreen:void console.assert(!1)},n.FullScreen.request=function(t){t=t||document.body,this._hasWebkitFullScreen?t.webkitRequestFullScreen():this._hasMozFullScreen?t.mozRequestFullScreen():console.assert(!1)},n.FullScreen.cancel=function(){this._hasWebkitFullScreen?document.webkitCancelFullScreen():this._hasMozFullScreen?document.mozCancelFullScreen():console.assert(!1)},n.FullScreen.element=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement},n.FullScreen.addFullScreenChangeListener=function(t){document.addEventListener("webkitfullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1),document.addEventListener("fullscreenchange",t,!1),document.addEventListener("MSFullscreenChange",t,!1)},n.FullScreen.removeFullScreenChangeListener=function(t){document.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),document.removeEventListener("fullscreenchange",t,!1),document.removeEventListener("MSFullscreenChange",t,!1)},n.FullScreen._hasWebkitFullScreen="webkitCancelFullScreen"in document,n.FullScreen._hasMozFullScreen="mozCancelFullScreen"in document},function(t,e){THREE.CombinedCamera=function(t,e,n,r,i,o,a){THREE.Camera.call(this),this.fov=n,this.far=i,this.near=r,this.left=-t/2,this.right=t/2,this.top=e/2,this.bottom=-e/2,this.aspect=t/e,this.zoom=1,this.view=null,this.cameraO=new THREE.OrthographicCamera(t/-2,t/2,e/2,e/-2,o,a),this.cameraP=new THREE.PerspectiveCamera(n,t/e,r,i),this.toPerspective()},THREE.CombinedCamera.prototype=Object.create(THREE.Camera.prototype),THREE.CombinedCamera.prototype.constructor=THREE.CombinedCamera,THREE.CombinedCamera.prototype.toPerspective=function(){this.near=this.cameraP.near,this.far=this.cameraP.far,this.cameraP.aspect=this.aspect,this.cameraP.fov=this.fov/this.zoom,this.cameraP.view=this.view,this.cameraP.updateProjectionMatrix(),this.projectionMatrix=this.cameraP.projectionMatrix,this.inPerspectiveMode=!0,this.inOrthographicMode=!1},THREE.CombinedCamera.prototype.toOrthographic=function(){var t=this.fov,e=this.cameraP.aspect,n=(this.cameraP.near+this.cameraP.far)/2,r=Math.tan(t*Math.PI/180/2)*n,i=r*e;r/=this.zoom,i/=this.zoom,this.cameraO.left=-i,this.cameraO.right=i,this.cameraO.top=r,this.cameraO.bottom=-r,this.cameraO.view=this.view,this.cameraO.updateProjectionMatrix(),this.near=this.cameraO.near,this.far=this.cameraO.far,this.projectionMatrix=this.cameraO.projectionMatrix,this.inPerspectiveMode=!1,this.inOrthographicMode=!0},THREE.CombinedCamera.prototype.copy=function(t){return THREE.Camera.prototype.copy.call(this,t),this.fov=t.fov,this.far=t.far,this.near=t.near,this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this.aspect=t.aspect,this.cameraO.copy(t.cameraO),this.cameraP.copy(t.cameraP),this.inOrthographicMode=t.inOrthographicMode,this.inPerspectiveMode=t.inPerspectiveMode,this},THREE.CombinedCamera.prototype.setViewOffset=function(t,e,n,r,i,o){this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:r,width:i,height:o},this.inPerspectiveMode?(this.aspect=t/e,this.toPerspective()):this.toOrthographic()},THREE.CombinedCamera.prototype.clearViewOffset=function(){this.view=null,this.updateProjectionMatrix()},THREE.CombinedCamera.prototype.setSize=function(t,e){this.cameraP.aspect=t/e,this.left=-t/2,this.right=t/2,this.top=e/2,this.bottom=-e/2},THREE.CombinedCamera.prototype.setFov=function(t){this.fov=t,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},THREE.CombinedCamera.prototype.updateProjectionMatrix=function(){this.inPerspectiveMode?this.toPerspective():(this.toPerspective(),this.toOrthographic())},THREE.CombinedCamera.prototype.setLens=function(t,e){void 0===e&&(e=35);var n=.5*e/(t*Math.max(this.cameraP.aspect,1)),r=2*THREE.Math.RAD2DEG*Math.atan(n);return this.setFov(r),r},THREE.CombinedCamera.prototype.setZoom=function(t){this.zoom=t,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},THREE.CombinedCamera.prototype.toFrontView=function(){this.rotation.x=0,this.rotation.y=0,this.rotation.z=0},THREE.CombinedCamera.prototype.toBackView=function(){this.rotation.x=0,this.rotation.y=Math.PI,this.rotation.z=0},THREE.CombinedCamera.prototype.toLeftView=function(){this.rotation.x=0,this.rotation.y=-Math.PI/2,this.rotation.z=0},THREE.CombinedCamera.prototype.toRightView=function(){this.rotation.x=0,this.rotation.y=Math.PI/2,this.rotation.z=0},THREE.CombinedCamera.prototype.toTopView=function(){this.rotation.x=-Math.PI/2,this.rotation.y=0,this.rotation.z=0},THREE.CombinedCamera.prototype.toBottomView=function(){this.rotation.x=Math.PI/2,this.rotation.y=0,this.rotation.z=0}},function(t,e){t.exports="varying  vec2 tex_uv;\n\n#if defined(PANORAMA_360) || defined(PANORAMA_180)\nuniform samplerCube tex;\n#else\nuniform sampler2D tex;\n#endif\n\n\nvoid main(void) {\n\tconst float PI = 3.141592653589793238462643383;\n#if defined(PANORAMA_360)\n\tfloat phi   = (1.-tex_uv.x)* PI * 2.0;\n\tfloat theta = (1.-tex_uv.y) * PI;\n    vec3 uvw = vec3(sin(phi) * sin(theta),\n                               cos(theta),\n                    cos(phi) * sin(theta)\n                    );\n    gl_FragColor = textureCube(tex, uvw);\n#elif defined(PANORAMA_180)\n\tfloat x = (tex_uv.x-0.5)*2.;\n\tfloat y = (tex_uv.y-0.5)*2.;\n\tfloat r = sqrt(x*x + y*y);\n\tif(r > 1.)\n\t\tdiscard;\n\tfloat theta = r * PI/2.;\n\tfloat phi = atan(y, x);\n\tvec3 uvw = vec3(cos(phi) * sin(theta),\n\t\t\t\t\tsin(phi) * sin(theta),\n\t\t\t\t\t          -cos(theta));\n    gl_FragColor = textureCube(tex, uvw);\n#else\n    gl_FragColor = texture2D(tex, tex_uv);\n#endif\n}\n"},function(t,e){t.exports="varying vec2 tex_uv;\n\nvoid main(void) {\n    gl_Position = projectionMatrix *\n                modelViewMatrix *\n                vec4(position,1.0);\n    tex_uv = vec2(position.x+0.5, position.y+0.5);\n}\n"},function(t,e){t.exports="precision highp float;\nuniform sampler2D back_tex;\nuniform sampler2D geometry_depth_tex;\n\n// samplers in structs has bad support\n\nstruct Volume\n{\n    float opacity_scale;\n    float brightness;\n    vec2 data_range;\n    vec2 show_range;\n    float rows;\n    float columns;\n    float slices;\n    vec2 size;\n    vec2 slice_size;\n    bool clamp_min;\n    bool clamp_max;\n    vec3 scale;\n    vec3 offset;\n    bool lighting;\n};\n\n#if (VOLUME_COUNT > 0)\nuniform sampler2D data[VOLUME_COUNT];\nuniform sampler2D transfer_function[VOLUME_COUNT];\nuniform Volume volumes[VOLUME_COUNT];\n#endif\n\n#if (VOLUME_COUNT_MAX_INT > 0)\nuniform Volume volumes_max_int[VOLUME_COUNT_MAX_INT];\nuniform sampler2D data_max_int[VOLUME_COUNT_MAX_INT];\nuniform sampler2D transfer_function_max_int[VOLUME_COUNT_MAX_INT];\nfloat max_values[VOLUME_COUNT_MAX_INT];\nfloat max_depth[VOLUME_COUNT_MAX_INT];\nbool  has_values[VOLUME_COUNT_MAX_INT];\n// for MAX_INT, we cannot add the coordinate directly, we do it after we found the max\nvec4  max_weighted_coordinate[VOLUME_COUNT_MAX_INT];\nvec4  max_colors[VOLUME_COUNT_MAX_INT];\n#endif\n\nstruct Layer {\n    float depth;\n    vec4 color;\n    bool skip;\n};\n\nLayer layers[VOLUME_COUNT_MAX_INT+1];\n\n\n//uniform float brightness;\n\n//uniform sampler2D colormap;\n//uniform int colormap_index;\n//uniform int surfaces;\n//uniform float opacity[4];\n//uniform float level[4];\n//uniform float width[4];\nuniform vec2 render_size;\n\nvarying vec3 front;\n\n// for lighting\nuniform mat3 mvMatrix;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvec3 light_dir;\nvec3 eye;\n//uniform float color_index;\n\nuniform int steps;\n\n\n\nvec2 compute_slice_offset(float slice, float columns, vec2 uv_slice_spacing) {\n    return uv_slice_spacing * vec2(mod(slice, columns), floor(slice / columns));\n}\nvec4 sample_as_3d_texture(sampler2D tex, vec2 tex_size, vec3 texCoord, vec2 slice_size, float slices, float rows, float columns) {\n  float slice   = texCoord.z*slices*(slices-1.)/slices ;\n  float slice_z  = floor(slice);\n  float slice_z_offset = fract(slice);\n\n  vec2 pixel = 1./tex_size;\n  vec2 uv_slice_spacing = slice_size/tex_size;\n\n  vec2 coord = vec2(texCoord.x, texCoord.y);\n  vec2 uv = pixel * 0.5 + coord * (uv_slice_spacing - pixel);\n\n  vec2 slice0_offset = compute_slice_offset(slice_z, columns, uv_slice_spacing);\n  vec2 slice1_offset = compute_slice_offset(slice_z + 1.0, columns, uv_slice_spacing);\n\n  vec4 slice0_color = texture2D(tex, slice0_offset + uv);\n  vec4 slice1_color = texture2D(tex, slice1_offset + uv);\n  return mix(slice0_color, slice1_color, slice_z_offset);\n}\n\nuniform float ambient_coefficient;\nuniform float diffuse_coefficient;\nuniform float specular_coefficient;\nuniform float specular_exponent;\n\nmat3 transpose3(mat3 m) {\n    vec3 v0 = m[0];\n    vec3 v1 = m[1];\n    vec3 v2 = m[2];\n    return mat3(\n        vec3(v0.x, v1.x, v2.x),\n        vec3(v0.y, v1.y, v2.y),\n        vec3(v0.z, v1.z, v2.z)\n        );\n}\n\nvec2 sample(sampler2D data, Volume volume, vec3 ray_pos, inout vec3 normal) {\n    vec3 pos_relative = (ray_pos+volume.offset)*volume.scale;\n    if(any(lessThan(pos_relative, vec3(0.))) || any(greaterThan(pos_relative, vec3(1.))))\n        return vec2(0.0);\n    vec4 sample = sample_as_3d_texture(data, volume.size, pos_relative, volume.slice_size, volume.slices, volume.rows, volume.columns);\n    normal = (-sample.xyz)*2.+1.;\n    float raw_data_value = sample.a; //(sample.a - data_min) * data_scale;\n    float scaled_data_value = (raw_data_value*(volume.data_range[1] - volume.data_range[0])) + volume.data_range[0];\n    float data_value = (scaled_data_value - volume.show_range[0])/(volume.show_range[1] - volume.show_range[0]);\n    // TODO: how do we deal with this with multivolume rendering\n    // if(((data_value < 0.) && !volume.clamp_min) || ((data_value > 1.) && !volume.clamp_max)) {\n    //     ray_pos += ray_delta;\n    //     continue;\n    // }\n    data_value = clamp(data_value, 0., 1.);\n    return vec2(data_value, 1);\n}\n\nvec4 apply_lighting(vec4 color, vec3 normal) {\n    float cosangle_light = max((dot(light_dir, normal)), 0.);\n    float cosangle_eye = max((dot(eye, normal)), 0.);\n    vec4 result = vec4(color.rgb * (ambient_coefficient + diffuse_coefficient*cosangle_light + specular_coefficient * pow(cosangle_eye, specular_exponent)), color.a);\n    return result;\n}\n\nvec4 add_sample(sampler2D data, sampler2D transfer_function, Volume volume, vec3 ray_pos, vec4 color_in) {\n    vec4 color;\n    vec3 pos_relative = (ray_pos+volume.offset)*volume.scale;\n    /*vec4 sample_x = sample_as_3d_texture(volume, size, pos + vec3(delta, 0, 0), slice_size, slices, rows, columns);\n    vec4 sample_y = sample_as_3d_texture(volume, size, pos + vec3(0, delta, 0), slice_size, slices, rows, columns);\n    vec4 sample_z = sample_as_3d_texture(volume, size, pos + vec3(0, 0, delta), slice_size, slices, rows, columns);\n\n    vec3 normal = normalize(vec3((sample_x[0]-sample[0])/delta, (sample_y[0]-sample[0])/delta, (sample_z[0]-sample[0])/delta));\n    normal = -vec3(normal.x, normal.y, normal.z);\n    float cosangle_light = max((dot(light_dir, normal)), 0.);\n    float cosangle_eye = max((dot(eye, normal)), 0.);*/\n\n    vec3 normal;\n    vec2 sample = sample(data, volume, ray_pos, normal);\n    float data_value = sample[0];\n    if(sample[1] == 0.0)\n        return color_in;\n    if(((data_value < 0.) && !volume.clamp_min) || ((data_value > 1.) && !volume.clamp_max))\n        return color_in;\n\n    vec4 color_sample = texture2D(transfer_function, vec2(data_value, 0.5));\n    if(volume.lighting) {\n        color_sample = apply_lighting(color_sample, normal);\n    }\n\n    // float intensity = color_sample.a;\n    //float alpha_sample = intensity * sign(data_value) * sign(1.-data_value) * 100. / float(steps) * ray_length;//clamp(1.-chisq, 0., 1.) * 0.5;//1./128.* length(color_sample) * 100.;\n    // float alpha_sample = intensity * 100. / float(steps);//clamp(1.-chisq, 0., 1.) * 0.5;//1./128.* length(color_sample) * 100.;\n    // alpha_sample = clamp(alpha_sample * volume.opacity_scale, 0., 1.);\n\n    //float intensity = texture2D(transfer_function, vec2(data_value, 0.5)).a;\n    //color_sample = texture2D(transfer_function, data_value);\n    //vec4 color_sample = texture2D(colormap, vec2(sample.a, colormap_index_scaled));\n    //color_sample = texture2D(volume, ray_pos.yz);\n    //float alpha_sample = opacity*intensity;//1./128.* length(color_sample) * 100.;\n    // float alpha_total = color_in.a + alpha_sample;\n    // color.rgb = color_in.rgb + (1.0 - alpha_total) * color_sample.rgb * alpha_sample;\n    // color.a = alpha_total;\n    vec4 dst = color_in;\n    vec4 src = color_sample;\n    src.a *= clamp(100./float(steps) * volume.opacity_scale, 0.0, 1.0);\n    #ifdef COORDINATE\n        color.a   = src.a  + dst.a;\n        color.rgb = dst.xyz + ray_pos * src.a;\n    #else\n        color.rgb = (1.0-dst.a) * src.rgb * src.a * volume.brightness + dst.rgb;\n        color.a   = src.a  + dst.a;\n    #endif\n    return color;\n}\n\nvec4 blend_pre_multiplied(vec4 dst, vec4 src) {\n    return dst * (1.0-src.a) + src;\n}\n\nconst int MAX_STEPS = 1000;\nvec2 pixel;\n\nvec4 cast_ray(vec3 ray_begin, vec3 ray_end, vec4 color) {\n    vec3 ray_direction = ray_end - ray_begin;\n    vec3 ray_delta = normalize(ray_direction) * (1./float(steps));\n    vec3 ray_pos = ray_begin;\n\n    float ray_length = length(ray_direction);\n    float ray_length_delta = length(ray_delta);\n    float ray_length_traveled = 0.;\n\n    vec2 pixel = vec2(gl_FragCoord.x, gl_FragCoord.y) / render_size;\n    vec4 voxel_view_space_coord;\n    float voxel_frag_depth;\n    vec4 geometry_depth;\n\n    for(int i = 0; i < MAX_STEPS; i++) {\n        geometry_depth = texture2D(geometry_depth_tex, pixel); \n        voxel_view_space_coord = projectionMatrix * modelViewMatrix * vec4(ray_pos+vec3(-0.5, -0.5, -0.5),1.0);\n        voxel_frag_depth = ((voxel_view_space_coord.z / voxel_view_space_coord.w)+1.0)/2.0;\n        if(geometry_depth.x > 0.0 && voxel_frag_depth > geometry_depth.x){\n            break;\n        }\n\n        {{#volumes}}\n            color = add_sample(data[{{.}}], transfer_function[{{.}}], volumes[{{.}}], ray_pos, color);\n        {{/volumes}}\n        if(color.a >= 1.)\n            break;\n        ray_pos += ray_delta;\n        ray_length_traveled += ray_length_delta;\n        if(ray_length_traveled >= ray_length)\n            break;\n    }\n    return color;\n}\n\nvoid cast_ray_max(vec3 ray_begin, vec3 ray_end);\n\nvoid main(void) {\n#ifdef METHOD_MAX_INTENSITY\n    float max_value = 0.;\n    float max_cosangle_light = 0.;\n    float max_cosangle_eye = 0.;\n#endif\n\n\n    pixel = vec2(gl_FragCoord.x, gl_FragCoord.y) / render_size;\n    vec4 color = vec4(0, 0, 0, 0);\n    // float color_index;\n\n    //mat3 rotation = mat3(mvMatrix);\n    mat3 rotation = (mat3(viewMatrix));\n    light_dir = normalize(vec3(-1,-1,1) * rotation);\n    eye = vec3(0, 0, 1) * rotation;\n\n    float delta = 1.0/256./2.;\n\n#ifdef COORDINATE\n    // contains the weighted coordinate, where the last component is the weight\n    // diving by w gives it the average value\n    vec4 weighted_coordinate = vec4(0., 0., 0., 0.);\n#endif \n    vec3 ray_begin = front;\n    vec3 ray_end = texture2D(back_tex, pixel).rgb;\n    vec3 ray_begin0 = ray_begin;\n    vec3 ray_end0 = ray_end;\n    cast_ray_max(ray_begin, ray_end);\n    #if (VOLUME_COUNT_MAX_INT > 1)\n        // TODO: horrible sort, fix!!\n        for(int i = 0; i < VOLUME_COUNT_MAX_INT-1; i++) {\n            for(int j = 1; j < VOLUME_COUNT_MAX_INT; j++) {\n                if(has_values[i] && has_values[j] && (i < j)) {\n                    if(max_depth[j] < max_depth[i]) {\n                        float depth = max_depth[i];\n                        max_depth[i] = max_depth[j];\n                        max_depth[j] = depth;\n                        vec4 color = max_colors[i];\n                        max_colors[i] = max_colors[j];\n                        max_colors[j] = color;\n                    }\n                }\n            }\n        }\n    #endif\n    #if (VOLUME_COUNT_MAX_INT > 0)\n        for(int i = 0; i < VOLUME_COUNT_MAX_INT; i++) {\n            layers[i].depth = 0.0;\n            layers[i].color = vec4(0.0);\n            if(has_values[i]) {\n                layers[i].depth = max_depth[i];\n                layers[i].color = max_colors[i];\n            }\n        }\n    #endif\n    // last layer is the absolute end of the volume, its color is fully transparant\n    layers[VOLUME_COUNT_MAX_INT].depth = 1.0;\n    layers[VOLUME_COUNT_MAX_INT].color = vec4(0.0);\n    float depth = -100.0;\n    ray_begin = ray_begin0;\n    for(int i = 0; i < VOLUME_COUNT_MAX_INT+1; i++) {\n        // TODO: debug this, it seems that > makes more sense, but gives artifacts in the situation of\n        // having 2 max int volr, 1 normal, the 2nd will have holes when it's the only volume in the los.\n        if(layers[i].depth >= depth)\n        {\n            ray_end = ray_begin0 + (ray_end0 - ray_begin0) * layers[i].depth;\n            color = cast_ray(ray_begin, ray_end, color);\n            #ifdef COORDINATE\n                // color += layers[i].color;\n                color = blend_pre_multiplied(layers[i].color, color);\n            #else\n                color = blend_pre_multiplied(layers[i].color, color);\n            #endif\n            ray_begin = ray_end;\n            depth = layers[i].depth;\n        }\n    }\n\n    #ifdef COORDINATE\n        vec3 average_coordinate = color.xyz/color.a;\n        gl_FragColor = vec4(average_coordinate, color.a);\n    #else\n        gl_FragColor = color;\n    #endif\n    //gl_FragColor = vec4(ray_begin.xyz, 0.1) * brightness;\n    //gl_FragColor = vec4(rotation[0], 1) * brightness;\n    //gl_FragColor = vec4(alpha_total, 0., 0., 1.);\n    //gl_FragColor = texture2D(volume, vec2(ray_begin.x, ray_begin.y));\n    // gl_FragColor = vec4(ray_pos.x, ray_pos.y, ray_pos.z, 1);\n    //gl_FragColor = texture2D(transfer_function, vec2(pixel.x, 0.5));\n    //gl_FragColor = vec4(texture2D(volume, vec2(pixel.x, pixel.y)).rgb, 1.0);\n    // gl_FragColor = vec4(pixel.x, pixel.y, 0, 1);\n    // gl_FragColor = vec4(ray_end, 1.);\n    // gl_FragColor = vec4(ray_begin, 1);\n    //float tintensity = texture2D(transfer_function, vec2(pixel.x / 1., 0.5)).a;\n    //gl_FragColor = vec4(0, tintensity, 0., 1.);\n    //gl_FragColor = vec4(ray_e, 1);\n}\n\n\n\n\nvoid cast_ray_max(vec3 ray_begin, vec3 ray_end) {\n    vec3 ray_direction = ray_end - ray_begin;\n    vec3 ray_delta = normalize(ray_direction) * (1./float(steps));\n    vec3 ray_pos = ray_begin;\n\n    float ray_length = length(ray_direction);\n    float ray_length_delta = length(ray_delta);\n    float ray_length_traveled = 0.;\n\n    vec4 voxel_view_space_coord;\n    float voxel_frag_depth;\n    vec4 geometry_depth;\n    for(int i = 0; i < MAX_STEPS; i++) {\n\n        {{#volumes_max_int}}\n        {\n            vec3 normal;\n            vec2 sample = sample(data_max_int[{{.}}], volumes_max_int[{{.}}], ray_pos, normal);\n            if(sample.x > max_values[{{.}}] && sample.y > 0.0) {\n                max_values[{{.}}] = sample.x;\n                has_values[{{.}}] = true;\n                // the weight of the coordinate equals its opacity\n                max_colors[{{.}}] = texture2D(transfer_function_max_int[{{.}}], vec2(max_values[{{.}}], 0.5));\n                if(volumes_max_int[{{.}}].lighting)\n                    max_colors[{{.}}] = apply_lighting(max_colors[{{.}}], normal);\n                float alpha = clamp(max_colors[{{.}}].a * volumes_max_int[{{.}}].opacity_scale * 10., 0., 1.);\n                max_colors[{{.}}].a = alpha;\n                #ifdef COORDINATE\n                    max_colors[{{.}}].rgb = ray_pos * alpha; // no need to use brightness for the coordinates\n                #else\n                    max_colors[{{.}}].rgb *= alpha * volumes_max_int[{{.}}].brightness; // pre-blend\n                #endif\n                max_weighted_coordinate[{{.}}].xyz = ray_pos * alpha;\n                max_weighted_coordinate[{{.}}].a = alpha;\n                max_depth[{{.}}] = ray_length_traveled/ray_length;\n            }\n        }\n        {{/volumes_max_int}}\n\n        ray_pos += ray_delta;\n        ray_length_traveled += ray_length_delta;\n        if(ray_length_traveled >= ray_length)\n            break;\n    }\n}"},function(t,e){t.exports="//attribute vec3 aVertexPosition;\n\n//uniform mat4 uMVMatrix;\n//uniform mat4 uPMatrix;\nvarying vec3 front;\n\nvoid main(void) {\n    //gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n    gl_Position = projectionMatrix *\n                modelViewMatrix *\n                vec4(position,1.0);\n    //vertex_color = vec4(aVertexPosition, 1);\n    front = position+vec3(0.5, 0.5, 0.5);\n}\n"},function(t,e,n){var r=n(9),i=n(6),o=n(13),a=n(7).semver_range,s=n(27),u=r.DOMWidgetView.extend({render:function(){this.img=document.createElement("img"),this.img.setAttribute("src",this.model.get("rgba")),this.img.setAttribute("style",this.model.get("style")),this.model.on("change:rgba",function(){this.img.setAttribute("src",this.model.get("rgba"))},this),this.model.on("change:style",function(){this.img.setAttribute("style",this.model.get("style"))},this),this.el.appendChild(this.img)}}),c=r.DOMWidgetModel.extend({defaults:function(){return i.extend(r.DOMWidgetModel.prototype.defaults(),{_model_name:"TransferFunctionModel",_view_name:"TransferFunctionView",_model_module:"ipyvolume",_view_module:"ipyvolume",_model_module_version:a,_view_module_version:a,rgba:null})},get_data_array:function(){for(var t=[],e=this.get("rgba"),n=0;n<e.shape[0];n++)for(var r=0;r<4;r++)t.push(255*e.get(n,r));return new Uint8Array(t)}},{serializers:i.extend({rgba:o.ndarray},r.WidgetModel.serializers)}),l=c.extend({defaults:function(){return i.extend(c.prototype.defaults(),{_model_name:"TransferFunctionJsBumpsModel",levels:[.1,.5,.8],opacities:[.01,.05,.1],widths:[.1,.1,.1]})},constructor:function(){c.prototype.constructor.apply(this,arguments),this.on("change:levels",this.recalculate_rgba,this),this.on("change:opacities",this.recalculate_rgba,this),this.on("change:widths",this.recalculate_rgba,this),this.recalculate_rgba()},recalculate_rgba:function(){var t=[],e=[[1,0,0],[0,1,0],[0,0,1]],n=this.get("levels"),r=this.get("widths"),i=this.get("opacities");window.rgba=t,window.tfjs=this;for(var o=0;o<256;o++){for(var a=o/255,s=[0,0,0,0],u=0;u<n.length;u++){for(var c=e[u],l=Math.exp(-Math.pow(a-n[u],2)/Math.pow(r[u],2)),h=0;h<3;h++)s[h]+=c[h]*l*i[u];s[3]+=l*i[u]}var f=s[0];for(h=1;h<3;h++)f=Math.max(f,s[h]);for(h=0;h<3;h++)s[h]=Math.min(1,s[h]/f);s[3]=Math.min(1,s[3]),t.push(s)}this.set("rgba",t),this.save_changes()}}),h=c.extend({defaults:function(){return i.extend(c.prototype.defaults(),{_model_name:"TransferFunctionWidgetJs3Model",level1:.1,level2:.5,level3:.8,opacity1:.01,opacity2:.05,opacity3:.1,width1:.1,width2:.1,width3:.1})},constructor:function(){c.prototype.constructor.apply(this,arguments),this.on("change:level1",this.recalculate_rgba,this),this.on("change:level2",this.recalculate_rgba,this),this.on("change:level3",this.recalculate_rgba,this),this.on("change:opacity1",this.recalculate_rgba,this),this.on("change:opacity2",this.recalculate_rgba,this),this.on("change:opacity3",this.recalculate_rgba,this),this.on("change:width1",this.recalculate_rgba,this),this.on("change:width2",this.recalculate_rgba,this),this.on("change:width3",this.recalculate_rgba,this),this.recalculate_rgba()},recalculate_rgba:function(){for(var t=[],e=[[1,0,0],[0,1,0],[0,0,1]],n=[this.get("level1"),this.get("level2"),this.get("level3")],r=[this.get("width1"),this.get("width2"),this.get("width3")],i=[this.get("opacity1"),this.get("opacity2"),this.get("opacity3")],o=0;o<256;o++){for(var a=o/255,u=[0,0,0,0],c=0;c<3;c++){for(var l=e[c],h=Math.exp(-Math.pow(a-n[c],2)/Math.pow(r[c],2)),f=0;f<3;f++)u[f]+=l[f]*h*i[c];u[3]+=h*i[c]}var d=u[0];for(f=1;f<3;f++)d=Math.max(d,u[f]);for(f=0;f<3;f++)u[f]=Math.min(1,u[f]/d);u[3]=Math.min(1,u[3]),t.push(u)}t=s(t),this.set("rgba",t),this.save_changes()}});t.exports={TransferFunctionModel:c,TransferFunctionView:u,TransferFunctionWidgetJs3Model:h,TransferFunctionJsBumpsModel:l}},function(t,e,n){"use strict";(function(e){var r=n(94),i=n(31),o=n(19),a=n(18),s={};function u(t,e){if("object"!=typeof t||e||(e=t,t=null),e=e||{},t){var n=o.parse(t,!0);if(null!=n.port&&(n.port=Number(n.port)),null===(e=a(n,e)).protocol)throw new Error("Missing protocol");e.protocol=e.protocol.replace(/:$/,"")}if(function(t){var e;t.auth&&((e=t.auth.match(/^(.+):(.+)$/))?(t.username=e[1],t.password=e[2]):t.username=t.auth)}(e),e.query&&"string"==typeof e.query.clientId&&(e.clientId=e.query.clientId),e.cert&&e.key){if(!e.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs"].indexOf(e.protocol))switch(e.protocol){case"mqtt":e.protocol="mqtts";break;case"ws":e.protocol="wss";break;case"wx":e.protocol="wxs";break;default:throw new Error('Unknown protocol for secure connection: "'+e.protocol+'"!')}}if(!s[e.protocol]){var i=-1!==["mqtts","wss"].indexOf(e.protocol);e.protocol=["mqtt","mqtts","ws","wss","wx","wxs"].filter(function(t,e){return(!i||e%2!=0)&&"function"==typeof s[t]})[0]}if(!1===e.clean&&!e.clientId)throw new Error("Missing clientId for unclean clients");return new r(function(t){return e.servers&&(t._reconnectCount&&t._reconnectCount!==e.servers.length||(t._reconnectCount=0),e.host=e.servers[t._reconnectCount].host,e.port=e.servers[t._reconnectCount].port,e.hostname=e.host,t._reconnectCount++),s[e.protocol](t,e)},e)}"browser"!==e.title?(s.mqtt=n(42),s.tcp=n(42),s.ssl=n(20),s.tls=n(20),s.mqtts=n(20)):(s.wx=n(43),s.wxs=n(43)),s.ws=n(45),s.wss=n(45),t.exports=u,t.exports.connect=u,t.exports.MqttClient=r,t.exports.Store=i}).call(this,n(1))},function(t,e,n){"use strict";(function(e,r){var i=n(10),o=n(31),a=n(39),s=n(105),u=n(14).Writable,c=n(5),l=n(115),h=n(116),f=n(18),d=e.setImmediate||function(t){r.nextTick(t)},p={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0};function _(t,e,n){t.emit("packetsend",e),!s.writeToStream(e,t.stream)&&n?t.stream.once("drain",n):n&&n()}function m(){}function v(t,e){var n,r=this;if(!(this instanceof v))return new v(t,e);for(n in this.options=e||{},p)void 0===this.options[n]?this.options[n]=p[n]:this.options[n]=e[n];this.options.clientId="string"==typeof this.options.clientId?this.options.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),this.streamBuilder=t,this.outgoingStore=this.options.outgoingStore||new o,this.incomingStore=this.options.incomingStore||new o,this.queueQoSZero=void 0===this.options.queueQoSZero||this.options.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this.nextId=Math.floor(65535*Math.random()),this.outgoing={},this.on("connect",function(){if(!this.disconnected){this.connected=!0;var t=null;(t=this.outgoingStore.createStream()).once("readable",function(){!function e(){var n,i=t.read(1);i&&(!r.disconnecting&&!r.reconnectTimer&&r.options.reconnectPeriod>0?(t.read(0),n=r.outgoing[i.messageId],r.outgoing[i.messageId]=function(t,r){n&&n(t,r),e()},r._sendPacket(i)):t.destroy&&t.destroy())}()}).on("error",this.emit.bind(this,"error"))}}),this.on("close",function(){this.connected=!1,clearTimeout(this.connackTimer)}),this.on("connect",this._setupPingTimer),this.on("connect",function(){var t=this.queue;!function e(){var n,i=t.shift();i&&(n=i.packet,r._sendPacket(n,function(t){i.cb&&i.cb(t),e()}))}()});var a=!0;this.on("connect",function(){!a&&this.options.clean&&Object.keys(this._resubscribeTopics).length>0&&(this.options.resubscribe?(this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics)):this._resubscribeTopics={}),a=!1}),this.on("close",function(){null!==r.pingTimer&&(r.pingTimer.clear(),r.pingTimer=null)}),this.on("close",this._setupReconnect),i.EventEmitter.call(this),this._setupStream()}c(v,i.EventEmitter),v.prototype._setupStream=function(){var t,e=this,n=new u,i=s.parser(this.options),o=null,c=[];function l(){r.nextTick(h)}function h(){var t=c.shift(),n=o;t?e._handlePacket(t,l):(o=null,n())}this._clearReconnect(),this.stream=this.streamBuilder(this),i.on("packet",function(t){c.push(t)}),n._write=function(t,e,n){o=n,i.parse(t),h()},this.stream.pipe(n),this.stream.on("error",m),a(this.stream,this.emit.bind(this,"close")),(t=Object.create(this.options)).cmd="connect",_(this,t),i.on("error",this.emit.bind(this,"error")),this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){e._cleanUp(!0)},this.options.connectTimeout)},v.prototype._handlePacket=function(t,e){switch(this.emit("packetreceive",t),t.cmd){case"publish":this._handlePublish(t,e);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(t),e();break;case"pubrel":this._handlePubrel(t,e);break;case"connack":this._handleConnack(t),e();break;case"pingresp":this._handlePingresp(t),e()}},v.prototype._checkDisconnecting=function(t){return this.disconnecting&&(t?t(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},v.prototype.publish=function(t,e,n,r){var i;"function"==typeof n&&(r=n,n=null);if(n=f({qos:0,retain:!1,dup:!1},n),this._checkDisconnecting(r))return this;switch(i={cmd:"publish",topic:t,payload:e,qos:n.qos,retain:n.retain,messageId:this._nextId(),dup:n.dup},n.qos){case 1:case 2:this.outgoing[i.messageId]=r||m,this._sendPacket(i);break;default:this._sendPacket(i,r)}return this},v.prototype.subscribe=function(){var t,e,n=Array.prototype.slice.call(arguments),r=[],i=n.shift(),o=i.resubscribe,a=n.pop()||m,s=n.pop(),u=this;if(delete i.resubscribe,"string"==typeof i&&(i=[i]),"function"!=typeof a&&(s=a,a=m),null!==(e=h.validateTopics(i)))return d(a,new Error("Invalid topic "+e)),this;if(this._checkDisconnecting(a))return this;if(s=f({qos:0},s),Array.isArray(i)?i.forEach(function(t){(u._resubscribeTopics[t]<s.qos||!u._resubscribeTopics.hasOwnProperty(t)||o)&&r.push({topic:t,qos:s.qos})}):Object.keys(i).forEach(function(t){(u._resubscribeTopics[t]<i[t]||!u._resubscribeTopics.hasOwnProperty(t)||o)&&r.push({topic:t,qos:i[t]})}),t={cmd:"subscribe",subscriptions:r,qos:1,retain:!1,dup:!1,messageId:this._nextId()},r.length){if(this.options.resubscribe){var c=[];r.forEach(function(t){u.options.reconnectPeriod>0&&(u._resubscribeTopics[t.topic]=t.qos,c.push(t.topic))}),u.messageIdToTopic[t.messageId]=c}return this.outgoing[t.messageId]=function(t,e){if(!t)for(var n=e.granted,i=0;i<n.length;i+=1)r[i].qos=n[i];a(t,r)},this._sendPacket(t),this}a(null,[])},v.prototype.unsubscribe=function(t,e){var n={cmd:"unsubscribe",qos:1,messageId:this._nextId()},r=this;return e=e||m,this._checkDisconnecting(e)?this:("string"==typeof t?n.unsubscriptions=[t]:"object"==typeof t&&t.length&&(n.unsubscriptions=t),this.options.resubscribe&&n.unsubscriptions.forEach(function(t){delete r._resubscribeTopics[t]}),this.outgoing[n.messageId]=e,this._sendPacket(n),this)},v.prototype.end=function(t,e){var n=this;function r(){n.disconnected=!0,n.incomingStore.close(function(){n.outgoingStore.close(e)}),n._deferredReconnect&&n._deferredReconnect()}function i(){n._cleanUp(t,d.bind(null,r))}return"function"==typeof t&&(e=t,t=!1),this.disconnecting?this:(this._clearReconnect(),this.disconnecting=!0,!t&&Object.keys(this.outgoing).length>0?this.once("outgoingEmpty",setTimeout.bind(null,i,10)):i(),this)},v.prototype.removeOutgoingMessage=function(t){var e=this.outgoing[t];return delete this.outgoing[t],this.outgoingStore.del({messageId:t},function(){e(new Error("Message removed"))}),this},v.prototype.reconnect=function(t){var e=this,n=function(){t?(e.options.incomingStore=t.incomingStore,e.options.outgoingStore=t.outgoingStore):(e.options.incomingStore=null,e.options.outgoingStore=null),e.incomingStore=e.options.incomingStore||new o,e.outgoingStore=e.options.outgoingStore||new o,e.disconnecting=!1,e.disconnected=!1,e._deferredReconnect=null,e._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=n:n(),this},v.prototype._reconnect=function(){this.emit("reconnect"),this._setupStream()},v.prototype._setupReconnect=function(){var t=this;!t.disconnecting&&!t.reconnectTimer&&t.options.reconnectPeriod>0&&(this.reconnecting||(this.emit("offline"),this.reconnecting=!0),t.reconnectTimer=setInterval(function(){t._reconnect()},t.options.reconnectPeriod))},v.prototype._clearReconnect=function(){this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},v.prototype._cleanUp=function(t,e){e&&this.stream.on("close",e),t?this.stream.destroy():this._sendPacket({cmd:"disconnect"},d.bind(null,this.stream.end.bind(this.stream))),this.disconnecting||(this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(this.pingTimer.clear(),this.pingTimer=null)},v.prototype._sendPacket=function(t,e){if(this.connected)if(this._shiftPingInterval(),"publish"===t.cmd)switch(t.qos){case 2:case 1:!function(t,e,n){t.outgoingStore.put(e,function(r){if(r)return n&&n(r);_(t,e,n)})}(this,t,e);break;case 0:default:_(this,t,e)}else _(this,t,e);else 0===(t.qos||0)&&this.queueQoSZero||"publish"!==t.cmd?this.queue.push({packet:t,cb:e}):t.qos>0?(e=this.outgoing[t.messageId],this.outgoingStore.put(t,function(t){if(t)return e&&e(t)})):e&&e(new Error("No connection to broker"))},v.prototype._setupPingTimer=function(){var t=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=l(function(){t._checkPing()},1e3*this.options.keepalive))},v.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},v.prototype._checkPing=function(){this.pingResp?(this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):this._cleanUp(!0)},v.prototype._handlePingresp=function(){this.pingResp=!0},v.prototype._handleConnack=function(t){var e=t.returnCode;if(clearTimeout(this.connackTimer),0===e)this.reconnecting=!1,this.emit("connect",t);else if(e>0){var n=new Error("Connection refused: "+["","Unacceptable protocol version","Identifier rejected","Server unavailable","Bad username or password","Not authorized"][e]);n.code=e,this.emit("error",n)}},v.prototype._handlePublish=function(t,e){var n=t.topic.toString(),r=t.payload,i=t.qos,o=t.messageId,a=this;switch(i){case 2:this.incomingStore.put(t,function(){a._sendPacket({cmd:"pubrec",messageId:o},e)});break;case 1:this.emit("message",n,r,t),this.handleMessage(t,function(t){if(t)return e&&e(t);a._sendPacket({cmd:"puback",messageId:o},e)});break;case 0:this.emit("message",n,r,t),this.handleMessage(t,e)}},v.prototype.handleMessage=function(t,e){e()},v.prototype._handleAck=function(t){var e=t.messageId,n=t.cmd,r=null,i=this.outgoing[e],o=this;if(i){switch(n){case"pubcomp":case"puback":delete this.outgoing[e],this.outgoingStore.del(t,i);break;case"pubrec":r={cmd:"pubrel",qos:2,messageId:e},this._sendPacket(r);break;case"suback":if(delete this.outgoing[e],1===t.granted.length&&0!=(128&t.granted[0])){var a=this.messageIdToTopic[e];a&&a.forEach(function(t){delete o._resubscribeTopics[t]})}i(null,t);break;case"unsuback":delete this.outgoing[e],i(null);break;default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}},v.prototype._handlePubrel=function(t,e){var n=this,r={cmd:"pubcomp",messageId:t.messageId};n.incomingStore.get(t,function(i,o){i||"pubrel"===o.cmd?n._sendPacket(r,e):(n.emit("message",o.topic,o.payload,o),n.incomingStore.put(t),n.handleMessage(o,function(t){if(t)return e&&e(t);n._sendPacket(r,e)}))})},v.prototype._nextId=function(){var t=this.nextId++;return 65535===t&&(this.nextId=1),t},v.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},t.exports=v}).call(this,n(2),n(1))},function(t,e,n){"use strict";e.byteLength=function(t){return 3*t.length/4-c(t)},e.toByteArray=function(t){var e,n,r,a,s,u=t.length;a=c(t),s=new o(3*u/4-a),n=a>0?u-4:u;var l=0;for(e=0;e<n;e+=4)r=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],s[l++]=r>>16&255,s[l++]=r>>8&255,s[l++]=255&r;2===a?(r=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,s[l++]=255&r):1===a&&(r=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,s[l++]=r>>8&255,s[l++]=255&r);return s},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o="",a=[],s=0,u=n-i;s<u;s+=16383)a.push(h(t,s,s+16383>u?u:s+16383));1===i?(e=t[n-1],o+=r[e>>2],o+=r[e<<4&63],o+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],o+=r[e>>10],o+=r[e>>4&63],o+=r[e<<2&63],o+="=");return a.push(o),a.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function l(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function h(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(l(r));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+h],h+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*_}},function(t,e){},function(t,e,n){"use strict";var r=n(4).Buffer;function i(t,e,n){t.copy(e,n)}t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e=r.allocUnsafe(t>>>0),n=this.head,o=0;n;)i(n.data,e,o),o+=n.data.length,n=n.next;return e},t}()},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(100),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(2))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i=1,o={},a=!1,s=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){l(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&l(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){l(t.data)},r=function(e){t.port2.postMessage(e)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var t=s.documentElement;r=function(e){var n=s.createElement("script");n.onreadystatechange=function(){l(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(l,0,t)},u.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var a={callback:t,args:e};return o[i]=a,r(i),i++},u.clearImmediate=c}function c(t){delete o[t]}function l(t){if(a)setTimeout(l,0,t);else{var e=o[t];if(e){a=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{c(t),a=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(2),n(1))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(2))},function(t,e,n){"use strict";t.exports=o;var r=n(38),i=n(12);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(5),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){var r=n(104);function i(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function o(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}t.exports=r(i),t.exports.strict=r(o),i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})})},function(t,e){t.exports=function t(e,n){if(e&&n)return t(e)(n);if("function"!=typeof e)throw new TypeError("need wrapper function");Object.keys(e).forEach(function(t){r[t]=e[t]});return r;function r(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=e.apply(this,t),i=t[t.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach(function(t){r[t]=i[t]}),r}}},function(t,e,n){"use strict";e.parser=n(106),e.generate=n(113),e.writeToStream=n(41)},function(t,e,n){"use strict";var r=n(107),i=n(5),o=n(10).EventEmitter,a=n(112),s=n(40);function u(){if(!(this instanceof u))return new u;this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState()}i(u,o),u.prototype._resetState=function(){this.packet=new a,this.error=null,this._list=r(),this._stateCounter=0},u.prototype.parse=function(t){for(this.error&&this._resetState(),this._list.append(t);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,this._stateCounter>=this._states.length&&(this._stateCounter=0);return this._list.length},u.prototype._parseHeader=function(){var t=this._list.readUInt8(0);return this.packet.cmd=s.types[t>>s.CMD_SHIFT],this.packet.retain=0!=(t&s.RETAIN_MASK),this.packet.qos=t>>s.QOS_SHIFT&s.QOS_MASK,this.packet.dup=0!=(t&s.DUP_MASK),this._list.consume(1),!0},u.prototype._parseLength=function(){for(var t,e=0,n=1,r=0,i=!0;e<5&&(r+=n*((t=this._list.readUInt8(e++))&s.LENGTH_MASK),n*=128,0!=(t&s.LENGTH_FIN_MASK));)if(this._list.length<=e){i=!1;break}return i&&(this.packet.length=r,this._list.consume(e)),i},u.prototype._parsePayload=function(){var t=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseMessageId();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":case"disconnect":break;default:this._emitError(new Error("Not supported"))}t=!0}return t},u.prototype._parseConnect=function(){var t,e,n,r,i,o,a={},u=this.packet;if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==t&&"MQIsdp"!==t)return this._emitError(new Error("Invalid protocolId"));if(u.protocolId=t,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(u.protocolVersion=this._list.readUInt8(this._pos),3!==u.protocolVersion&&4!==u.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(a.username=this._list.readUInt8(this._pos)&s.USERNAME_MASK,a.password=this._list.readUInt8(this._pos)&s.PASSWORD_MASK,a.will=this._list.readUInt8(this._pos)&s.WILL_FLAG_MASK,a.will&&(u.will={},u.will.retain=0!=(this._list.readUInt8(this._pos)&s.WILL_RETAIN_MASK),u.will.qos=(this._list.readUInt8(this._pos)&s.WILL_QOS_MASK)>>s.WILL_QOS_SHIFT),u.clean=0!=(this._list.readUInt8(this._pos)&s.CLEAN_SESSION_MASK),this._pos++,u.keepalive=this._parseNum(),-1===u.keepalive)return this._emitError(new Error("Packet too short"));if(null===(e=this._parseString()))return this._emitError(new Error("Packet too short"));if(u.clientId=e,a.will){if(null===(n=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(u.will.topic=n,null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));u.will.payload=r}if(a.username){if(null===(o=this._parseString()))return this._emitError(new Error("Cannot parse username"));u.username=o}if(a.password){if(null===(i=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));u.password=i}return u},u.prototype._parseConnack=function(){var t=this.packet;return this._list.length<2?null:(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&s.SESSIONPRESENT_MASK),t.returnCode=this._list.readUInt8(this._pos),-1===t.returnCode?this._emitError(new Error("Cannot parse return code")):void 0)},u.prototype._parsePublish=function(){var t=this.packet;if(t.topic=this._parseString(),null===t.topic)return this._emitError(new Error("Cannot parse topic"));t.qos>0&&!this._parseMessageId()||(t.payload=this._list.slice(this._pos,t.length))},u.prototype._parseSubscribe=function(){var t,e,n=this.packet;if(1!==n.qos)return this._emitError(new Error("Wrong subscribe header"));if(n.subscriptions=[],this._parseMessageId())for(;this._pos<n.length;){if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse topic"));e=this._list.readUInt8(this._pos++),n.subscriptions.push({topic:t,qos:e})}},u.prototype._parseSuback=function(){if(this.packet.granted=[],this._parseMessageId())for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))},u.prototype._parseUnsubscribe=function(){var t=this.packet;if(t.unsubscriptions=[],this._parseMessageId())for(;this._pos<t.length;){var e;if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse topic"));t.unsubscriptions.push(e)}},u.prototype._parseUnsuback=function(){if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"))},u.prototype._parseMessageId=function(){var t=this.packet;return t.messageId=this._parseNum(),null!==t.messageId||(this._emitError(new Error("Cannot parse messageId")),!1)},u.prototype._parseString=function(t){var e,n=this._parseNum(),r=n+this._pos;return-1===n||r>this._list.length||r>this.packet.length?null:(e=this._list.toString("utf8",this._pos,r),this._pos+=n,e)},u.prototype._parseBuffer=function(){var t,e=this._parseNum(),n=e+this._pos;return-1===e||n>this._list.length||n>this.packet.length?null:(t=this._list.slice(this._pos,n),this._pos+=e,t)},u.prototype._parseNum=function(){if(this._list.length-this._pos<2)return-1;var t=this._list.readUInt16BE(this._pos);return this._pos+=2,t},u.prototype._newPacket=function(){return this.packet&&(this._list.consume(this.packet.length),this.emit("packet",this.packet)),this.packet=new a,!0},u.prototype._emitError=function(t){this.error=t,this.emit("error",t)},t.exports=u},function(t,e,n){(function(e){var r=n(108);function i(t){if(!(this instanceof i))return new i(t);if(this._bufs=[],this.length=0,"function"==typeof t){this._callback=t;var e=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",function(t){t.on("error",e)}),this.on("unpipe",function(t){t.removeListener("error",e)})}else this.append(t);r.call(this)}n(109).inherits(i,r),i.prototype._offset=function(t){var e,n=0,r=0;if(0===t)return[0,0];for(;r<this._bufs.length;r++){if(t<(e=n+this._bufs[r].length)||r==this._bufs.length-1)return[r,t-n];n=e}},i.prototype.append=function(t){var n=0;if(e.isBuffer(t))this._appendBuffer(t);else if(Array.isArray(t))for(;n<t.length;n++)this.append(t[n]);else if(t instanceof i)for(;n<t._bufs.length;n++)this.append(t._bufs[n]);else null!=t&&("number"==typeof t&&(t=t.toString()),this._appendBuffer(new e(t)));return this},i.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},i.prototype._write=function(t,e,n){this._appendBuffer(t),"function"==typeof n&&n()},i.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},i.prototype.end=function(t){r.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},i.prototype.get=function(t){return this.slice(t,t+1)[0]},i.prototype.slice=function(t,e){return"number"==typeof t&&t<0&&(t+=this.length),"number"==typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},i.prototype.copy=function(t,n,r,i){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof i||i>this.length)&&(i=this.length),r>=this.length)return t||new e(0);if(i<=0)return t||new e(0);var o,a,s=!!t,u=this._offset(r),c=i-r,l=c,h=s&&n||0,f=u[1];if(0===r&&i==this.length){if(!s)return 1===this._bufs.length?this._bufs[0]:e.concat(this._bufs,this.length);for(a=0;a<this._bufs.length;a++)this._bufs[a].copy(t,h),h+=this._bufs[a].length;return t}if(l<=this._bufs[u[0]].length-f)return s?this._bufs[u[0]].copy(t,n,f,f+l):this._bufs[u[0]].slice(f,f+l);for(s||(t=new e(c)),a=u[0];a<this._bufs.length;a++){if(!(l>(o=this._bufs[a].length-f))){this._bufs[a].copy(t,h,f,f+l);break}this._bufs[a].copy(t,h,f),h+=o,l-=o,f&&(f=0)}return t},i.prototype.shallowSlice=function(t,e){t=t||0,e=e||this.length,t<0&&(t+=this.length),e<0&&(e+=this.length);var n=this._offset(t),r=this._offset(e),o=this._bufs.slice(n[0],r[0]+1);return 0==r[1]?o.pop():o[o.length-1]=o[o.length-1].slice(0,r[1]),0!=n[1]&&(o[0]=o[0].slice(n[1])),new i(o)},i.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)},i.prototype.consume=function(t){for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},i.prototype.duplicate=function(){for(var t=0,e=new i;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},i.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var e in t)!function(e){i.prototype[e]=function(n){return this.slice(n,n+t[e])[e](0)}}(e)}(),t.exports=i}).call(this,n(15).Buffer)},function(t,e,n){t.exports=n(8)},function(t,e,n){(function(t,r){var i=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),u=r[n];n<o;u=r[++n])_(u)||!b(u)?a+=" "+u:a+=" "+s(u);return a},e.deprecate=function(n,i){if(g(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var o,a={};function s(t,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&e._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,t,r.depth)}function u(t,e){var n=s.styles[e];return n?"["+s.colors[n][0]+"m"+t+"["+s.colors[n][1]+"m":t}function c(t,e){return t}function l(t,n,r){if(t.customInspect&&n&&M(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return v(i)||(i=l(t,i,r)),i}var o=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(v(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(m(e))return t.stylize(""+e,"number");if(p(e))return t.stylize(""+e,"boolean");if(_(e))return t.stylize("null","null")}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),x(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(n);if(0===a.length){if(M(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(y(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(x(n))return h(n)}var c,b="",E=!1,S=["{","}"];(d(n)&&(E=!0,S=["[","]"]),M(n))&&(b=" [Function"+(n.name?": "+n.name:"")+"]");return y(n)&&(b=" "+RegExp.prototype.toString.call(n)),w(n)&&(b=" "+Date.prototype.toUTCString.call(n)),x(n)&&(b=" "+h(n)),0!==a.length||E&&0!=n.length?r<0?y(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=E?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)k(e,String(a))?o.push(f(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))}),o}(t,n,r,s,a):a.map(function(e){return f(t,n,r,s,e,E)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,b,S)):S[0]+b+S[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),k(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=_(n)?l(t,u.value,null):l(t,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),g(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function _(t){return null===t}function m(t){return"number"==typeof t}function v(t){return"string"==typeof t}function g(t){return void 0===t}function y(t){return b(t)&&"[object RegExp]"===E(t)}function b(t){return"object"==typeof t&&null!==t}function w(t){return b(t)&&"[object Date]"===E(t)}function x(t){return b(t)&&("[object Error]"===E(t)||t instanceof Error)}function M(t){return"function"==typeof t}function E(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(g(o)&&(o=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=r.pid;a[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else a[t]=function(){};return a[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=p,e.isNull=_,e.isNullOrUndefined=function(t){return null==t},e.isNumber=m,e.isString=v,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=g,e.isRegExp=y,e.isObject=b,e.isDate=w,e.isError=x,e.isFunction=M,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(110);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),A[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.inherits=n(111),e._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,n(2),n(1))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports=function(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}},function(t,e,n){"use strict";var r=n(4).Buffer,i=n(41),o=n(10).EventEmitter;function a(){this._array=new Array(20),this._i=0}n(5)(a,o),a.prototype.write=function(t){return this._array[this._i++]=t,!0},a.prototype.concat=function(){var t,e,n=0,i=new Array(this._array.length),o=this._array,a=0;for(t=0;t<o.length&&o[t];t++)"string"!=typeof o[t]?i[t]=o[t].length:i[t]=r.byteLength(o[t]),n+=i[t];for(e=r.allocUnsafe(n),t=0;t<o.length&&o[t];t++)"string"!=typeof o[t]?(o[t].copy(e,a),a+=i[t]):(e.write(o[t],a),a+=i[t]);return e},t.exports=function(t){var e=new a;return i(t,e),e.concat()}},function(t,e,n){"use strict";var r=n(4).Buffer,i=65536,o={};function a(t){var e=r.allocUnsafe(2);return e.writeUInt8(t>>8,0,!0),e.writeUInt8(255&t,1,!0),e}t.exports={cache:o,generateCache:function(){for(var t=0;t<i;t++)o[t]=a(t)},generateNumber:a}},function(t,e,n){"use strict";t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new function(t,e,n){var r=this;this._callback=t,this._args=n,this._interval=setInterval(t,e,this._args),this.reschedule=function(t){t||(t=r._interval),r._interval&&clearInterval(r._interval),r._interval=setInterval(r._callback,t,r._args)},this.clear=function(){r._interval&&(clearInterval(r._interval),r._interval=void 0)},this.destroy=function(){r._interval&&clearInterval(r._interval),r._callback=void 0,r._interval=void 0,r._args=void 0}}(arguments[0],arguments[1],t)}},function(t,e,n){"use strict";function r(t){for(var e=t.split("/"),n=0;n<e.length;n++)if("+"!==e[n]){if("#"===e[n])return n===e.length-1;if(-1!==e[n].indexOf("+")||-1!==e[n].indexOf("#"))return!1}return!0}t.exports={validateTopics:function(t){if(0===t.length)return"empty_topic_list";for(var e=0;e<t.length;e++)if(!r(t[e]))return t[e];return null}}},function(t,e,n){(function(t,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,c=36,l=1,h=26,f=38,d=700,p=72,_=128,m="-",v=/^xn--/,g=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-l,x=Math.floor,M=String.fromCharCode;function E(t){throw new RangeError(b[t])}function S(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function A(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+S((t=t.replace(y,".")).split("."),e).join(".")}function k(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function T(t){return S(t,function(t){var e="";return t>65535&&(e+=M((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=M(t)}).join("")}function O(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:c}function C(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function R(t,e,n){var r=0;for(t=n?x(t/d):t>>1,t+=x(t/e);t>w*h>>1;r+=c)t=x(t/w);return x(r+(w+1)*t/(t+f))}function j(t){var e,n,r,i,o,a,s,f,d,v,g=[],y=t.length,b=0,w=_,M=p;for((n=t.lastIndexOf(m))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&E("not-basic"),g.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<y;){for(o=b,a=1,s=c;i>=y&&E("invalid-input"),((f=O(t.charCodeAt(i++)))>=c||f>x((u-b)/a))&&E("overflow"),b+=f*a,!(f<(d=s<=M?l:s>=M+h?h:s-M));s+=c)a>x(u/(v=c-d))&&E("overflow"),a*=v;M=R(b-o,e=g.length+1,0==o),x(b/e)>u-w&&E("overflow"),w+=x(b/e),b%=e,g.splice(b++,0,w)}return T(g)}function N(t){var e,n,r,i,o,a,s,f,d,v,g,y,b,w,S,A=[];for(y=(t=k(t)).length,e=_,n=0,o=p,a=0;a<y;++a)(g=t[a])<128&&A.push(M(g));for(r=i=A.length,i&&A.push(m);r<y;){for(s=u,a=0;a<y;++a)(g=t[a])>=e&&g<s&&(s=g);for(s-e>x((u-n)/(b=r+1))&&E("overflow"),n+=(s-e)*b,e=s,a=0;a<y;++a)if((g=t[a])<e&&++n>u&&E("overflow"),g==e){for(f=n,d=c;!(f<(v=d<=o?l:d>=o+h?h:d-o));d+=c)S=f-v,w=c-v,A.push(M(C(v+S%w,0))),f=x(S/w);A.push(M(C(f,0))),o=R(n,b,r==i),n=0,++r}++n,++e}return A.join("")}s={version:"1.4.1",ucs2:{decode:k,encode:T},decode:j,encode:N,toASCII:function(t){return A(t,function(t){return g.test(t)?"xn--"+N(t):t})},toUnicode:function(t){return A(t,function(t){return v.test(t)?j(t.slice(4).toLowerCase()):t})}},void 0===(i=function(){return s}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(118)(t),n(2))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(121),e.encode=e.stringify=n(122)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var h,f,d,p,_=t[l].replace(s,"%20"),m=_.indexOf(n);m>=0?(h=_.substr(0,m),f=_.substr(m+1)):(h=_,f=""),d=decodeURIComponent(h),p=decodeURIComponent(f),r(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(a(t),function(a){var s=encodeURIComponent(r(a))+n;return i(t[a])?o(t[a],function(t){return s+encodeURIComponent(r(t))}).join(e):s+encodeURIComponent(r(t[a]))}).join(e):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e){},function(t,e){},function(t,e,n){(function(e,r){var i=n(14),o=n(39),a=n(5),s=n(126),u=new e([0]),c=function(t,e){t._corked?t.once("uncork",e):e()},l=function(t,e){return function(n){n?t._destroyInterval(n):e&&!t._ended&&t.end()}},h=function(t,e,n){if(!(this instanceof h))return new h(t,e,n);i.Duplex.call(this,n),this._writable=null,this._readable=null,this._readable2=null,this._forwardDestroy=!n||!1!==n.destroy,this._forwardEnd=!n||!1!==n.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this._error=null,this._preferError=!1,this.destroyed=!1,t&&this.setWritable(t),e&&this.setReadable(e)};a(h,i.Duplex),h.obj=function(t,e,n){return n||(n={}),n.objectMode=!0,n.highWaterMark=16,new h(t,e,n)},h.prototype.cork=function(){1==++this._corked&&this.emit("cork")},h.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},h.prototype.setWritable=function(t){if(this._unwrite&&this._unwrite(),this.destroyed)t&&t.destroy&&t.destroy();else if(null!==t&&!1!==t){var e=this,n=o(t,{writable:!0,readable:!1},l(this,this._forwardEnd)),i=function(){var t=e._ondrain;e._ondrain=null,t&&t()};this._unwrite&&r.nextTick(i),this._writable=t,this._writable.on("drain",i),this._unwrite=function(){e._writable.removeListener("drain",i),n()},this.uncork()}else this.end()},h.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed)t&&t.destroy&&t.destroy();else{if(null===t||!1===t)return this.push(null),void this.resume();var e=this,n=o(t,{writable:!1,readable:!0},l(this)),r=function(){e._forward()},a=function(){e.push(null)};this._drained=!0,this._readable=t,this._readable2=t._readableState?t:function(t){return new i.Readable({objectMode:!0,highWaterMark:16}).wrap(t)}(t),this._readable2.on("readable",r),this._readable2.on("end",a),this._unread=function(){e._readable2.removeListener("readable",r),e._readable2.removeListener("end",a),n()},this._forward()}},h.prototype._read=function(){this._drained=!0,this._forward()},h.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var t;for(this._forwarding=!0;this._drained&&null!==(t=s(this._readable2));)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}},h.prototype.destroy=function(t){if(this._preferError&&!this._error&&t&&(this._error=t),!this.destroyed){this.destroyed=!0;var e=this;r.nextTick(function(){e._destroy(e._preferError?e._error:t)})}},h.prototype._destroyInterval=function(t){if(!this.destroyed){if("premature close"!==t.message)return this.destroy(t);this._preferError=!0,this.destroy(null)}},h.prototype._destroy=function(t){if(t){var e=this._ondrain;this._ondrain=null,e?e(t):this.emit("error",t)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},h.prototype._write=function(t,e,n){return this.destroyed?n():this._corked?c(this,this._write.bind(this,t,e,n)):t===u?this._finish(n):this._writable?void(!1===this._writable.write(t)?this._ondrain=n:n()):n()},h.prototype._finish=function(t){var e=this;this.emit("preend"),c(this,function(){!function(t,e){t?t._writableState&&t._writableState.finished?e():t._writableState?t.end(e):(t.end(),e()):e()}(e._forwardEnd&&e._writable,function(){!1===e._writableState.prefinished&&(e._writableState.prefinished=!0),e.emit("prefinish"),c(e,t)})})},h.prototype.end=function(t,e,n){return"function"==typeof t?this.end(null,null,t):"function"==typeof e?this.end(t,null,e):(this._ended=!0,t&&this.write(t),this._writableState.ending||this.write(u),i.Writable.prototype.end.call(this,n))},t.exports=h}).call(this,n(15).Buffer,n(1))},function(t,e){t.exports=function(t){var e=t._readableState;return e?e.objectMode?t.read():t.read(function(t){return t.buffer.length?t.buffer.head?t.buffer.head.data.length:t.buffer[0].length:t.length}(e)):null}},function(t,e){var n=null;"undefined"!=typeof WebSocket?n=WebSocket:"undefined"!=typeof MozWebSocket?n=MozWebSocket:"undefined"!=typeof window&&(n=window.WebSocket||window.MozWebSocket),t.exports=n}])});
//# sourceMappingURL=index.js.map